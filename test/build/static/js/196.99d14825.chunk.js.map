{"version":3,"file":"static/js/196.99d14825.chunk.js","mappings":"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AAE,GAAG,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC,EAAE,IAAI,KAAK,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,IAAI,KAAK,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,IAAI,GAAG,EAAE,IAAI,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,IAAI,KAAK,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,IAAI,GAAG,EAAE,IAAI,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,GAAG,EAAE,IAAI,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,GAAG,IAAI,KAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,GAAG,IAAI,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,IAAI,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,GAAG,IAAI,KAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,GAAG,IAAI,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,G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","sources":["../node_modules/eth-json-rpc-middleware/node_modules/json-rpc-engine/src/createScaffoldMiddleware.js","../node_modules/eth-json-rpc-middleware/scaffold.js","../node_modules/js-sha256/src/sha256.js","../node_modules/safe-event-emitter/index.js","../node_modules/walletlink/dist/WalletLink.js","../node_modules/walletlink/dist/components/LinkDialog-css.js","../node_modules/walletlink/dist/components/LinkDialog.js","../node_modules/walletlink/dist/components/LinkFlow.js","../node_modules/walletlink/dist/components/QRCode.js","../node_modules/walletlink/dist/components/Snackbar-css.js","../node_modules/walletlink/dist/components/Snackbar.js","../node_modules/walletlink/dist/components/Spinner-css.js","../node_modules/walletlink/dist/components/Spinner.js","../node_modules/walletlink/dist/components/TryExtensionLinkDialog-css.js","../node_modules/walletlink/dist/components/TryExtensionLinkDialog.js","../node_modules/walletlink/dist/components/icons/QRLogo.js","../node_modules/walletlink/dist/components/icons/globe-icon-svg.js","../node_modules/walletlink/dist/components/icons/link-icon-svg.js","../node_modules/walletlink/dist/components/icons/lock-icon-svg.js","../node_modules/walletlink/dist/connection/ClientMessage.js","../node_modules/walletlink/dist/connection/RxWebSocket.js","../node_modules/walletlink/dist/connection/ServerMessage.js","../node_modules/walletlink/dist/connection/WalletLinkAnalytics.js","../node_modules/walletlink/dist/connection/WalletLinkConnection.js","../node_modules/walletlink/dist/index.js","../node_modules/walletlink/dist/init/WalletLinkAnalyticsAbstract.js","../node_modules/walletlink/dist/init/events.js","../node_modules/walletlink/dist/init/index.js","../node_modules/walletlink/dist/lib/ScopedLocalStorage.js","../node_modules/walletlink/dist/lib/cssReset-css.js","../node_modules/walletlink/dist/lib/cssReset.js","../node_modules/walletlink/dist/provider/FilterPolyfill.js","../node_modules/walletlink/dist/provider/JSONRPC.js","../node_modules/walletlink/dist/provider/SubscriptionManager.js","../node_modules/walletlink/dist/provider/WalletLinkProvider.js","../node_modules/walletlink/dist/provider/WalletLinkSdkUI.js","../node_modules/walletlink/dist/provider/WalletLinkUI.js","../node_modules/walletlink/dist/relay/RelayMessage.js","../node_modules/walletlink/dist/relay/Session.js","../node_modules/walletlink/dist/relay/WalletLinkRelay.js","../node_modules/walletlink/dist/relay/WalletLinkRelayAbstract.js","../node_modules/walletlink/dist/relay/WalletLinkRelayEventManager.js","../node_modules/walletlink/dist/relay/Web3Method.js","../node_modules/walletlink/dist/relay/Web3RequestCanceledMessage.js","../node_modules/walletlink/dist/relay/Web3RequestMessage.js","../node_modules/walletlink/dist/relay/Web3Response.js","../node_modules/walletlink/dist/relay/Web3ResponseMessage.js","../node_modules/walletlink/dist/relay/aes256gcm.js","../node_modules/walletlink/dist/types.js","../node_modules/walletlink/dist/util.js","../node_modules/walletlink/dist/vendor-js/eth-eip712-util/abi.js","../node_modules/walletlink/dist/vendor-js/eth-eip712-util/index.js","../node_modules/walletlink/dist/vendor-js/eth-eip712-util/util.js","../node_modules/walletlink/dist/vendor-js/qrcode-svg/index.js","../node_modules/walletlink/dist/version.js","../node_modules/walletlink/node_modules/eth-block-tracker/src/base.js","../node_modules/walletlink/node_modules/eth-block-tracker/src/polling.js","../node_modules/walletlink/node_modules/eth-json-rpc-filters/base-filter-history.js","../node_modules/walletlink/node_modules/eth-json-rpc-filters/base-filter.js","../node_modules/walletlink/node_modules/eth-json-rpc-filters/block-filter.js","../node_modules/walletlink/node_modules/eth-json-rpc-filters/getBlocksForRange.js","../node_modules/walletlink/node_modules/eth-json-rpc-filters/hexUtils.js","../node_modules/walletlink/node_modules/eth-json-rpc-filters/index.js","../node_modules/walletlink/node_modules/eth-json-rpc-filters/log-filter.js","../node_modules/walletlink/node_modules/eth-json-rpc-filters/node_modules/pify/index.js","../node_modules/walletlink/node_modules/eth-json-rpc-filters/subscriptionManager.js","../node_modules/walletlink/node_modules/eth-json-rpc-filters/tx-filter.js"],"sourcesContent":["module.exports = function createScaffoldMiddleware (handlers) {\n  return (req, res, next, end) => {\n    const handler = handlers[req.method]\n    // if no handler, return\n    if (handler === undefined) {\n      return next()\n    }\n    // if handler is fn, call as middleware\n    if (typeof handler === 'function') {\n      return handler(req, res, next, end)\n    }\n    // if handler is some other value, use as result\n    res.result = handler\n    return end()\n  }\n}\n","// for backwards compat\nmodule.exports = require('json-rpc-engine/src/createScaffoldMiddleware')\n","/**\n * [js-sha256]{@link https://github.com/emn178/js-sha256}\n *\n * @version 0.9.0\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2017\n * @license MIT\n */\n/*jslint bitwise: true */\n(function () {\n  'use strict';\n\n  var ERROR = 'input is invalid type';\n  var WINDOW = typeof window === 'object';\n  var root = WINDOW ? window : {};\n  if (root.JS_SHA256_NO_WINDOW) {\n    WINDOW = false;\n  }\n  var WEB_WORKER = !WINDOW && typeof self === 'object';\n  var NODE_JS = !root.JS_SHA256_NO_NODE_JS && typeof process === 'object' && process.versions && process.versions.node;\n  if (NODE_JS) {\n    root = global;\n  } else if (WEB_WORKER) {\n    root = self;\n  }\n  var COMMON_JS = !root.JS_SHA256_NO_COMMON_JS && typeof module === 'object' && module.exports;\n  var AMD = typeof define === 'function' && define.amd;\n  var ARRAY_BUFFER = !root.JS_SHA256_NO_ARRAY_BUFFER && typeof ArrayBuffer !== 'undefined';\n  var HEX_CHARS = '0123456789abcdef'.split('');\n  var EXTRA = [-2147483648, 8388608, 32768, 128];\n  var SHIFT = [24, 16, 8, 0];\n  var K = [\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n  ];\n  var OUTPUT_TYPES = ['hex', 'array', 'digest', 'arrayBuffer'];\n\n  var blocks = [];\n\n  if (root.JS_SHA256_NO_NODE_JS || !Array.isArray) {\n    Array.isArray = function (obj) {\n      return Object.prototype.toString.call(obj) === '[object Array]';\n    };\n  }\n\n  if (ARRAY_BUFFER && (root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW || !ArrayBuffer.isView)) {\n    ArrayBuffer.isView = function (obj) {\n      return typeof obj === 'object' && obj.buffer && obj.buffer.constructor === ArrayBuffer;\n    };\n  }\n\n  var createOutputMethod = function (outputType, is224) {\n    return function (message) {\n      return new Sha256(is224, true).update(message)[outputType]();\n    };\n  };\n\n  var createMethod = function (is224) {\n    var method = createOutputMethod('hex', is224);\n    if (NODE_JS) {\n      method = nodeWrap(method, is224);\n    }\n    method.create = function () {\n      return new Sha256(is224);\n    };\n    method.update = function (message) {\n      return method.create().update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createOutputMethod(type, is224);\n    }\n    return method;\n  };\n\n  var nodeWrap = function (method, is224) {\n    var crypto = eval(\"require('crypto')\");\n    var Buffer = eval(\"require('buffer').Buffer\");\n    var algorithm = is224 ? 'sha224' : 'sha256';\n    var nodeMethod = function (message) {\n      if (typeof message === 'string') {\n        return crypto.createHash(algorithm).update(message, 'utf8').digest('hex');\n      } else {\n        if (message === null || message === undefined) {\n          throw new Error(ERROR);\n        } else if (message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        }\n      }\n      if (Array.isArray(message) || ArrayBuffer.isView(message) ||\n        message.constructor === Buffer) {\n        return crypto.createHash(algorithm).update(new Buffer(message)).digest('hex');\n      } else {\n        return method(message);\n      }\n    };\n    return nodeMethod;\n  };\n\n  var createHmacOutputMethod = function (outputType, is224) {\n    return function (key, message) {\n      return new HmacSha256(key, is224, true).update(message)[outputType]();\n    };\n  };\n\n  var createHmacMethod = function (is224) {\n    var method = createHmacOutputMethod('hex', is224);\n    method.create = function (key) {\n      return new HmacSha256(key, is224);\n    };\n    method.update = function (key, message) {\n      return method.create(key).update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createHmacOutputMethod(type, is224);\n    }\n    return method;\n  };\n\n  function Sha256(is224, sharedMemory) {\n    if (sharedMemory) {\n      blocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      this.blocks = blocks;\n    } else {\n      this.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n    }\n\n    if (is224) {\n      this.h0 = 0xc1059ed8;\n      this.h1 = 0x367cd507;\n      this.h2 = 0x3070dd17;\n      this.h3 = 0xf70e5939;\n      this.h4 = 0xffc00b31;\n      this.h5 = 0x68581511;\n      this.h6 = 0x64f98fa7;\n      this.h7 = 0xbefa4fa4;\n    } else { // 256\n      this.h0 = 0x6a09e667;\n      this.h1 = 0xbb67ae85;\n      this.h2 = 0x3c6ef372;\n      this.h3 = 0xa54ff53a;\n      this.h4 = 0x510e527f;\n      this.h5 = 0x9b05688c;\n      this.h6 = 0x1f83d9ab;\n      this.h7 = 0x5be0cd19;\n    }\n\n    this.block = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n    this.first = true;\n    this.is224 = is224;\n  }\n\n  Sha256.prototype.update = function (message) {\n    if (this.finalized) {\n      return;\n    }\n    var notString, type = typeof message;\n    if (type !== 'string') {\n      if (type === 'object') {\n        if (message === null) {\n          throw new Error(ERROR);\n        } else if (ARRAY_BUFFER && message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        } else if (!Array.isArray(message)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(message)) {\n            throw new Error(ERROR);\n          }\n        }\n      } else {\n        throw new Error(ERROR);\n      }\n      notString = true;\n    }\n    var code, index = 0, i, length = message.length, blocks = this.blocks;\n\n    while (index < length) {\n      if (this.hashed) {\n        this.hashed = false;\n        blocks[0] = this.block;\n        blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n          blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n          blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n          blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      }\n\n      if (notString) {\n        for (i = this.start; index < length && i < 64; ++index) {\n          blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\n        }\n      } else {\n        for (i = this.start; index < length && i < 64; ++index) {\n          code = message.charCodeAt(index);\n          if (code < 0x80) {\n            blocks[i >> 2] |= code << SHIFT[i++ & 3];\n          } else if (code < 0x800) {\n            blocks[i >> 2] |= (0xc0 | (code >> 6)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else if (code < 0xd800 || code >= 0xe000) {\n            blocks[i >> 2] |= (0xe0 | (code >> 12)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else {\n            code = 0x10000 + (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\n            blocks[i >> 2] |= (0xf0 | (code >> 18)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 12) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          }\n        }\n      }\n\n      this.lastByteIndex = i;\n      this.bytes += i - this.start;\n      if (i >= 64) {\n        this.block = blocks[16];\n        this.start = i - 64;\n        this.hash();\n        this.hashed = true;\n      } else {\n        this.start = i;\n      }\n    }\n    if (this.bytes > 4294967295) {\n      this.hBytes += this.bytes / 4294967296 << 0;\n      this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n  };\n\n  Sha256.prototype.finalize = function () {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[16] = this.block;\n    blocks[i >> 2] |= EXTRA[i & 3];\n    this.block = blocks[16];\n    if (i >= 56) {\n      if (!this.hashed) {\n        this.hash();\n      }\n      blocks[0] = this.block;\n      blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n    }\n    blocks[14] = this.hBytes << 3 | this.bytes >>> 29;\n    blocks[15] = this.bytes << 3;\n    this.hash();\n  };\n\n  Sha256.prototype.hash = function () {\n    var a = this.h0, b = this.h1, c = this.h2, d = this.h3, e = this.h4, f = this.h5, g = this.h6,\n      h = this.h7, blocks = this.blocks, j, s0, s1, maj, t1, t2, ch, ab, da, cd, bc;\n\n    for (j = 16; j < 64; ++j) {\n      // rightrotate\n      t1 = blocks[j - 15];\n      s0 = ((t1 >>> 7) | (t1 << 25)) ^ ((t1 >>> 18) | (t1 << 14)) ^ (t1 >>> 3);\n      t1 = blocks[j - 2];\n      s1 = ((t1 >>> 17) | (t1 << 15)) ^ ((t1 >>> 19) | (t1 << 13)) ^ (t1 >>> 10);\n      blocks[j] = blocks[j - 16] + s0 + blocks[j - 7] + s1 << 0;\n    }\n\n    bc = b & c;\n    for (j = 0; j < 64; j += 4) {\n      if (this.first) {\n        if (this.is224) {\n          ab = 300032;\n          t1 = blocks[0] - 1413257819;\n          h = t1 - 150054599 << 0;\n          d = t1 + 24177077 << 0;\n        } else {\n          ab = 704751109;\n          t1 = blocks[0] - 210244248;\n          h = t1 - 1521486534 << 0;\n          d = t1 + 143694565 << 0;\n        }\n        this.first = false;\n      } else {\n        s0 = ((a >>> 2) | (a << 30)) ^ ((a >>> 13) | (a << 19)) ^ ((a >>> 22) | (a << 10));\n        s1 = ((e >>> 6) | (e << 26)) ^ ((e >>> 11) | (e << 21)) ^ ((e >>> 25) | (e << 7));\n        ab = a & b;\n        maj = ab ^ (a & c) ^ bc;\n        ch = (e & f) ^ (~e & g);\n        t1 = h + s1 + ch + K[j] + blocks[j];\n        t2 = s0 + maj;\n        h = d + t1 << 0;\n        d = t1 + t2 << 0;\n      }\n      s0 = ((d >>> 2) | (d << 30)) ^ ((d >>> 13) | (d << 19)) ^ ((d >>> 22) | (d << 10));\n      s1 = ((h >>> 6) | (h << 26)) ^ ((h >>> 11) | (h << 21)) ^ ((h >>> 25) | (h << 7));\n      da = d & a;\n      maj = da ^ (d & b) ^ ab;\n      ch = (h & e) ^ (~h & f);\n      t1 = g + s1 + ch + K[j + 1] + blocks[j + 1];\n      t2 = s0 + maj;\n      g = c + t1 << 0;\n      c = t1 + t2 << 0;\n      s0 = ((c >>> 2) | (c << 30)) ^ ((c >>> 13) | (c << 19)) ^ ((c >>> 22) | (c << 10));\n      s1 = ((g >>> 6) | (g << 26)) ^ ((g >>> 11) | (g << 21)) ^ ((g >>> 25) | (g << 7));\n      cd = c & d;\n      maj = cd ^ (c & a) ^ da;\n      ch = (g & h) ^ (~g & e);\n      t1 = f + s1 + ch + K[j + 2] + blocks[j + 2];\n      t2 = s0 + maj;\n      f = b + t1 << 0;\n      b = t1 + t2 << 0;\n      s0 = ((b >>> 2) | (b << 30)) ^ ((b >>> 13) | (b << 19)) ^ ((b >>> 22) | (b << 10));\n      s1 = ((f >>> 6) | (f << 26)) ^ ((f >>> 11) | (f << 21)) ^ ((f >>> 25) | (f << 7));\n      bc = b & c;\n      maj = bc ^ (b & d) ^ cd;\n      ch = (f & g) ^ (~f & h);\n      t1 = e + s1 + ch + K[j + 3] + blocks[j + 3];\n      t2 = s0 + maj;\n      e = a + t1 << 0;\n      a = t1 + t2 << 0;\n    }\n\n    this.h0 = this.h0 + a << 0;\n    this.h1 = this.h1 + b << 0;\n    this.h2 = this.h2 + c << 0;\n    this.h3 = this.h3 + d << 0;\n    this.h4 = this.h4 + e << 0;\n    this.h5 = this.h5 + f << 0;\n    this.h6 = this.h6 + g << 0;\n    this.h7 = this.h7 + h << 0;\n  };\n\n  Sha256.prototype.hex = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5,\n      h6 = this.h6, h7 = this.h7;\n\n    var hex = HEX_CHARS[(h0 >> 28) & 0x0F] + HEX_CHARS[(h0 >> 24) & 0x0F] +\n      HEX_CHARS[(h0 >> 20) & 0x0F] + HEX_CHARS[(h0 >> 16) & 0x0F] +\n      HEX_CHARS[(h0 >> 12) & 0x0F] + HEX_CHARS[(h0 >> 8) & 0x0F] +\n      HEX_CHARS[(h0 >> 4) & 0x0F] + HEX_CHARS[h0 & 0x0F] +\n      HEX_CHARS[(h1 >> 28) & 0x0F] + HEX_CHARS[(h1 >> 24) & 0x0F] +\n      HEX_CHARS[(h1 >> 20) & 0x0F] + HEX_CHARS[(h1 >> 16) & 0x0F] +\n      HEX_CHARS[(h1 >> 12) & 0x0F] + HEX_CHARS[(h1 >> 8) & 0x0F] +\n      HEX_CHARS[(h1 >> 4) & 0x0F] + HEX_CHARS[h1 & 0x0F] +\n      HEX_CHARS[(h2 >> 28) & 0x0F] + HEX_CHARS[(h2 >> 24) & 0x0F] +\n      HEX_CHARS[(h2 >> 20) & 0x0F] + HEX_CHARS[(h2 >> 16) & 0x0F] +\n      HEX_CHARS[(h2 >> 12) & 0x0F] + HEX_CHARS[(h2 >> 8) & 0x0F] +\n      HEX_CHARS[(h2 >> 4) & 0x0F] + HEX_CHARS[h2 & 0x0F] +\n      HEX_CHARS[(h3 >> 28) & 0x0F] + HEX_CHARS[(h3 >> 24) & 0x0F] +\n      HEX_CHARS[(h3 >> 20) & 0x0F] + HEX_CHARS[(h3 >> 16) & 0x0F] +\n      HEX_CHARS[(h3 >> 12) & 0x0F] + HEX_CHARS[(h3 >> 8) & 0x0F] +\n      HEX_CHARS[(h3 >> 4) & 0x0F] + HEX_CHARS[h3 & 0x0F] +\n      HEX_CHARS[(h4 >> 28) & 0x0F] + HEX_CHARS[(h4 >> 24) & 0x0F] +\n      HEX_CHARS[(h4 >> 20) & 0x0F] + HEX_CHARS[(h4 >> 16) & 0x0F] +\n      HEX_CHARS[(h4 >> 12) & 0x0F] + HEX_CHARS[(h4 >> 8) & 0x0F] +\n      HEX_CHARS[(h4 >> 4) & 0x0F] + HEX_CHARS[h4 & 0x0F] +\n      HEX_CHARS[(h5 >> 28) & 0x0F] + HEX_CHARS[(h5 >> 24) & 0x0F] +\n      HEX_CHARS[(h5 >> 20) & 0x0F] + HEX_CHARS[(h5 >> 16) & 0x0F] +\n      HEX_CHARS[(h5 >> 12) & 0x0F] + HEX_CHARS[(h5 >> 8) & 0x0F] +\n      HEX_CHARS[(h5 >> 4) & 0x0F] + HEX_CHARS[h5 & 0x0F] +\n      HEX_CHARS[(h6 >> 28) & 0x0F] + HEX_CHARS[(h6 >> 24) & 0x0F] +\n      HEX_CHARS[(h6 >> 20) & 0x0F] + HEX_CHARS[(h6 >> 16) & 0x0F] +\n      HEX_CHARS[(h6 >> 12) & 0x0F] + HEX_CHARS[(h6 >> 8) & 0x0F] +\n      HEX_CHARS[(h6 >> 4) & 0x0F] + HEX_CHARS[h6 & 0x0F];\n    if (!this.is224) {\n      hex += HEX_CHARS[(h7 >> 28) & 0x0F] + HEX_CHARS[(h7 >> 24) & 0x0F] +\n        HEX_CHARS[(h7 >> 20) & 0x0F] + HEX_CHARS[(h7 >> 16) & 0x0F] +\n        HEX_CHARS[(h7 >> 12) & 0x0F] + HEX_CHARS[(h7 >> 8) & 0x0F] +\n        HEX_CHARS[(h7 >> 4) & 0x0F] + HEX_CHARS[h7 & 0x0F];\n    }\n    return hex;\n  };\n\n  Sha256.prototype.toString = Sha256.prototype.hex;\n\n  Sha256.prototype.digest = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5,\n      h6 = this.h6, h7 = this.h7;\n\n    var arr = [\n      (h0 >> 24) & 0xFF, (h0 >> 16) & 0xFF, (h0 >> 8) & 0xFF, h0 & 0xFF,\n      (h1 >> 24) & 0xFF, (h1 >> 16) & 0xFF, (h1 >> 8) & 0xFF, h1 & 0xFF,\n      (h2 >> 24) & 0xFF, (h2 >> 16) & 0xFF, (h2 >> 8) & 0xFF, h2 & 0xFF,\n      (h3 >> 24) & 0xFF, (h3 >> 16) & 0xFF, (h3 >> 8) & 0xFF, h3 & 0xFF,\n      (h4 >> 24) & 0xFF, (h4 >> 16) & 0xFF, (h4 >> 8) & 0xFF, h4 & 0xFF,\n      (h5 >> 24) & 0xFF, (h5 >> 16) & 0xFF, (h5 >> 8) & 0xFF, h5 & 0xFF,\n      (h6 >> 24) & 0xFF, (h6 >> 16) & 0xFF, (h6 >> 8) & 0xFF, h6 & 0xFF\n    ];\n    if (!this.is224) {\n      arr.push((h7 >> 24) & 0xFF, (h7 >> 16) & 0xFF, (h7 >> 8) & 0xFF, h7 & 0xFF);\n    }\n    return arr;\n  };\n\n  Sha256.prototype.array = Sha256.prototype.digest;\n\n  Sha256.prototype.arrayBuffer = function () {\n    this.finalize();\n\n    var buffer = new ArrayBuffer(this.is224 ? 28 : 32);\n    var dataView = new DataView(buffer);\n    dataView.setUint32(0, this.h0);\n    dataView.setUint32(4, this.h1);\n    dataView.setUint32(8, this.h2);\n    dataView.setUint32(12, this.h3);\n    dataView.setUint32(16, this.h4);\n    dataView.setUint32(20, this.h5);\n    dataView.setUint32(24, this.h6);\n    if (!this.is224) {\n      dataView.setUint32(28, this.h7);\n    }\n    return buffer;\n  };\n\n  function HmacSha256(key, is224, sharedMemory) {\n    var i, type = typeof key;\n    if (type === 'string') {\n      var bytes = [], length = key.length, index = 0, code;\n      for (i = 0; i < length; ++i) {\n        code = key.charCodeAt(i);\n        if (code < 0x80) {\n          bytes[index++] = code;\n        } else if (code < 0x800) {\n          bytes[index++] = (0xc0 | (code >> 6));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        } else if (code < 0xd800 || code >= 0xe000) {\n          bytes[index++] = (0xe0 | (code >> 12));\n          bytes[index++] = (0x80 | ((code >> 6) & 0x3f));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        } else {\n          code = 0x10000 + (((code & 0x3ff) << 10) | (key.charCodeAt(++i) & 0x3ff));\n          bytes[index++] = (0xf0 | (code >> 18));\n          bytes[index++] = (0x80 | ((code >> 12) & 0x3f));\n          bytes[index++] = (0x80 | ((code >> 6) & 0x3f));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        }\n      }\n      key = bytes;\n    } else {\n      if (type === 'object') {\n        if (key === null) {\n          throw new Error(ERROR);\n        } else if (ARRAY_BUFFER && key.constructor === ArrayBuffer) {\n          key = new Uint8Array(key);\n        } else if (!Array.isArray(key)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(key)) {\n            throw new Error(ERROR);\n          }\n        }\n      } else {\n        throw new Error(ERROR);\n      }\n    }\n\n    if (key.length > 64) {\n      key = (new Sha256(is224, true)).update(key).array();\n    }\n\n    var oKeyPad = [], iKeyPad = [];\n    for (i = 0; i < 64; ++i) {\n      var b = key[i] || 0;\n      oKeyPad[i] = 0x5c ^ b;\n      iKeyPad[i] = 0x36 ^ b;\n    }\n\n    Sha256.call(this, is224, sharedMemory);\n\n    this.update(iKeyPad);\n    this.oKeyPad = oKeyPad;\n    this.inner = true;\n    this.sharedMemory = sharedMemory;\n  }\n  HmacSha256.prototype = new Sha256();\n\n  HmacSha256.prototype.finalize = function () {\n    Sha256.prototype.finalize.call(this);\n    if (this.inner) {\n      this.inner = false;\n      var innerHash = this.array();\n      Sha256.call(this, this.is224, this.sharedMemory);\n      this.update(this.oKeyPad);\n      this.update(innerHash);\n      Sha256.prototype.finalize.call(this);\n    }\n  };\n\n  var exports = createMethod();\n  exports.sha256 = exports;\n  exports.sha224 = createMethod(true);\n  exports.sha256.hmac = createHmacMethod();\n  exports.sha224.hmac = createHmacMethod(true);\n\n  if (COMMON_JS) {\n    module.exports = exports;\n  } else {\n    root.sha256 = exports.sha256;\n    root.sha224 = exports.sha224;\n    if (AMD) {\n      define(function () {\n        return exports;\n      });\n    }\n  }\n})();\n","const util = require('util')\nconst EventEmitter = require('events/')\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n}\n\nmodule.exports = SafeEventEmitter\n\n\nfunction SafeEventEmitter() {\n  EventEmitter.call(this)\n}\n\nutil.inherits(SafeEventEmitter, EventEmitter)\n\nSafeEventEmitter.prototype.emit = function (type) {\n  // copied from https://github.com/Gozala/events/blob/master/events.js\n  // modified lines are commented with \"edited:\"\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    // edited: using safeApply\n    safeApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      // edited: using safeApply\n      safeApply(listeners[i], this, args);\n  }\n\n  return true;\n}\n\nfunction safeApply(handler, context, args) {\n  try {\n    ReflectApply(handler, context, args)\n  } catch (err) {\n    // throw error after timeout so as not to interupt the stack\n    setTimeout(() => {\n      throw err\n    })\n  }\n}\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WalletLink = void 0;\nconst WalletLinkAnalytics_1 = require(\"./connection/WalletLinkAnalytics\");\nconst ScopedLocalStorage_1 = require(\"./lib/ScopedLocalStorage\");\nconst WalletLinkProvider_1 = require(\"./provider/WalletLinkProvider\");\nconst WalletLinkSdkUI_1 = require(\"./provider/WalletLinkSdkUI\");\nconst WalletLinkRelay_1 = require(\"./relay/WalletLinkRelay\");\nconst WalletLinkRelayEventManager_1 = require(\"./relay/WalletLinkRelayEventManager\");\nconst util_1 = require(\"./util\");\nconst WALLETLINK_URL = process.env.WALLETLINK_URL || \"https://www.walletlink.org\";\nconst WALLETLINK_VERSION = process.env.WALLETLINK_VERSION ||\n    require(\"../package.json\").version ||\n    \"unknown\";\nclass WalletLink {\n    /**\n     * Constructor\n     * @param options WalletLink options object\n     */\n    constructor(options) {\n        var _a;\n        this._appName = \"\";\n        this._appLogoUrl = null;\n        this._relay = null;\n        this._relayEventManager = null;\n        const walletLinkUrl = options.walletLinkUrl || WALLETLINK_URL;\n        let walletLinkUIConstructor;\n        if (!options.walletLinkUIConstructor) {\n            walletLinkUIConstructor = opts => new WalletLinkSdkUI_1.WalletLinkSdkUI(opts);\n        }\n        else {\n            walletLinkUIConstructor = options.walletLinkUIConstructor;\n        }\n        if (typeof options.overrideIsMetaMask === \"undefined\") {\n            this._overrideIsMetaMask = false;\n        }\n        else {\n            this._overrideIsMetaMask = options.overrideIsMetaMask;\n        }\n        this._overrideIsCoinbaseWallet = (_a = options.overrideIsCoinbaseWallet) !== null && _a !== void 0 ? _a : true;\n        this._walletLinkAnalytics = options.walletLinkAnalytics\n            ? options.walletLinkAnalytics\n            : new WalletLinkAnalytics_1.WalletLinkAnalytics();\n        const u = new URL(walletLinkUrl);\n        const walletLinkOrigin = `${u.protocol}//${u.host}`;\n        this._storage = new ScopedLocalStorage_1.ScopedLocalStorage(`-walletlink:${walletLinkOrigin}`);\n        this._storage.setItem(\"version\", WalletLink.VERSION);\n        if (typeof window.walletLinkExtension !== \"undefined\") {\n            return;\n        }\n        this._relayEventManager = new WalletLinkRelayEventManager_1.WalletLinkRelayEventManager();\n        this._relay = new WalletLinkRelay_1.WalletLinkRelay({\n            walletLinkUrl,\n            version: WALLETLINK_VERSION,\n            darkMode: !!options.darkMode,\n            walletLinkUIConstructor,\n            storage: this._storage,\n            relayEventManager: this._relayEventManager,\n            walletLinkAnalytics: this._walletLinkAnalytics\n        });\n        this.setAppInfo(options.appName, options.appLogoUrl);\n        this._relay.attachUI();\n    }\n    /**\n     * Create a Web3 Provider object\n     * @param jsonRpcUrl Ethereum JSON RPC URL (Default: \"\")\n     * @param chainId Ethereum Chain ID (Default: 1)\n     * @returns A Web3 Provider\n     */\n    makeWeb3Provider(jsonRpcUrl = \"\", chainId = 1) {\n        if (typeof window.walletLinkExtension !== \"undefined\") {\n            if (\n            /* eslint-disable @typescript-eslint/ban-ts-comment */\n            // @ts-ignore\n            typeof window.walletLinkExtension.isCipher !== \"boolean\" ||\n                // @ts-ignore\n                !window.walletLinkExtension.isCipher\n            /* eslint-enable @typescript-eslint/ban-ts-comment */\n            ) {\n                window.walletLinkExtension.setProviderInfo(jsonRpcUrl, chainId);\n            }\n            return window.walletLinkExtension;\n        }\n        const relay = this._relay;\n        if (!relay || !this._relayEventManager || !this._storage) {\n            throw new Error(\"Relay not initialized, should never happen\");\n        }\n        if (!jsonRpcUrl)\n            relay.setConnectDisabled(true);\n        return new WalletLinkProvider_1.WalletLinkProvider({\n            relayProvider: () => Promise.resolve(relay),\n            relayEventManager: this._relayEventManager,\n            storage: this._storage,\n            jsonRpcUrl,\n            chainId,\n            walletLinkAnalytics: this._walletLinkAnalytics,\n            overrideIsMetaMask: this._overrideIsMetaMask,\n            overrideIsCoinbaseWallet: this._overrideIsCoinbaseWallet\n        });\n    }\n    /**\n     * Set application information\n     * @param appName Application name\n     * @param appLogoUrl Application logo image URL\n     */\n    setAppInfo(appName, appLogoUrl) {\n        var _a;\n        this._appName = appName || \"DApp\";\n        this._appLogoUrl = appLogoUrl || (0, util_1.getFavicon)();\n        if (typeof window.walletLinkExtension !== \"undefined\") {\n            if (\n            /* eslint-disable @typescript-eslint/ban-ts-comment */\n            // @ts-ignore\n            typeof window.walletLinkExtension.isCipher !== \"boolean\" ||\n                // @ts-ignore\n                !window.walletLinkExtension.isCipher\n            /* eslint-enable @typescript-eslint/ban-ts-comment */\n            ) {\n                window.walletLinkExtension.setAppInfo(this._appName, this._appLogoUrl);\n            }\n        }\n        else {\n            (_a = this._relay) === null || _a === void 0 ? void 0 : _a.setAppInfo(this._appName, this._appLogoUrl);\n        }\n    }\n    /**\n     * Disconnect. After disconnecting, this will reload the web page to ensure\n     * all potential stale state is cleared.\n     */\n    disconnect() {\n        var _a;\n        if (typeof window.walletLinkExtension !== \"undefined\") {\n            window.walletLinkExtension.close();\n        }\n        else {\n            (_a = this._relay) === null || _a === void 0 ? void 0 : _a.resetAndReload();\n        }\n    }\n}\nexports.WalletLink = WalletLink;\n/**\n * WalletLink version\n */\nWalletLink.VERSION = WALLETLINK_VERSION;\n","\"use strict\";\n// Copyright (c) 2018-2021 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2021 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = `.-walletlink-css-reset .-walletlink-link-dialog{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center}.-walletlink-css-reset .-walletlink-link-dialog-backdrop{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.33);transition:opacity .25s}.-walletlink-css-reset .-walletlink-link-dialog-backdrop-hidden{opacity:0}.-walletlink-css-reset .-walletlink-link-dialog-box{display:flex;position:relative;flex-direction:column;background-color:#f6f6f6;border-radius:16px;box-shadow:0px 16px 24px rgba(0,0,0,.1),0px 0px 8px rgba(0,0,0,.05);transform:scale(1);transition:opacity .25s,transform .25s;overflow:hidden}.-walletlink-css-reset .-walletlink-link-dialog-box-hidden{opacity:0;transform:scale(0.85)}.-walletlink-css-reset .-walletlink-link-dialog-box-content{padding:24px;text-align:center}.-walletlink-css-reset .-walletlink-link-dialog-box-content h3{display:block;margin-bottom:24px;text-align:left;text-transform:uppercase;font-size:22px;font-weight:bold;line-height:1.2;color:#000}.-walletlink-css-reset .-walletlink-link-dialog-box-content-qrcode{position:relative;display:block;margin-bottom:24px;background-color:#f6f6f6;padding:16px;border-radius:16px;box-shadow:4px 4px 8px rgba(0,0,0,.15),-8px -8px 8px #fff;overflow:hidden}.-walletlink-css-reset .-walletlink-link-dialog-box-content-qrcode-wrapper{display:block;width:232px;height:232px;padding:4px;border-radius:4px;background:#f4f4f4;margin-bottom:16px}.-walletlink-css-reset .-walletlink-link-dialog-box-content-qrcode-wrapper img{display:block;width:224px;height:224px}.-walletlink-css-reset .-walletlink-link-dialog-box-content-qrcode>p{display:block;color:gray;font-weight:bold;font-size:12px;text-align:center}.-walletlink-css-reset .-walletlink-link-dialog-box-content-qrcode-connecting{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:rgba(246,246,246,.98)}.-walletlink-css-reset .-walletlink-link-dialog-box-content-qrcode-connecting p{margin-top:16px;color:#333;font-size:12px;font-weight:bold}.-walletlink-css-reset .-walletlink-link-dialog-box-content a{text-align:center;cursor:pointer;transition:color .1s;font-size:14px}.-walletlink-css-reset .-walletlink-link-dialog-box-content a,.-walletlink-css-reset .-walletlink-link-dialog-box-content a:link,.-walletlink-css-reset .-walletlink-link-dialog-box-content a:visited{color:#999}.-walletlink-css-reset .-walletlink-link-dialog-box-content a:hover,.-walletlink-css-reset .-walletlink-link-dialog-box-content a:active{color:#666;text-decoration:underline}.-walletlink-css-reset .-walletlink-link-dialog-box-cancel{position:absolute;-webkit-appearance:none;display:flex;align-items:center;justify-content:center;top:24px;right:24px;width:24px;height:24px;border-radius:12px;background-color:#e7e7e7;cursor:pointer}.-walletlink-css-reset .-walletlink-link-dialog-box-cancel-x{position:relative;display:block}.-walletlink-css-reset .-walletlink-link-dialog-box-cancel-x::before,.-walletlink-css-reset .-walletlink-link-dialog-box-cancel-x::after{content:\"\";position:absolute;display:block;top:-1px;left:-7px;width:14px;height:2px;background-color:#999;transition:background-color .2s}.-walletlink-css-reset .-walletlink-link-dialog-box-cancel-x::before{transform:rotate(45deg)}.-walletlink-css-reset .-walletlink-link-dialog-box-cancel-x::after{transform:rotate(135deg)}.-walletlink-css-reset .-walletlink-link-dialog-box-cancel:hover .-walletlink-link-dialog-box-cancel-x-a,.-walletlink-css-reset .-walletlink-link-dialog-box-cancel:hover .-walletlink-link-dialog-box-cancel-x-b{background-color:#000}.-walletlink-css-reset .-walletlink-link-dialog-container{display:block}.-walletlink-css-reset .-walletlink-link-dialog-container-hidden{display:none}.-walletlink-css-reset .-walletlink-link-dialog-container-dark .-walletlink-link-dialog-box{background-color:#2a2a2a}.-walletlink-css-reset .-walletlink-link-dialog-container-dark .-walletlink-link-dialog-box-content h3{color:#ccc}.-walletlink-css-reset .-walletlink-link-dialog-container-dark .-walletlink-link-dialog-box-content-qrcode{background-color:#2a2a2a;box-shadow:4px 4px 8px rgba(0,0,0,.5),-8px -8px 8px #343434}.-walletlink-css-reset .-walletlink-link-dialog-container-dark .-walletlink-link-dialog-box-content-qrcode>p{color:#999}.-walletlink-css-reset .-walletlink-link-dialog-container-dark .-walletlink-link-dialog-box-content-qrcode-connecting{background:rgba(42,42,42,.98)}.-walletlink-css-reset .-walletlink-link-dialog-container-dark .-walletlink-link-dialog-box-content-qrcode-connecting p{color:#ddd}.-walletlink-css-reset .-walletlink-link-dialog-container-dark .-walletlink-link-dialog-box-content a,.-walletlink-css-reset .-walletlink-link-dialog-container-dark .-walletlink-link-dialog-box-content a:link,.-walletlink-css-reset .-walletlink-link-dialog-container-dark .-walletlink-link-dialog-box-content a:visited{color:#888}.-walletlink-css-reset .-walletlink-link-dialog-container-dark .-walletlink-link-dialog-box-content a:hover,.-walletlink-css-reset .-walletlink-link-dialog-container-dark .-walletlink-link-dialog-box-content a:active{color:#aaa}.-walletlink-css-reset .-walletlink-link-dialog-container-dark .-walletlink-link-dialog-box-cancel{background-color:#333}.-walletlink-css-reset .-walletlink-link-dialog-container-dark .-walletlink-link-dialog-box-cancel-x::before,.-walletlink-css-reset .-walletlink-link-dialog-container-dark .-walletlink-link-dialog-box-cancel-x::after{background-color:#aaa}.-walletlink-css-reset .-walletlink-link-dialog-container-dark .-walletlink-link-dialog-box-cancel:hover .-walletlink-link-dialog-box-cancel-x::before,.-walletlink-css-reset .-walletlink-link-dialog-container-dark .-walletlink-link-dialog-box-cancel:hover .-walletlink-link-dialog-box-cancel-x::after{background-color:#eee}`;\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LinkDialog = void 0;\nconst clsx_1 = __importDefault(require(\"clsx\"));\nconst preact_1 = require(\"preact\");\nconst hooks_1 = require(\"preact/hooks\");\nconst LinkDialog_css_1 = __importDefault(require(\"./LinkDialog-css\"));\nconst QRCode_1 = require(\"./QRCode\");\nconst Spinner_1 = require(\"./Spinner\");\nconst version_1 = require(\"../version\");\nconst LinkDialog = props => {\n    const [isContainerHidden, setContainerHidden] = (0, hooks_1.useState)(!props.isOpen);\n    const [isDialogHidden, setDialogHidden] = (0, hooks_1.useState)(!props.isOpen);\n    (0, hooks_1.useEffect)(() => {\n        const { isOpen } = props;\n        const timers = [\n            window.setTimeout(() => {\n                setDialogHidden(!isOpen);\n            }, 10)\n        ];\n        if (isOpen) {\n            setContainerHidden(false);\n        }\n        else {\n            timers.push(window.setTimeout(() => {\n                setContainerHidden(true);\n            }, 360));\n        }\n        return () => {\n            timers.forEach(window.clearTimeout);\n        };\n    }, [props.isOpen]);\n    return ((0, preact_1.h)(\"div\", { class: (0, clsx_1.default)(\"-walletlink-link-dialog-container\", props.darkMode && \"-walletlink-link-dialog-container-dark\", isContainerHidden && \"-walletlink-link-dialog-container-hidden\") },\n        (0, preact_1.h)(\"style\", null, LinkDialog_css_1.default),\n        (0, preact_1.h)(\"div\", { class: (0, clsx_1.default)(\"-walletlink-link-dialog-backdrop\", isDialogHidden && \"-walletlink-link-dialog-backdrop-hidden\") }),\n        (0, preact_1.h)(\"div\", { class: \"-walletlink-link-dialog\" },\n            (0, preact_1.h)(\"div\", { class: (0, clsx_1.default)(\"-walletlink-link-dialog-box\", isDialogHidden && \"-walletlink-link-dialog-box-hidden\") },\n                (0, preact_1.h)(ScanQRCode, { darkMode: props.darkMode, version: props.version, sessionId: props.sessionId, sessionSecret: props.sessionSecret, walletLinkUrl: props.walletLinkUrl, isConnected: props.isConnected, isParentConnection: props.isParentConnection }),\n                props.onCancel && (0, preact_1.h)(CancelButton, { onClick: props.onCancel })))));\n};\nexports.LinkDialog = LinkDialog;\nconst ScanQRCode = props => {\n    const serverUrl = window.encodeURIComponent(props.walletLinkUrl);\n    const sessionIdKey = props.isParentConnection ? \"parent-id\" : \"id\";\n    const qrUrl = `${props.walletLinkUrl}/#/link?${sessionIdKey}=${props.sessionId}&secret=${props.sessionSecret}&server=${serverUrl}&v=1`;\n    return ((0, preact_1.h)(\"div\", { class: \"-walletlink-link-dialog-box-content\" },\n        (0, preact_1.h)(\"h3\", null,\n            \"Scan to\",\n            (0, preact_1.h)(\"br\", null),\n            \" Connect\"),\n        (0, preact_1.h)(\"div\", { class: \"-walletlink-link-dialog-box-content-qrcode\" },\n            (0, preact_1.h)(\"div\", { class: \"-walletlink-link-dialog-box-content-qrcode-wrapper\" },\n                (0, preact_1.h)(QRCode_1.QRCode, { content: qrUrl, width: 224, height: 224, fgColor: \"#000\", bgColor: \"transparent\" })),\n            (0, preact_1.h)(\"input\", { type: \"hidden\", name: \"walletlink-version\", value: version_1.LIB_VERSION }),\n            (0, preact_1.h)(\"input\", { type: \"hidden\", value: qrUrl }),\n            !props.isConnected && ((0, preact_1.h)(\"div\", { class: \"-walletlink-link-dialog-box-content-qrcode-connecting\" },\n                (0, preact_1.h)(Spinner_1.Spinner, { size: 128, color: props.darkMode ? \"#fff\" : \"#000\" }),\n                (0, preact_1.h)(\"p\", null, \"Connecting...\"))),\n            (0, preact_1.h)(\"p\", { title: `WalletLink v${props.version}` }, \"Powered by WalletLink\")),\n        (0, preact_1.h)(\"a\", { href: `${props.walletLinkUrl}/#/wallets`, target: \"_blank\", rel: \"noopener\" }, \"Don\\u2019t have a wallet app?\")));\n};\nconst CancelButton = props => ((0, preact_1.h)(\"button\", { class: \"-walletlink-link-dialog-box-cancel\", onClick: props.onClick },\n    (0, preact_1.h)(\"div\", { class: \"-walletlink-link-dialog-box-cancel-x\" })));\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LinkFlow = void 0;\nconst preact_1 = require(\"preact\");\nconst rxjs_1 = require(\"rxjs\");\nconst operators_1 = require(\"rxjs/operators\");\nconst LinkDialog_1 = require(\"./LinkDialog\");\nconst TryExtensionLinkDialog_1 = require(\"./TryExtensionLinkDialog\");\nclass LinkFlow {\n    constructor(options) {\n        this.extensionUI$ = new rxjs_1.BehaviorSubject({});\n        this.subscriptions = new rxjs_1.Subscription();\n        this.isConnected = false;\n        this.isOpen = false;\n        this.onCancel = null;\n        this.root = null;\n        // if true, hide QR code in LinkFlow (which happens if no jsonRpcUrl is provided)\n        this.connectDisabled = false;\n        this.darkMode = options.darkMode;\n        this.version = options.version;\n        this.sessionId = options.sessionId;\n        this.sessionSecret = options.sessionSecret;\n        this.walletLinkUrl = options.walletLinkUrl;\n        this.isParentConnection = options.isParentConnection;\n        this.connected$ = options.connected$;\n        // Check if extension UI is enabled\n        fetch(\"https://api.wallet.coinbase.com/rpc/v2/getFeatureFlags\")\n            .then(res => res.json())\n            .then(json => {\n            const enabled = json.result.desktop.extension_ui;\n            if (typeof enabled === \"undefined\") {\n                this.extensionUI$.next({ value: false });\n            }\n            else {\n                this.extensionUI$.next({ value: enabled });\n            }\n        })\n            .catch(err => {\n            console.error('Couldn\\'t fetch feature flags - ', err);\n            this.extensionUI$.next({ value: false });\n        });\n    }\n    attach(el) {\n        this.root = document.createElement(\"div\");\n        this.root.className = \"-walletlink-link-flow-root\";\n        el.appendChild(this.root);\n        this.render();\n        this.subscriptions.add(this.connected$.subscribe(v => {\n            if (this.isConnected !== v) {\n                this.isConnected = v;\n                this.render();\n            }\n        }));\n    }\n    detach() {\n        var _a;\n        if (!this.root) {\n            return;\n        }\n        this.subscriptions.unsubscribe();\n        (0, preact_1.render)(null, this.root);\n        (_a = this.root.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(this.root);\n    }\n    setConnectDisabled(connectDisabled) {\n        this.connectDisabled = connectDisabled;\n    }\n    open(options) {\n        this.isOpen = true;\n        this.onCancel = options.onCancel;\n        this.render();\n    }\n    close() {\n        this.isOpen = false;\n        this.onCancel = null;\n        this.render();\n    }\n    render() {\n        if (!this.root) {\n            return;\n        }\n        const subscription = this.extensionUI$\n            .pipe((0, operators_1.first)(enabled => enabled.value !== undefined)) // wait for a valid value before rendering\n            .subscribe(enabled => {\n            if (!this.root) {\n                return;\n            }\n            (0, preact_1.render)(enabled.value ? ((0, preact_1.h)(TryExtensionLinkDialog_1.TryExtensionLinkDialog, { darkMode: this.darkMode, version: this.version, sessionId: this.sessionId, sessionSecret: this.sessionSecret, walletLinkUrl: this.walletLinkUrl, isOpen: this.isOpen, isConnected: this.isConnected, isParentConnection: this.isParentConnection, onCancel: this.onCancel, connectDisabled: this.connectDisabled })) : ((0, preact_1.h)(LinkDialog_1.LinkDialog, { darkMode: this.darkMode, version: this.version, sessionId: this.sessionId, sessionSecret: this.sessionSecret, walletLinkUrl: this.walletLinkUrl, isOpen: this.isOpen, isConnected: this.isConnected, isParentConnection: this.isParentConnection, onCancel: this.onCancel })), this.root);\n        });\n        this.subscriptions.add(subscription);\n    }\n}\nexports.LinkFlow = LinkFlow;\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.QRCode = void 0;\nconst preact_1 = require(\"preact\");\nconst hooks_1 = require(\"preact/hooks\");\nconst qrcode_svg_1 = __importDefault(require(\"../vendor-js/qrcode-svg\"));\nconst QRCode = props => {\n    const [svg, setSvg] = (0, hooks_1.useState)(\"\");\n    (0, hooks_1.useEffect)(() => {\n        var _a, _b;\n        const qrcode = new qrcode_svg_1.default({\n            content: props.content,\n            background: props.bgColor || \"#ffffff\",\n            color: props.fgColor || \"#000000\",\n            container: \"svg\",\n            ecl: \"M\",\n            width: (_a = props.width) !== null && _a !== void 0 ? _a : 256,\n            height: (_b = props.height) !== null && _b !== void 0 ? _b : 256,\n            padding: 0,\n            image: props.image\n        });\n        const base64 = Buffer.from(qrcode.svg(), \"utf8\").toString(\"base64\");\n        setSvg(`data:image/svg+xml;base64,${base64}`);\n    });\n    return svg ? (0, preact_1.h)(\"img\", { src: svg, alt: \"QR Code\" }) : null;\n};\nexports.QRCode = QRCode;\n","\"use strict\";\n// Copyright (c) 2018-2021 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2021 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = `.-walletlink-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-walletlink-css-reset .-gear-container *{user-select:none}.-walletlink-css-reset .-gear-container svg{opacity:0;position:absolute}.-walletlink-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-walletlink-css-reset .-walletlink-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-walletlink-css-reset .-walletlink-snackbar *{user-select:none}.-walletlink-css-reset .-walletlink-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-walletlink-css-reset .-walletlink-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-walletlink-css-reset .-walletlink-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-walletlink-css-reset .-walletlink-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-walletlink-css-reset .-walletlink-snackbar-instance-header *{cursor:pointer}.-walletlink-css-reset .-walletlink-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-walletlink-css-reset .-walletlink-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-walletlink-css-reset .-walletlink-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-walletlink-css-reset .-walletlink-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-walletlink-css-reset .-walletlink-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-walletlink-css-reset .-walletlink-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-walletlink-css-reset .-walletlink-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-walletlink-css-reset .-walletlink-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-walletlink-css-reset .-walletlink-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-walletlink-css-reset .-walletlink-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-walletlink-css-reset .-walletlink-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-walletlink-css-reset .-walletlink-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-walletlink-css-reset .-walletlink-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-walletlink-css-reset .-walletlink-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-walletlink-css-reset .-walletlink-snackbar-instance-expanded .-walletlink-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}`;\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Snackbar = void 0;\nconst clsx_1 = __importDefault(require(\"clsx\"));\nconst preact_1 = require(\"preact\");\nconst hooks_1 = require(\"preact/hooks\");\nconst Snackbar_css_1 = __importDefault(require(\"./Snackbar-css\"));\nconst cblogo = `data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+`;\nconst gearIcon = `data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=`;\nclass Snackbar {\n    constructor(options) {\n        this.items = new Map();\n        this.nextItemKey = 0;\n        this.root = null;\n        this.darkMode = options.darkMode;\n    }\n    attach(el) {\n        this.root = document.createElement(\"div\");\n        this.root.className = \"-walletlink-snackbar-root\";\n        el.appendChild(this.root);\n        this.render();\n    }\n    presentItem(itemProps) {\n        const key = this.nextItemKey++;\n        this.items.set(key, itemProps);\n        this.render();\n        return () => {\n            this.items.delete(key);\n            this.render();\n        };\n    }\n    clear() {\n        this.items.clear();\n        this.render();\n    }\n    render() {\n        if (!this.root) {\n            return;\n        }\n        (0, preact_1.render)((0, preact_1.h)(\"div\", null,\n            (0, preact_1.h)(SnackbarContainer, { darkMode: this.darkMode }, Array.from(this.items.entries()).map(([key, itemProps]) => ((0, preact_1.h)(SnackbarInstance, Object.assign({}, itemProps, { key: key })))))), this.root);\n    }\n}\nexports.Snackbar = Snackbar;\nconst SnackbarContainer = props => ((0, preact_1.h)(\"div\", { class: (0, clsx_1.default)(\"-walletlink-snackbar-container\") },\n    (0, preact_1.h)(\"style\", null, Snackbar_css_1.default),\n    (0, preact_1.h)(\"div\", { class: \"-walletlink-snackbar\" }, props.children)));\nconst SnackbarInstance = ({ autoExpand, message, menuItems }) => {\n    const [hidden, setHidden] = (0, hooks_1.useState)(true);\n    const [expanded, setExpanded] = (0, hooks_1.useState)(autoExpand !== null && autoExpand !== void 0 ? autoExpand : false);\n    (0, hooks_1.useEffect)(() => {\n        const timers = [\n            window.setTimeout(() => {\n                setHidden(false);\n            }, 1),\n            window.setTimeout(() => {\n                setExpanded(true);\n            }, 10000)\n        ];\n        return () => {\n            timers.forEach(window.clearTimeout);\n        };\n    });\n    const toggleExpanded = () => {\n        setExpanded(!expanded);\n    };\n    return ((0, preact_1.h)(\"div\", { class: (0, clsx_1.default)(\"-walletlink-snackbar-instance\", hidden && \"-walletlink-snackbar-instance-hidden\", expanded && \"-walletlink-snackbar-instance-expanded\") },\n        (0, preact_1.h)(\"div\", { class: \"-walletlink-snackbar-instance-header\", onClick: toggleExpanded },\n            (0, preact_1.h)(\"img\", { src: cblogo, class: \"-walletlink-snackbar-instance-header-cblogo\" }),\n            (0, preact_1.h)(\"div\", { class: \"-walletlink-snackbar-instance-header-message\" }, message),\n            (0, preact_1.h)(\"div\", { class: \"-gear-container\" },\n                !expanded && ((0, preact_1.h)(\"svg\", { width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" },\n                    (0, preact_1.h)(\"circle\", { cx: \"12\", cy: \"12\", r: \"12\", fill: \"#F5F7F8\" }))),\n                (0, preact_1.h)(\"img\", { src: gearIcon, class: \"-gear-icon\", title: \"Expand\" }))),\n        menuItems && menuItems.length > 0 && ((0, preact_1.h)(\"div\", { class: \"-walletlink-snackbar-instance-menu\" }, menuItems.map((action, i) => ((0, preact_1.h)(\"div\", { class: (0, clsx_1.default)(\"-walletlink-snackbar-instance-menu-item\", action.isRed && \"-walletlink-snackbar-instance-menu-item-is-red\"), onClick: action.onClick, key: i },\n            (0, preact_1.h)(\"svg\", { width: action.svgWidth, height: action.svgHeight, viewBox: \"0 0 10 11\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" },\n                (0, preact_1.h)(\"path\", { \"fill-rule\": action.defaultFillRule, \"clip-rule\": action.defaultClipRule, d: action.path, fill: \"#AAAAAA\" })),\n            (0, preact_1.h)(\"span\", { class: (0, clsx_1.default)(\"-walletlink-snackbar-instance-menu-item-info\", action.isRed && \"-walletlink-snackbar-instance-menu-item-info-is-red\") }, action.info))))))));\n};\n","\"use strict\";\n// Copyright (c) 2018-2021 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2021 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = `.-walletlink-css-reset .-walletlink-spinner{display:inline-block}.-walletlink-css-reset .-walletlink-spinner svg{display:inline-block;animation:2s linear infinite -walletlink-spinner-svg}.-walletlink-css-reset .-walletlink-spinner svg circle{animation:1.9s ease-in-out infinite both -walletlink-spinner-circle;display:block;fill:transparent;stroke-dasharray:283;stroke-dashoffset:280;stroke-linecap:round;stroke-width:10px;transform-origin:50% 50%}@keyframes -walletlink-spinner-svg{0%{transform:rotateZ(0deg)}100%{transform:rotateZ(360deg)}}@keyframes -walletlink-spinner-circle{0%,25%{stroke-dashoffset:280;transform:rotate(0)}50%,75%{stroke-dashoffset:75;transform:rotate(45deg)}100%{stroke-dashoffset:280;transform:rotate(360deg)}}`;\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Spinner = void 0;\nconst preact_1 = require(\"preact\");\nconst Spinner_css_1 = __importDefault(require(\"./Spinner-css\"));\nconst Spinner = props => {\n    var _a;\n    const size = (_a = props.size) !== null && _a !== void 0 ? _a : 64;\n    const color = props.color || \"#000\";\n    return ((0, preact_1.h)(\"div\", { class: \"-walletlink-spinner\" },\n        (0, preact_1.h)(\"style\", null, Spinner_css_1.default),\n        (0, preact_1.h)(\"svg\", { viewBox: \"0 0 100 100\", xmlns: \"http://www.w3.org/2000/svg\", style: { width: size, height: size } },\n            (0, preact_1.h)(\"circle\", { style: { cx: 50, cy: 50, r: 45, stroke: color } }))));\n};\nexports.Spinner = Spinner;\n","\"use strict\";\n// Copyright (c) 2018-2021 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2021 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = `.-walletlink-css-reset .-walletlink-extension-dialog{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center}.-walletlink-css-reset .-walletlink-extension-dialog-backdrop{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.5);transition:opacity .25s}.-walletlink-css-reset .-walletlink-extension-dialog-backdrop-hidden{opacity:0}.-walletlink-css-reset .-walletlink-extension-dialog-box{display:flex;position:relative;max-width:500px;flex-direction:column;transform:scale(1);transition:opacity .25s,transform .25s}.-walletlink-css-reset .-walletlink-extension-dialog-box-hidden{opacity:0;transform:scale(0.85)}.-walletlink-css-reset .-walletlink-extension-dialog-box-top{display:flex;flex-direction:row;background-color:#fff;border-radius:8px;overflow:hidden;min-height:300px}.-walletlink-css-reset .-walletlink-extension-dialog-box-top-install-region{display:flex;flex-basis:50%;flex-direction:column;justify-content:center;padding:32px}.-walletlink-css-reset .-walletlink-extension-dialog-box-top-install-region button{display:block;border-radius:8px;background-color:#1652f0;color:#fff;width:90%;min-width:fit-content;height:44px;margin-top:16px;font-size:16px;padding-left:16px;padding-right:16px;cursor:pointer;font-weight:500;text-align:center}.-walletlink-css-reset .-walletlink-extension-dialog-box-top-info-region{display:flex;flex-basis:50%;flex-direction:column;justify-content:center;background-color:#fafbfc}.-walletlink-css-reset .-walletlink-extension-dialog-box-top-description{display:flex;flex-direction:row;align-items:center;padding-top:14px;padding-bottom:14px;padding-left:24px;padding-right:32px}.-walletlink-css-reset .-walletlink-extension-dialog-box-top-description-icon-wrapper{display:block;position:relative;width:40px;height:40px;flex-shrink:0;flex-grow:0;border-radius:20px;background-color:#fff;box-shadow:0px 0px 8px rgba(0,0,0,.04),0px 16px 24px rgba(0,0,0,.06)}.-walletlink-css-reset .-walletlink-extension-dialog-box-top-description-icon-wrapper img{position:absolute;top:0;bottom:0;left:0;right:0;margin:auto}.-walletlink-css-reset .-walletlink-extension-dialog-box-top-description-text{margin-left:16px;flex-grow:1;font-size:13px;line-height:19px;color:#000;align-self:center}.-walletlink-css-reset .-walletlink-extension-dialog-box-bottom{display:flex;flex-direction:row;overflow:hidden;border-radius:8px;background-color:#fff;margin-top:8px}.-walletlink-css-reset .-walletlink-extension-dialog-box-bottom-description-region{display:flex;flex-direction:column;justify-content:center;padding:32px;flex-grow:1}.-walletlink-css-reset .-walletlink-extension-dialog-box-bottom-description{font-size:13px;line-height:19px;margin-top:12px;color:#aaa}.-walletlink-css-reset .-walletlink-extension-dialog-box-bottom-description a{font-size:inherit;line-height:inherit;color:#1652f0;cursor:pointer}.-walletlink-css-reset .-walletlink-extension-dialog-box-bottom-qr-region{position:relative;flex-shrink:0;display:flex;flex-direction:column;justify-content:center;padding-left:24px;padding-right:24px;padding-top:16px;padding-bottom:16px}.-walletlink-css-reset .-walletlink-extension-dialog-box-bottom-qr-wrapper{position:relative;display:block;padding:8px;border-radius:8px;box-shadow:0px 4px 12px rgba(0,0,0,.1)}.-walletlink-css-reset .-walletlink-extension-dialog-box-bottom-qr-wrapper img{display:block}.-walletlink-css-reset .-walletlink-extension-dialog-box-bottom-qr-connecting{position:absolute;top:0;bottom:0;left:0;right:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:rgba(255,255,255,.95)}.-walletlink-css-reset .-walletlink-extension-dialog-box-bottom-qr-connecting>p{font-size:12px;font-weight:bold;color:#000;margin-top:16px}.-walletlink-css-reset .-walletlink-extension-dialog-box-cancel{position:absolute;-webkit-appearance:none;display:flex;align-items:center;justify-content:center;top:16px;right:16px;width:24px;height:24px;border-radius:12px;background-color:#fafbfc;cursor:pointer}.-walletlink-css-reset .-walletlink-extension-dialog-box-cancel-x{position:relative;display:block;cursor:pointer}.-walletlink-css-reset .-walletlink-extension-dialog-box-cancel-x::before,.-walletlink-css-reset .-walletlink-extension-dialog-box-cancel-x::after{content:\"\";position:absolute;display:block;top:-1px;left:-7px;width:14px;height:1px;background-color:#000;transition:background-color .2s}.-walletlink-css-reset .-walletlink-extension-dialog-box-cancel-x::before{transform:rotate(45deg)}.-walletlink-css-reset .-walletlink-extension-dialog-box-cancel-x::after{transform:rotate(135deg)}.-walletlink-css-reset .-walletlink-extension-dialog-box-cancel:hover .-walletlink-link-dialog-box-cancel-x-a,.-walletlink-css-reset .-walletlink-extension-dialog-box-cancel:hover .-walletlink-link-dialog-box-cancel-x-b{background-color:#000}.-walletlink-css-reset .-walletlink-extension-dialog-container{display:block}.-walletlink-css-reset .-walletlink-extension-dialog-container-hidden{display:none}.-walletlink-css-reset .-walletlink-extension-dialog h2{display:block;text-align:left;font-size:22px;font-weight:600;line-height:28px;color:#000}`;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TryExtensionLinkDialog = void 0;\nconst clsx_1 = __importDefault(require(\"clsx\"));\nconst preact_1 = require(\"preact\");\nconst hooks_1 = require(\"preact/hooks\");\nconst globe_icon_svg_1 = __importDefault(require(\"./icons/globe-icon-svg\"));\nconst link_icon_svg_1 = __importDefault(require(\"./icons/link-icon-svg\"));\nconst lock_icon_svg_1 = __importDefault(require(\"./icons/lock-icon-svg\"));\nconst QRLogo_1 = __importDefault(require(\"./icons/QRLogo\"));\nconst QRCode_1 = require(\"./QRCode\");\nconst Spinner_1 = require(\"./Spinner\");\nconst TryExtensionLinkDialog_css_1 = __importDefault(require(\"./TryExtensionLinkDialog-css\"));\nconst version_1 = require(\"../version\");\nconst TryExtensionLinkDialog = props => {\n    const [isContainerHidden, setContainerHidden] = (0, hooks_1.useState)(!props.isOpen);\n    const [isDialogHidden, setDialogHidden] = (0, hooks_1.useState)(!props.isOpen);\n    (0, hooks_1.useEffect)(() => {\n        const { isOpen } = props;\n        const timers = [\n            window.setTimeout(() => {\n                setDialogHidden(!isOpen);\n            }, 10)\n        ];\n        if (isOpen) {\n            setContainerHidden(false);\n        }\n        else {\n            timers.push(window.setTimeout(() => {\n                setContainerHidden(true);\n            }, 360));\n        }\n        return () => {\n            timers.forEach(window.clearTimeout);\n        };\n    }, [props.isOpen]);\n    return ((0, preact_1.h)(\"div\", { class: (0, clsx_1.default)(\"-walletlink-extension-dialog-container\", isContainerHidden && \"-walletlink-extension-dialog-container-hidden\") },\n        (0, preact_1.h)(\"style\", null, TryExtensionLinkDialog_css_1.default),\n        (0, preact_1.h)(\"div\", { class: (0, clsx_1.default)(\"-walletlink-extension-dialog-backdrop\", isDialogHidden && \"-walletlink-extension-dialog-backdrop-hidden\") }),\n        (0, preact_1.h)(\"div\", { class: \"-walletlink-extension-dialog\" },\n            (0, preact_1.h)(\"div\", { class: (0, clsx_1.default)(\"-walletlink-extension-dialog-box\", isDialogHidden && \"-walletlink-extension-dialog-box-hidden\") },\n                (0, preact_1.h)(TryExtensionBox, { onInstallClick: () => {\n                        window.open(\"https://api.wallet.coinbase.com/rpc/v2/desktop/chrome\", \"_blank\");\n                    } }),\n                !props.connectDisabled ? ((0, preact_1.h)(ScanQRBox, { darkMode: props.darkMode, version: props.version, sessionId: props.sessionId, sessionSecret: props.sessionSecret, walletLinkUrl: props.walletLinkUrl, isConnected: props.isConnected, isParentConnection: props.isParentConnection })) : null,\n                props.onCancel && (0, preact_1.h)(CancelButton, { onClick: props.onCancel })))));\n};\nexports.TryExtensionLinkDialog = TryExtensionLinkDialog;\nconst TryExtensionBox = props => {\n    return ((0, preact_1.h)(\"div\", { class: \"-walletlink-extension-dialog-box-top\" },\n        (0, preact_1.h)(\"div\", { class: \"-walletlink-extension-dialog-box-top-install-region\" },\n            (0, preact_1.h)(\"h2\", null, \"Try the Coinbase Wallet extension\"),\n            (0, preact_1.h)(\"button\", { onClick: props.onInstallClick }, \"Install\")),\n        (0, preact_1.h)(\"div\", { class: \"-walletlink-extension-dialog-box-top-info-region\" },\n            (0, preact_1.h)(DescriptionItem, { icon: link_icon_svg_1.default, text: \"Connect to crypto apps with one click\" }),\n            (0, preact_1.h)(DescriptionItem, { icon: lock_icon_svg_1.default, text: \"Your private key is stored securely\" }),\n            (0, preact_1.h)(DescriptionItem, { icon: globe_icon_svg_1.default, text: \"Works with Ethereum, Polygon, and more\" }))));\n};\nconst ScanQRBox = props => {\n    const serverUrl = window.encodeURIComponent(props.walletLinkUrl);\n    const sessionIdKey = props.isParentConnection ? \"parent-id\" : \"id\";\n    const qrUrl = `${props.walletLinkUrl}/#/link?${sessionIdKey}=${props.sessionId}&secret=${props.sessionSecret}&server=${serverUrl}&v=1`;\n    return ((0, preact_1.h)(\"div\", { class: \"-walletlink-extension-dialog-box-bottom\" },\n        (0, preact_1.h)(\"div\", { class: \"-walletlink-extension-dialog-box-bottom-description-region\" },\n            (0, preact_1.h)(\"h2\", null, \"Or scan to connect\"),\n            (0, preact_1.h)(\"body\", { class: \"-walletlink-extension-dialog-box-bottom-description\" },\n                \"Open \",\n                (0, preact_1.h)(\"a\", { href: \"https://wallet.coinbase.com/\" }, \"Coinbase Wallet\"),\n                \" on your mobile phone and scan\")),\n        (0, preact_1.h)(\"div\", { class: \"-walletlink-extension-dialog-box-bottom-qr-region\" },\n            (0, preact_1.h)(\"div\", { class: \"-walletlink-extension-dialog-box-bottom-qr-wrapper\" },\n                (0, preact_1.h)(QRCode_1.QRCode, { content: qrUrl, width: 150, height: 150, fgColor: \"#000\", bgColor: \"transparent\", image: {\n                        svg: QRLogo_1.default,\n                        width: 34,\n                        height: 34\n                    } })),\n            (0, preact_1.h)(\"input\", { type: \"hidden\", name: \"walletlink-version\", value: version_1.LIB_VERSION }),\n            (0, preact_1.h)(\"input\", { type: \"hidden\", value: qrUrl }),\n            !props.isConnected && ((0, preact_1.h)(\"div\", { class: \"-walletlink-extension-dialog-box-bottom-qr-connecting\" },\n                (0, preact_1.h)(Spinner_1.Spinner, { size: 36, color: \"#000\" }),\n                (0, preact_1.h)(\"p\", null, \"Connecting...\"))))));\n};\nconst DescriptionItem = props => {\n    return ((0, preact_1.h)(\"div\", { class: \"-walletlink-extension-dialog-box-top-description\" },\n        (0, preact_1.h)(\"div\", { class: \"-walletlink-extension-dialog-box-top-description-icon-wrapper\" },\n            (0, preact_1.h)(\"img\", { src: props.icon })),\n        (0, preact_1.h)(\"body\", { class: \"-walletlink-extension-dialog-box-top-description-text\" }, props.text)));\n};\nconst CancelButton = props => ((0, preact_1.h)(\"button\", { class: \"-walletlink-extension-dialog-box-cancel\", onClick: props.onClick },\n    (0, preact_1.h)(\"div\", { class: \"-walletlink-extension-dialog-box-cancel-x\" })));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = `<svg width=\"100\" height=\"100\" viewBox=\"0 0 100 100\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<circle cx=\"50\" cy=\"50\" r=\"50\" fill=\"white\"/>\n<circle cx=\"49.9996\" cy=\"49.9996\" r=\"43.6363\" fill=\"#1B53E4\"/>\n<circle cx=\"49.9996\" cy=\"49.9996\" r=\"43.6363\" stroke=\"white\"/>\n<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M19.3379 49.9484C19.3379 66.8508 33.04 80.553 49.9425 80.553C66.8449 80.553 80.5471 66.8508 80.5471 49.9484C80.5471 33.0459 66.8449 19.3438 49.9425 19.3438C33.04 19.3438 19.3379 33.0459 19.3379 49.9484ZM44.0817 40.0799C41.8725 40.0799 40.0817 41.8708 40.0817 44.0799V55.8029C40.0817 58.012 41.8725 59.8029 44.0817 59.8029H55.8046C58.0138 59.8029 59.8046 58.012 59.8046 55.8029V44.0799C59.8046 41.8708 58.0138 40.0799 55.8046 40.0799H44.0817Z\" fill=\"white\"/>\n</svg>\n\n`;\n","\"use strict\";\n// Copyright (c) 2018-2021 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2021 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = `data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTggMEMzLjU4IDAgMCAzLjU4IDAgOHMzLjU4IDggOCA4IDgtMy41OCA4LTgtMy41OC04LTgtOFptNS45MSA3aC0xLjk0Yy0uMS0xLjU3LS40Mi0zLS45MS00LjE1IDEuNDguODggMi41NSAyLjM4IDIuODUgNC4xNVpNOCAxNGMtLjQ1IDAtMS43Mi0xLjc3LTEuOTUtNWgzLjljLS4yMyAzLjIzLTEuNSA1LTEuOTUgNVpNNi4wNSA3QzYuMjggMy43NyA3LjU1IDIgOCAyYy40NSAwIDEuNzIgMS43NyAxLjk1IDVoLTMuOVpNNC45NCAyLjg1QzQuNDYgNCA0LjEzIDUuNDMgNC4wMyA3SDIuMDljLjMtMS43NyAxLjM3LTMuMjcgMi44NS00LjE1Wk0yLjA5IDloMS45NGMuMSAxLjU3LjQyIDMgLjkxIDQuMTVBNS45OTggNS45OTggMCAwIDEgMi4wOSA5Wm04Ljk3IDQuMTVjLjQ4LTEuMTUuODEtMi41OC45MS00LjE1aDEuOTRhNS45OTggNS45OTggMCAwIDEtMi44NSA0LjE1WiIgZmlsbD0iIzE2NTJGMCIvPjwvc3ZnPg==`;\n","\"use strict\";\n// Copyright (c) 2018-2021 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2021 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = `data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTciIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE1LjYzNSAyLjExN2EzLjg4OSAzLjg4OSAwIDAgMC01LjUyMSAwTDYuODkgNS4zMzVBMy44OTQgMy44OTQgMCAwIDAgNS44IDguNzM5Yy4wODMuNTA2LjI2OCAxLjAxMS41NTMgMS40NjYuMTUxLjI1My4zMzYuNDcyLjUzNy42OTFsLjYyMS42MjQgMS4xNDEtMS4xNDYtLjYyLS42MjRhMi4xMDUgMi4xMDUgMCAwIDEtLjQ4Ny0uNzQxIDIuMzQgMi4zNCAwIDAgMSAuNTAzLTIuNTFsMy4yMDYtMy4yMmEyLjI5MyAyLjI5MyAwIDAgMSAzLjIzOSAwYy44OS44OTQuODkgMi4zNDMgMCAzLjI1M2wtMS41MjcgMS41MzNjLjIzNC42NC4zMzUgMS4zMzEuMzAyIDIuMDA1bDIuMzgzLTIuMzkyYzEuNTEtMS41MzQgMS40OTMtNC4wMjgtLjAxNy01LjU2MVoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBkPSJNMTEuMjcxIDcuNzQ1YTMuMTMgMy4xMyAwIDAgMC0uNTU0LS42OWwtLjYyLS42MjQtMS4xNDIgMS4xNDYuNjIxLjYyM2MuMjE4LjIyLjM4Ni40ODkuNDg3Ljc1OC4zMzUuODI2LjE2NyAxLjgyLS41MDQgMi40OTRsLTMuMjA1IDMuMjE5YTIuMjkzIDIuMjkzIDAgMCAxLTMuMjQgMCAyLjMxNiAyLjMxNiAwIDAgMSAwLTMuMjUybDEuNTI4LTEuNTM0YTQuODE1IDQuODE1IDAgMCAxLS4yODUtMi4wMDVsLTIuMzgzIDIuMzkzYTMuOTI3IDMuOTI3IDAgMCAwIDAgNS41NDQgMy45MDkgMy45MDkgMCAwIDAgNS41MzggMGwzLjIwNS0zLjIxOWEzLjk1OCAzLjk1OCAwIDAgMCAxLjA5MS0zLjQwNCA0LjIxMSA0LjIxMSAwIDAgMC0uNTM3LTEuNDQ5WiIgZmlsbD0iIzE2NTJGMCIvPjwvc3ZnPg==`;\n","\"use strict\";\n// Copyright (c) 2018-2021 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2021 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = `data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEgN3Y5aDE0VjdIMVptNy41IDQuMzlWMTRoLTF2LTIuNjFjLS40NC0uMTktLjc1LS42My0uNzUtMS4xNGExLjI1IDEuMjUgMCAwIDEgMi41IDBjMCAuNTEtLjMxLjk1LS43NSAxLjE0Wk01LjY3IDZWNC4zM0M1LjY3IDMuMDUgNi43MSAyIDggMnMyLjMzIDEuMDUgMi4zMyAyLjMzVjZoMlY0LjMzQzEyLjMzIDEuOTQgMTAuMzkgMCA4IDBTMy42NyAxLjk0IDMuNjcgNC4zM1Y2aDJaIiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+`;\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ClientMessagePublishEvent = exports.ClientMessageSetSessionConfig = exports.ClientMessageGetSessionConfig = exports.ClientMessageIsLinked = exports.ClientMessageHostSession = void 0;\nfunction ClientMessageHostSession(params) {\n    return Object.assign({ type: \"HostSession\" }, params);\n}\nexports.ClientMessageHostSession = ClientMessageHostSession;\nfunction ClientMessageIsLinked(params) {\n    return Object.assign({ type: \"IsLinked\" }, params);\n}\nexports.ClientMessageIsLinked = ClientMessageIsLinked;\nfunction ClientMessageGetSessionConfig(params) {\n    return Object.assign({ type: \"GetSessionConfig\" }, params);\n}\nexports.ClientMessageGetSessionConfig = ClientMessageGetSessionConfig;\nfunction ClientMessageSetSessionConfig(params) {\n    return Object.assign({ type: \"SetSessionConfig\" }, params);\n}\nexports.ClientMessageSetSessionConfig = ClientMessageSetSessionConfig;\nfunction ClientMessagePublishEvent(params) {\n    return Object.assign({ type: \"PublishEvent\" }, params);\n}\nexports.ClientMessagePublishEvent = ClientMessagePublishEvent;\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RxWebSocket = exports.ConnectionState = void 0;\nconst rxjs_1 = require(\"rxjs\");\nconst operators_1 = require(\"rxjs/operators\");\nvar ConnectionState;\n(function (ConnectionState) {\n    ConnectionState[ConnectionState[\"DISCONNECTED\"] = 0] = \"DISCONNECTED\";\n    ConnectionState[ConnectionState[\"CONNECTING\"] = 1] = \"CONNECTING\";\n    ConnectionState[ConnectionState[\"CONNECTED\"] = 2] = \"CONNECTED\";\n})(ConnectionState = exports.ConnectionState || (exports.ConnectionState = {}));\n/**\n * Rx-ified WebSocket\n */\nclass RxWebSocket {\n    /**\n     * Constructor\n     * @param url WebSocket server URL\n     * @param [WebSocketClass] Custom WebSocket implementation\n     */\n    constructor(url, WebSocketClass = WebSocket) {\n        this.WebSocketClass = WebSocketClass;\n        this.webSocket = null;\n        this.connectionStateSubject = new rxjs_1.BehaviorSubject(ConnectionState.DISCONNECTED);\n        this.incomingDataSubject = new rxjs_1.Subject();\n        this.url = url.replace(/^http/, \"ws\");\n    }\n    /**\n     * Make a websocket connection\n     * @returns an Observable that completes when connected\n     */\n    connect() {\n        if (this.webSocket) {\n            return (0, rxjs_1.throwError)(new Error(\"webSocket object is not null\"));\n        }\n        return new rxjs_1.Observable(obs => {\n            let webSocket;\n            try {\n                this.webSocket = webSocket = new this.WebSocketClass(this.url);\n            }\n            catch (err) {\n                obs.error(err);\n                return;\n            }\n            this.connectionStateSubject.next(ConnectionState.CONNECTING);\n            webSocket.onclose = evt => {\n                this.clearWebSocket();\n                obs.error(new Error(`websocket error ${evt.code}: ${evt.reason}`));\n                this.connectionStateSubject.next(ConnectionState.DISCONNECTED);\n            };\n            webSocket.onopen = _ => {\n                obs.next();\n                obs.complete();\n                this.connectionStateSubject.next(ConnectionState.CONNECTED);\n            };\n            webSocket.onmessage = evt => {\n                this.incomingDataSubject.next(evt.data);\n            };\n        }).pipe((0, operators_1.take)(1));\n    }\n    /**\n     * Disconnect from server\n     */\n    disconnect() {\n        const { webSocket } = this;\n        if (!webSocket) {\n            return;\n        }\n        this.clearWebSocket();\n        this.connectionStateSubject.next(ConnectionState.DISCONNECTED);\n        try {\n            webSocket.close();\n        }\n        catch (_a) { }\n    }\n    /**\n     * Emit current connection state and subsequent changes\n     * @returns an Observable for the connection state\n     */\n    get connectionState$() {\n        return this.connectionStateSubject.asObservable();\n    }\n    /**\n     * Emit incoming data from server\n     * @returns an Observable for the data received\n     */\n    get incomingData$() {\n        return this.incomingDataSubject.asObservable();\n    }\n    /**\n     * Emit incoming JSON data from server. non-JSON data are ignored\n     * @returns an Observable for parsed JSON data\n     */\n    get incomingJSONData$() {\n        return this.incomingData$.pipe((0, operators_1.flatMap)(m => {\n            let j;\n            try {\n                j = JSON.parse(m);\n            }\n            catch (err) {\n                return (0, rxjs_1.empty)();\n            }\n            return (0, rxjs_1.of)(j);\n        }));\n    }\n    /**\n     * Send data to server\n     * @param data text to send\n     */\n    sendData(data) {\n        const { webSocket } = this;\n        if (!webSocket) {\n            throw new Error(\"websocket is not connected\");\n        }\n        webSocket.send(data);\n    }\n    clearWebSocket() {\n        const { webSocket } = this;\n        if (!webSocket) {\n            return;\n        }\n        this.webSocket = null;\n        webSocket.onclose = null;\n        webSocket.onerror = null;\n        webSocket.onmessage = null;\n        webSocket.onopen = null;\n    }\n}\nexports.RxWebSocket = RxWebSocket;\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isServerMessageFail = void 0;\nfunction isServerMessageFail(msg) {\n    return (msg &&\n        msg.type === \"Fail\" &&\n        typeof msg.id === \"number\" &&\n        typeof msg.sessionId === \"string\" &&\n        typeof msg.error === \"string\");\n}\nexports.isServerMessageFail = isServerMessageFail;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WalletLinkAnalytics = void 0;\nclass WalletLinkAnalytics {\n    sendEvent(_eventType, _eventProperties) {\n        // no-op\n    }\n}\nexports.WalletLinkAnalytics = WalletLinkAnalytics;\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WalletLinkConnection = void 0;\nconst rxjs_1 = require(\"rxjs\");\nconst operators_1 = require(\"rxjs/operators\");\nconst init_1 = require(\"../init\");\nconst Session_1 = require(\"../relay/Session\");\nconst types_1 = require(\"../types\");\nconst ClientMessage_1 = require(\"./ClientMessage\");\nconst RxWebSocket_1 = require(\"./RxWebSocket\");\nconst ServerMessage_1 = require(\"./ServerMessage\");\nconst HEARTBEAT_INTERVAL = 10000;\nconst REQUEST_TIMEOUT = 60000;\n/**\n * WalletLink Connection\n */\nclass WalletLinkConnection {\n    /**\n     * Constructor\n     * @param sessionId Session ID\n     * @param sessionKey Session Key\n     * @param serverUrl Walletlinkd RPC URL\n     * @param [WebSocketClass] Custom WebSocket implementation\n     */\n    constructor(sessionId, sessionKey, serverUrl, walletLinkAnalytics, WebSocketClass = WebSocket) {\n        this.sessionId = sessionId;\n        this.sessionKey = sessionKey;\n        this.subscriptions = new rxjs_1.Subscription();\n        this.destroyed = false;\n        this.lastHeartbeatResponse = 0;\n        this.nextReqId = (0, types_1.IntNumber)(1);\n        this.connectedSubject = new rxjs_1.BehaviorSubject(false);\n        this.linkedSubject = new rxjs_1.BehaviorSubject(false);\n        this.sessionConfigSubject = new rxjs_1.ReplaySubject(1);\n        const ws = new RxWebSocket_1.RxWebSocket(serverUrl + \"/rpc\", WebSocketClass);\n        this.ws = ws;\n        this.walletLinkAnalytics = walletLinkAnalytics;\n        // attempt to reconnect every 5 seconds when disconnected\n        this.subscriptions.add(ws.connectionState$\n            .pipe((0, operators_1.tap)(state => this.walletLinkAnalytics.sendEvent(init_1.EVENTS.CONNECTED_STATE_CHANGE, {\n            state,\n            sessionIdHash: Session_1.Session.hash(sessionId)\n        })), \n        // ignore initial DISCONNECTED state\n        (0, operators_1.skip)(1), \n        // if DISCONNECTED and not destroyed\n        (0, operators_1.filter)(cs => cs === RxWebSocket_1.ConnectionState.DISCONNECTED && !this.destroyed), \n        // wait 5 seconds\n        (0, operators_1.delay)(5000), \n        // check whether it's destroyed again\n        (0, operators_1.filter)(_ => !this.destroyed), \n        // reconnect\n        (0, operators_1.flatMap)(_ => ws.connect()), (0, operators_1.retry)())\n            .subscribe());\n        // perform authentication upon connection\n        this.subscriptions.add(ws.connectionState$\n            .pipe(\n        // ignore initial DISCONNECTED and CONNECTING states\n        (0, operators_1.skip)(2), (0, operators_1.switchMap)(cs => (0, rxjs_1.iif)(() => cs === RxWebSocket_1.ConnectionState.CONNECTED, \n        // if CONNECTED, authenticate, and then check link status\n        this.authenticate().pipe((0, operators_1.tap)(_ => this.sendIsLinked()), (0, operators_1.tap)(_ => this.sendGetSessionConfig()), (0, operators_1.map)(_ => true)), \n        // if not CONNECTED, emit false immediately\n        (0, rxjs_1.of)(false))), (0, operators_1.distinctUntilChanged)(), (0, operators_1.catchError)(_ => (0, rxjs_1.of)(false)))\n            .subscribe(connected => this.connectedSubject.next(connected)));\n        // send heartbeat every n seconds while connected\n        this.subscriptions.add(ws.connectionState$\n            .pipe(\n        // ignore initial DISCONNECTED state\n        (0, operators_1.skip)(1), (0, operators_1.switchMap)(cs => (0, rxjs_1.iif)(() => cs === RxWebSocket_1.ConnectionState.CONNECTED, \n        // if CONNECTED, start the heartbeat timer\n        (0, rxjs_1.timer)(0, HEARTBEAT_INTERVAL))))\n            .subscribe(i => \n        // first timer event updates lastHeartbeat timestamp\n        // subsequent calls send heartbeat message\n        i === 0 ? this.updateLastHeartbeat() : this.heartbeat()));\n        // handle server's heartbeat responses\n        this.subscriptions.add(ws.incomingData$\n            .pipe((0, operators_1.filter)(m => m === \"h\"))\n            .subscribe(_ => this.updateLastHeartbeat()));\n        // handle link status updates\n        this.subscriptions.add(ws.incomingJSONData$\n            .pipe((0, operators_1.filter)(m => [\"IsLinkedOK\", \"Linked\"].includes(m.type)))\n            .subscribe(m => {\n            const msg = m;\n            this.walletLinkAnalytics.sendEvent(init_1.EVENTS.LINKED, {\n                sessionIdHash: Session_1.Session.hash(sessionId),\n                linked: msg.linked,\n                type: m.type,\n                onlineGuests: msg.onlineGuests\n            });\n            this.linkedSubject.next(msg.linked || msg.onlineGuests > 0);\n        }));\n        // handle session config updates\n        this.subscriptions.add(ws.incomingJSONData$\n            .pipe((0, operators_1.filter)(m => [\"GetSessionConfigOK\", \"SessionConfigUpdated\"].includes(m.type)))\n            .subscribe(m => {\n            const msg = m;\n            this.walletLinkAnalytics.sendEvent(init_1.EVENTS.SESSION_CONFIG_RECEIVED, {\n                sessionIdHash: Session_1.Session.hash(sessionId),\n                metadata_keys: msg && msg.metadata ? Object.keys(msg.metadata) : undefined\n            });\n            this.sessionConfigSubject.next({\n                webhookId: msg.webhookId,\n                webhookUrl: msg.webhookUrl,\n                metadata: msg.metadata\n            });\n        }));\n    }\n    /**\n     * Make a connection to the server\n     */\n    connect() {\n        if (this.destroyed) {\n            throw new Error(\"instance is destroyed\");\n        }\n        this.walletLinkAnalytics.sendEvent(init_1.EVENTS.STARTED_CONNECTING, {\n            sessionIdHash: Session_1.Session.hash(this.sessionId)\n        });\n        this.ws.connect().subscribe();\n    }\n    /**\n     * Terminate connection, and mark as destroyed. To reconnect, create a new\n     * instance of WalletLinkConnection\n     */\n    destroy() {\n        this.subscriptions.unsubscribe();\n        this.ws.disconnect();\n        this.walletLinkAnalytics.sendEvent(init_1.EVENTS.DISCONNECTED, {\n            sessionIdHash: Session_1.Session.hash(this.sessionId)\n        });\n        this.destroyed = true;\n    }\n    get isDestroyed() {\n        return this.destroyed;\n    }\n    /**\n     * Emit true if connected and authenticated, else false\n     * @returns an Observable\n     */\n    get connected$() {\n        return this.connectedSubject.asObservable();\n    }\n    /**\n     * Emit once connected\n     * @returns an Observable\n     */\n    get onceConnected$() {\n        return this.connected$.pipe((0, operators_1.filter)(v => v), (0, operators_1.take)(1), (0, operators_1.map)(() => void 0));\n    }\n    /**\n     * Emit true if linked (a guest has joined before)\n     * @returns an Observable\n     */\n    get linked$() {\n        return this.linkedSubject.asObservable();\n    }\n    /**\n     * Emit once when linked\n     * @returns an Observable\n     */\n    get onceLinked$() {\n        return this.linked$.pipe((0, operators_1.filter)(v => v), (0, operators_1.take)(1), (0, operators_1.map)(() => void 0));\n    }\n    /**\n     * Emit current session config if available, and subsequent updates\n     * @returns an Observable for the session config\n     */\n    get sessionConfig$() {\n        return this.sessionConfigSubject.asObservable();\n    }\n    /**\n     * Emit incoming Event messages\n     * @returns an Observable for the messages\n     */\n    get incomingEvent$() {\n        return this.ws.incomingJSONData$.pipe((0, operators_1.filter)(m => {\n            if (m.type !== \"Event\") {\n                return false;\n            }\n            const sme = m;\n            return (typeof sme.sessionId === \"string\" &&\n                typeof sme.eventId === \"string\" &&\n                typeof sme.event === \"string\" &&\n                typeof sme.data === \"string\");\n        }), (0, operators_1.map)(m => m));\n    }\n    /**\n     * Set session metadata in SessionConfig object\n     * @param key\n     * @param value\n     * @returns an Observable that completes when successful\n     */\n    setSessionMetadata(key, value) {\n        const message = (0, ClientMessage_1.ClientMessageSetSessionConfig)({\n            id: (0, types_1.IntNumber)(this.nextReqId++),\n            sessionId: this.sessionId,\n            metadata: { [key]: value }\n        });\n        return this.onceConnected$.pipe((0, operators_1.flatMap)(_ => this.makeRequest(message)), (0, operators_1.map)(res => {\n            if ((0, ServerMessage_1.isServerMessageFail)(res)) {\n                throw new Error(res.error || \"failed to set session metadata\");\n            }\n        }));\n    }\n    /**\n     * Publish an event and emit event ID when successful\n     * @param event event name\n     * @param data event data\n     * @param callWebhook whether the webhook should be invoked\n     * @returns an Observable that emits event ID when successful\n     */\n    publishEvent(event, data, callWebhook = false) {\n        const message = (0, ClientMessage_1.ClientMessagePublishEvent)({\n            id: (0, types_1.IntNumber)(this.nextReqId++),\n            sessionId: this.sessionId,\n            event,\n            data,\n            callWebhook\n        });\n        return this.onceLinked$.pipe((0, operators_1.flatMap)(_ => this.makeRequest(message)), (0, operators_1.map)(res => {\n            if ((0, ServerMessage_1.isServerMessageFail)(res)) {\n                throw new Error(res.error || \"failed to publish event\");\n            }\n            return res.eventId;\n        }));\n    }\n    sendData(message) {\n        this.ws.sendData(JSON.stringify(message));\n    }\n    updateLastHeartbeat() {\n        this.lastHeartbeatResponse = Date.now();\n    }\n    heartbeat() {\n        if (Date.now() - this.lastHeartbeatResponse > HEARTBEAT_INTERVAL * 2) {\n            this.ws.disconnect();\n            return;\n        }\n        try {\n            this.ws.sendData(\"h\");\n        }\n        catch (_a) { }\n    }\n    makeRequest(message, timeout = REQUEST_TIMEOUT) {\n        const reqId = message.id;\n        try {\n            this.sendData(message);\n        }\n        catch (err) {\n            return (0, rxjs_1.throwError)(err);\n        }\n        // await server message with corresponding id\n        return this.ws.incomingJSONData$.pipe((0, operators_1.timeoutWith)(timeout, (0, rxjs_1.throwError)(new Error(`request ${reqId} timed out`))), (0, operators_1.filter)(m => m.id === reqId), (0, operators_1.take)(1));\n    }\n    authenticate() {\n        const msg = (0, ClientMessage_1.ClientMessageHostSession)({\n            id: (0, types_1.IntNumber)(this.nextReqId++),\n            sessionId: this.sessionId,\n            sessionKey: this.sessionKey\n        });\n        return this.makeRequest(msg).pipe((0, operators_1.map)(res => {\n            if ((0, ServerMessage_1.isServerMessageFail)(res)) {\n                throw new Error(res.error || \"failed to authentcate\");\n            }\n        }));\n    }\n    sendIsLinked() {\n        const msg = (0, ClientMessage_1.ClientMessageIsLinked)({\n            id: (0, types_1.IntNumber)(this.nextReqId++),\n            sessionId: this.sessionId\n        });\n        this.sendData(msg);\n    }\n    sendGetSessionConfig() {\n        const msg = (0, ClientMessage_1.ClientMessageGetSessionConfig)({\n            id: (0, types_1.IntNumber)(this.nextReqId++),\n            sessionId: this.sessionId\n        });\n        this.sendData(msg);\n    }\n}\nexports.WalletLinkConnection = WalletLinkConnection;\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WalletLink = exports.WalletLinkProvider = void 0;\nconst WalletLinkProvider_1 = require(\"./provider/WalletLinkProvider\");\nconst WalletLink_1 = require(\"./WalletLink\");\nvar WalletLinkProvider_2 = require(\"./provider/WalletLinkProvider\");\nObject.defineProperty(exports, \"WalletLinkProvider\", { enumerable: true, get: function () { return WalletLinkProvider_2.WalletLinkProvider; } });\nvar WalletLink_2 = require(\"./WalletLink\");\nObject.defineProperty(exports, \"WalletLink\", { enumerable: true, get: function () { return WalletLink_2.WalletLink; } });\nexports.default = WalletLink_1.WalletLink;\nif (typeof window !== \"undefined\") {\n    window.WalletLink = WalletLink_1.WalletLink;\n    window.WalletLinkProvider = WalletLinkProvider_1.WalletLinkProvider;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WalletLinkAnalyticsAbstract = void 0;\n/**\n * An abstract class used to send events to track metrics / analytics\n */\nclass WalletLinkAnalyticsAbstract {\n}\nexports.WalletLinkAnalyticsAbstract = WalletLinkAnalyticsAbstract;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EVENTS = void 0;\nexports.EVENTS = {\n    REQUEST_CHILD_ETHEREUM_ACCOUNTS_START: \"walletlink_sdk.request_child_ethereum_accounts.start\",\n    REQUEST_CHILD_ETHEREUM_ACCOUNTS_RESPONSE: \"walletlink_sdk.request_child_ethereum_accounts.response\",\n    STARTED_CONNECTING: \"walletlink_sdk.started.connecting\",\n    CONNECTED_STATE_CHANGE: \"walletlink_sdk.connected\",\n    DISCONNECTED: \"walletlink_sdk.disconnected\",\n    METADATA_DESTROYED: \"walletlink_sdk_metadata_destroyed\",\n    LINKED: \"walletlink_sdk.linked\",\n    FAILURE: \"walletlink_sdk.generic_failure\",\n    SESSION_CONFIG_RECEIVED: \"walletlink_sdk.session_config_event_received\",\n    ETH_ACCOUNTS_STATE: \"walletlink_sdk.eth_accounts_state\",\n    SESSION_STATE_CHANGE: \"walletlink_sdk.session_state_change\",\n    UNLINKED_ERROR_STATE: \"walletlink_sdk.unlinked_error_state\",\n    SKIPPED_CLEARING_SESSION: \"walletlink_sdk.skipped_clearing_session\",\n    GENERAL_ERROR: \"walletlink_sdk.general_error\",\n    WEB3_REQUEST: \"walletlink_sdk.web3.request\",\n    WEB3_REQUEST_PUBLISHED: \"walletlink_sdk.web3.request_published\",\n    WEB3_RESPONSE: \"walletlink_sdk.web3.response\",\n    UNKNOWN_ADDRESS_ENCOUNTERED: \"walletlink_sdk.unknown_address_encountered\"\n};\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./events\"), exports);\n__exportStar(require(\"./WalletLinkAnalyticsAbstract\"), exports);\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ScopedLocalStorage = void 0;\nclass ScopedLocalStorage {\n    constructor(scope) {\n        this.scope = scope;\n    }\n    setItem(key, value) {\n        localStorage.setItem(this.scopedKey(key), value);\n    }\n    getItem(key) {\n        return localStorage.getItem(this.scopedKey(key));\n    }\n    removeItem(key) {\n        localStorage.removeItem(this.scopedKey(key));\n    }\n    clear() {\n        const prefix = this.scopedKey(\"\");\n        const keysToRemove = [];\n        for (let i = 0; i < localStorage.length; i++) {\n            const key = localStorage.key(i);\n            if (typeof key === \"string\" && key.startsWith(prefix)) {\n                keysToRemove.push(key);\n            }\n        }\n        keysToRemove.forEach(key => localStorage.removeItem(key));\n    }\n    scopedKey(key) {\n        return `${this.scope}:${key}`;\n    }\n}\nexports.ScopedLocalStorage = ScopedLocalStorage;\n","\"use strict\";\n// Copyright (c) 2018-2021 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2021 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = `@namespace svg \"http://www.w3.org/2000/svg\";.-walletlink-css-reset,.-walletlink-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:transparent;background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;bottom:auto;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;content:normal;counter-increment:none;counter-reset:none;cursor:auto;direction:ltr;display:block;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",\"Helvetica Neue\",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;left:auto;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;max-height:none;max-width:none;min-height:0;min-width:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:\"\\\\201C\" \"\\\\201D\" \"\\\\2018\" \"\\\\2019\";right:auto;tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;top:auto;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;width:auto;word-spacing:normal;z-index:auto}.-walletlink-css-reset *{box-sizing:border-box;display:initial;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",\"Helvetica Neue\",Arial,sans-serif;line-height:1}.-walletlink-css-reset [class*=container]{margin:0;padding:0}.-walletlink-css-reset style{display:none}`;\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.injectCssReset = void 0;\nconst cssReset_css_1 = __importDefault(require(\"./cssReset-css\"));\nfunction injectCssReset() {\n    const styleEl = document.createElement(\"style\");\n    styleEl.type = \"text/css\";\n    styleEl.appendChild(document.createTextNode(cssReset_css_1.default));\n    document.documentElement.appendChild(styleEl);\n}\nexports.injectCssReset = injectCssReset;\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.filterFromParam = exports.FilterPolyfill = void 0;\nconst types_1 = require(\"../types\");\nconst util_1 = require(\"../util\");\nconst TIMEOUT = 5 * 60 * 1000; // 5 minutes\nconst JSONRPC_TEMPLATE = {\n    jsonrpc: \"2.0\",\n    id: 0\n};\nclass FilterPolyfill {\n    constructor(provider) {\n        this.logFilters = new Map(); // <id, filter>\n        this.blockFilters = new Set(); // <id>\n        this.pendingTransactionFilters = new Set(); // <id, true>\n        this.cursors = new Map(); // <id, cursor>\n        this.timeouts = new Map(); // <id, setTimeout id>\n        this.nextFilterId = (0, types_1.IntNumber)(1);\n        this.provider = provider;\n    }\n    async newFilter(param) {\n        const filter = filterFromParam(param);\n        const id = this.makeFilterId();\n        const cursor = await this.setInitialCursorPosition(id, filter.fromBlock);\n        console.log(`Installing new log filter(${id}):`, filter, \"initial cursor position:\", cursor);\n        this.logFilters.set(id, filter);\n        this.setFilterTimeout(id);\n        return (0, util_1.hexStringFromIntNumber)(id);\n    }\n    async newBlockFilter() {\n        const id = this.makeFilterId();\n        const cursor = await this.setInitialCursorPosition(id, \"latest\");\n        console.log(`Installing new block filter (${id}) with initial cursor position:`, cursor);\n        this.blockFilters.add(id);\n        this.setFilterTimeout(id);\n        return (0, util_1.hexStringFromIntNumber)(id);\n    }\n    async newPendingTransactionFilter() {\n        const id = this.makeFilterId();\n        const cursor = await this.setInitialCursorPosition(id, \"latest\");\n        console.log(`Installing new block filter (${id}) with initial cursor position:`, cursor);\n        this.pendingTransactionFilters.add(id);\n        this.setFilterTimeout(id);\n        return (0, util_1.hexStringFromIntNumber)(id);\n    }\n    uninstallFilter(filterId) {\n        const id = (0, util_1.intNumberFromHexString)(filterId);\n        console.log(`Uninstalling filter (${id})`);\n        this.deleteFilter(id);\n        return true;\n    }\n    getFilterChanges(filterId) {\n        const id = (0, util_1.intNumberFromHexString)(filterId);\n        if (this.timeouts.has(id)) {\n            // extend timeout\n            this.setFilterTimeout(id);\n        }\n        if (this.logFilters.has(id)) {\n            return this.getLogFilterChanges(id);\n        }\n        else if (this.blockFilters.has(id)) {\n            return this.getBlockFilterChanges(id);\n        }\n        else if (this.pendingTransactionFilters.has(id)) {\n            return this.getPendingTransactionFilterChanges(id);\n        }\n        return Promise.resolve(filterNotFoundError());\n    }\n    async getFilterLogs(filterId) {\n        const id = (0, util_1.intNumberFromHexString)(filterId);\n        const filter = this.logFilters.get(id);\n        if (!filter) {\n            return filterNotFoundError();\n        }\n        return this.sendAsyncPromise(Object.assign(Object.assign({}, JSONRPC_TEMPLATE), { method: \"eth_getLogs\", params: [paramFromFilter(filter)] }));\n    }\n    makeFilterId() {\n        return (0, types_1.IntNumber)(++this.nextFilterId);\n    }\n    sendAsyncPromise(request) {\n        return new Promise((resolve, reject) => {\n            this.provider.sendAsync(request, (err, response) => {\n                if (err) {\n                    return reject(err);\n                }\n                if (Array.isArray(response) || response == null) {\n                    return reject(new Error(`unexpected response received: ${JSON.stringify(response)}`));\n                }\n                resolve(response);\n            });\n        });\n    }\n    deleteFilter(id) {\n        console.log(`Deleting filter (${id})`);\n        this.logFilters.delete(id);\n        this.blockFilters.delete(id);\n        this.pendingTransactionFilters.delete(id);\n        this.cursors.delete(id);\n        this.timeouts.delete(id);\n    }\n    async getLogFilterChanges(id) {\n        const filter = this.logFilters.get(id);\n        const cursorPosition = this.cursors.get(id);\n        if (!cursorPosition || !filter) {\n            return filterNotFoundError();\n        }\n        const currentBlockHeight = await this.getCurrentBlockHeight();\n        const toBlock = filter.toBlock === \"latest\" ? currentBlockHeight : filter.toBlock;\n        if (cursorPosition > currentBlockHeight) {\n            return emptyResult();\n        }\n        if (cursorPosition > filter.toBlock) {\n            return emptyResult();\n        }\n        console.log(`Fetching logs from ${cursorPosition} to ${toBlock} for filter ${id}`);\n        const response = await this.sendAsyncPromise(Object.assign(Object.assign({}, JSONRPC_TEMPLATE), { method: \"eth_getLogs\", params: [\n                paramFromFilter(Object.assign(Object.assign({}, filter), { fromBlock: cursorPosition, toBlock }))\n            ] }));\n        if (Array.isArray(response.result)) {\n            const blocks = response.result.map(log => (0, util_1.intNumberFromHexString)(log.blockNumber || \"0x0\"));\n            const highestBlock = Math.max(...blocks);\n            if (highestBlock && highestBlock > cursorPosition) {\n                const newCursorPosition = (0, types_1.IntNumber)(highestBlock + 1);\n                console.log(`Moving cursor position for filter (${id}) from ${cursorPosition} to ${newCursorPosition}`);\n                this.cursors.set(id, newCursorPosition);\n            }\n        }\n        return response;\n    }\n    async getBlockFilterChanges(id) {\n        const cursorPosition = this.cursors.get(id);\n        if (!cursorPosition) {\n            return filterNotFoundError();\n        }\n        const currentBlockHeight = await this.getCurrentBlockHeight();\n        if (cursorPosition > currentBlockHeight) {\n            return emptyResult();\n        }\n        console.log(`Fetching blocks from ${cursorPosition} to ${currentBlockHeight} for filter (${id})`);\n        const blocks = (await Promise.all(\n        // eslint-disable-next-line @typescript-eslint/restrict-plus-operands\n        (0, util_1.range)(cursorPosition, currentBlockHeight + 1).map(i => this.getBlockHashByNumber((0, types_1.IntNumber)(i))))).filter(hash => !!hash);\n        // eslint-disable-next-line @typescript-eslint/restrict-plus-operands\n        const newCursorPosition = (0, types_1.IntNumber)(cursorPosition + blocks.length);\n        console.log(`Moving cursor position for filter (${id}) from ${cursorPosition} to ${newCursorPosition}`);\n        this.cursors.set(id, newCursorPosition);\n        return Object.assign(Object.assign({}, JSONRPC_TEMPLATE), { result: blocks });\n    }\n    async getPendingTransactionFilterChanges(_id) {\n        // pending transaction filters are not supported\n        return Promise.resolve(emptyResult());\n    }\n    async setInitialCursorPosition(id, startBlock) {\n        const currentBlockHeight = await this.getCurrentBlockHeight();\n        const initialCursorPosition = typeof startBlock === \"number\" && startBlock > currentBlockHeight\n            ? startBlock\n            : currentBlockHeight;\n        this.cursors.set(id, initialCursorPosition);\n        return initialCursorPosition;\n    }\n    setFilterTimeout(id) {\n        const existing = this.timeouts.get(id);\n        if (existing) {\n            window.clearTimeout(existing);\n        }\n        const timeout = window.setTimeout(() => {\n            console.log(`Filter (${id}) timed out`);\n            this.deleteFilter(id);\n        }, TIMEOUT);\n        this.timeouts.set(id, timeout);\n    }\n    async getCurrentBlockHeight() {\n        const { result } = await this.sendAsyncPromise(Object.assign(Object.assign({}, JSONRPC_TEMPLATE), { method: \"eth_blockNumber\", params: [] }));\n        return (0, util_1.intNumberFromHexString)((0, util_1.ensureHexString)(result));\n    }\n    async getBlockHashByNumber(blockNumber) {\n        const response = await this.sendAsyncPromise(Object.assign(Object.assign({}, JSONRPC_TEMPLATE), { method: \"eth_getBlockByNumber\", params: [(0, util_1.hexStringFromIntNumber)(blockNumber), false] }));\n        if (response.result && typeof response.result.hash === \"string\") {\n            return (0, util_1.ensureHexString)(response.result.hash);\n        }\n        return null;\n    }\n}\nexports.FilterPolyfill = FilterPolyfill;\nfunction filterFromParam(param) {\n    return {\n        fromBlock: intBlockHeightFromHexBlockHeight(param.fromBlock),\n        toBlock: intBlockHeightFromHexBlockHeight(param.toBlock),\n        addresses: param.address === undefined\n            ? null\n            : Array.isArray(param.address)\n                ? param.address\n                : [param.address],\n        topics: param.topics || []\n    };\n}\nexports.filterFromParam = filterFromParam;\nfunction paramFromFilter(filter) {\n    const param = {\n        fromBlock: hexBlockHeightFromIntBlockHeight(filter.fromBlock),\n        toBlock: hexBlockHeightFromIntBlockHeight(filter.toBlock),\n        topics: filter.topics\n    };\n    if (filter.addresses !== null) {\n        param.address = filter.addresses;\n    }\n    return param;\n}\nfunction intBlockHeightFromHexBlockHeight(value) {\n    if (value === undefined || value === \"latest\" || value === \"pending\") {\n        return \"latest\";\n    }\n    else if (value === \"earliest\") {\n        return (0, types_1.IntNumber)(0);\n    }\n    else if ((0, util_1.isHexString)(value)) {\n        return (0, util_1.intNumberFromHexString)(value);\n    }\n    throw new Error(`Invalid block option: ${String(value)}`);\n}\nfunction hexBlockHeightFromIntBlockHeight(value) {\n    if (value === \"latest\") {\n        return value;\n    }\n    return (0, util_1.hexStringFromIntNumber)(value);\n}\nfunction filterNotFoundError() {\n    return Object.assign(Object.assign({}, JSONRPC_TEMPLATE), { error: { code: -32000, message: \"filter not found\" } });\n}\nfunction emptyResult() {\n    return Object.assign(Object.assign({}, JSONRPC_TEMPLATE), { result: [] });\n}\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.JSONRPCMethod = void 0;\nvar JSONRPCMethod;\n(function (JSONRPCMethod) {\n    // synchronous or asynchronous\n    JSONRPCMethod[\"eth_accounts\"] = \"eth_accounts\";\n    JSONRPCMethod[\"eth_coinbase\"] = \"eth_coinbase\";\n    JSONRPCMethod[\"net_version\"] = \"net_version\";\n    JSONRPCMethod[\"eth_chainId\"] = \"eth_chainId\";\n    JSONRPCMethod[\"eth_uninstallFilter\"] = \"eth_uninstallFilter\";\n    // asynchronous only\n    JSONRPCMethod[\"eth_requestAccounts\"] = \"eth_requestAccounts\";\n    JSONRPCMethod[\"eth_sign\"] = \"eth_sign\";\n    JSONRPCMethod[\"eth_ecRecover\"] = \"eth_ecRecover\";\n    JSONRPCMethod[\"personal_sign\"] = \"personal_sign\";\n    JSONRPCMethod[\"personal_ecRecover\"] = \"personal_ecRecover\";\n    JSONRPCMethod[\"eth_signTransaction\"] = \"eth_signTransaction\";\n    JSONRPCMethod[\"eth_sendRawTransaction\"] = \"eth_sendRawTransaction\";\n    JSONRPCMethod[\"eth_sendTransaction\"] = \"eth_sendTransaction\";\n    JSONRPCMethod[\"eth_signTypedData_v1\"] = \"eth_signTypedData_v1\";\n    JSONRPCMethod[\"eth_signTypedData_v2\"] = \"eth_signTypedData_v2\";\n    JSONRPCMethod[\"eth_signTypedData_v3\"] = \"eth_signTypedData_v3\";\n    JSONRPCMethod[\"eth_signTypedData_v4\"] = \"eth_signTypedData_v4\";\n    JSONRPCMethod[\"eth_signTypedData\"] = \"eth_signTypedData\";\n    JSONRPCMethod[\"walletlink_arbitrary\"] = \"walletlink_arbitrary\";\n    JSONRPCMethod[\"wallet_addEthereumChain\"] = \"wallet_addEthereumChain\";\n    JSONRPCMethod[\"wallet_switchEthereumChain\"] = \"wallet_switchEthereumChain\";\n    JSONRPCMethod[\"wallet_watchAsset\"] = \"wallet_watchAsset\";\n    // asynchronous pub/sub\n    JSONRPCMethod[\"eth_subscribe\"] = \"eth_subscribe\";\n    JSONRPCMethod[\"eth_unsubscribe\"] = \"eth_unsubscribe\";\n    // asynchronous filter methods\n    JSONRPCMethod[\"eth_newFilter\"] = \"eth_newFilter\";\n    JSONRPCMethod[\"eth_newBlockFilter\"] = \"eth_newBlockFilter\";\n    JSONRPCMethod[\"eth_newPendingTransactionFilter\"] = \"eth_newPendingTransactionFilter\";\n    JSONRPCMethod[\"eth_getFilterChanges\"] = \"eth_getFilterChanges\";\n    JSONRPCMethod[\"eth_getFilterLogs\"] = \"eth_getFilterLogs\";\n})(JSONRPCMethod = exports.JSONRPCMethod || (exports.JSONRPCMethod = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SubscriptionManager = void 0;\nconst PollingBlockTracker = require(\"eth-block-tracker\");\nconst createSubscriptionManager = require(\"eth-json-rpc-filters/subscriptionManager\");\nconst noop = () => { };\nclass SubscriptionManager {\n    constructor(provider) {\n        const blockTracker = new PollingBlockTracker({\n            provider,\n            pollingInterval: 15 * 1000,\n            setSkipCacheFlag: true\n        });\n        const { events, middleware } = createSubscriptionManager({\n            blockTracker,\n            provider\n        });\n        this.events = events;\n        this.subscriptionMiddleware = middleware;\n    }\n    async handleRequest(request) {\n        const result = {};\n        await this.subscriptionMiddleware(request, result, noop, noop);\n        return result;\n    }\n    destroy() {\n        this.subscriptionMiddleware.destroy();\n    }\n}\nexports.SubscriptionManager = SubscriptionManager;\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WalletLinkProvider = void 0;\nconst safe_event_emitter_1 = __importDefault(require(\"@metamask/safe-event-emitter\"));\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\nconst eth_rpc_errors_1 = require(\"eth-rpc-errors\");\nconst WalletLinkAnalytics_1 = require(\"../connection/WalletLinkAnalytics\");\nconst init_1 = require(\"../init\");\nconst Session_1 = require(\"../relay/Session\");\nconst WalletLinkRelayAbstract_1 = require(\"../relay/WalletLinkRelayAbstract\");\nconst util_1 = require(\"../util\");\nconst eth_eip712_util_1 = __importDefault(require(\"../vendor-js/eth-eip712-util\"));\nconst FilterPolyfill_1 = require(\"./FilterPolyfill\");\nconst JSONRPC_1 = require(\"./JSONRPC\");\nconst SubscriptionManager_1 = require(\"./SubscriptionManager\");\nconst DEFAULT_CHAIN_ID_KEY = \"DefaultChainId\";\nconst DEFAULT_JSON_RPC_URL = \"DefaultJsonRpcUrl\";\n// Indicates chain has been switched by switchEthereumChain or addEthereumChain request\nconst HAS_CHAIN_BEEN_SWITCHED_KEY = \"HasChainBeenSwitched\";\nconst HAS_CHAIN_OVERRIDDEN_FROM_RELAY = \"HasChainOverriddenFromRelay\";\nclass WalletLinkProvider extends safe_event_emitter_1.default {\n    constructor(options) {\n        var _a;\n        super();\n        this._filterPolyfill = new FilterPolyfill_1.FilterPolyfill(this);\n        this._subscriptionManager = new SubscriptionManager_1.SubscriptionManager(this);\n        this._relay = null;\n        this._addresses = [];\n        this.hasMadeFirstChainChangedEmission = false;\n        this._send = this.send.bind(this);\n        this._sendAsync = this.sendAsync.bind(this);\n        this.setProviderInfo = this.setProviderInfo.bind(this);\n        this.updateProviderInfo = this.updateProviderInfo.bind(this);\n        this.getChainId = this.getChainId.bind(this);\n        this.setAppInfo = this.setAppInfo.bind(this);\n        this.enable = this.enable.bind(this);\n        this.close = this.close.bind(this);\n        this.send = this.send.bind(this);\n        this.sendAsync = this.sendAsync.bind(this);\n        this.request = this.request.bind(this);\n        this._setAddresses = this._setAddresses.bind(this);\n        this.scanQRCode = this.scanQRCode.bind(this);\n        this.genericRequest = this.genericRequest.bind(this);\n        this._jsonRpcUrlFromOpts = options.jsonRpcUrl;\n        this._overrideIsMetaMask = options.overrideIsMetaMask;\n        this._relayProvider = options.relayProvider;\n        this._storage = options.storage;\n        this._relayEventManager = options.relayEventManager;\n        this._walletLinkAnalytics = options.walletLinkAnalytics\n            ? options.walletLinkAnalytics\n            : new WalletLinkAnalytics_1.WalletLinkAnalytics();\n        this.isCoinbaseWallet = (_a = options.overrideIsCoinbaseWallet) !== null && _a !== void 0 ? _a : true;\n        const chainId = this.getChainId();\n        const chainIdStr = (0, util_1.prepend0x)(chainId.toString(16));\n        // indicate that we've connected, for EIP-1193 compliance\n        this.emit(\"connect\", { chainIdStr });\n        const cachedAddresses = this._storage.getItem(WalletLinkRelayAbstract_1.LOCAL_STORAGE_ADDRESSES_KEY);\n        if (cachedAddresses) {\n            const addresses = cachedAddresses.split(\" \");\n            if (addresses[0] !== \"\") {\n                this._addresses = addresses.map(address => (0, util_1.ensureAddressString)(address));\n                this.emit(\"accountsChanged\", addresses);\n            }\n        }\n        this._subscriptionManager.events.on(\"notification\", (notification) => {\n            this.emit(\"message\", {\n                type: notification.method,\n                data: notification.params\n            });\n        });\n        if (this._addresses.length > 0) {\n            void this.initializeRelay();\n        }\n        window.addEventListener(\"message\", event => {\n            var _a;\n            if (event.data.type !== \"walletLinkMessage\")\n                return;\n            if (event.data.data.action === \"defaultChainChanged\") {\n                const _chainId = event.data.data.chainId;\n                const jsonRpcUrl = (_a = event.data.data.jsonRpcUrl) !== null && _a !== void 0 ? _a : this.jsonRpcUrl;\n                this.updateProviderInfo(jsonRpcUrl, Number(_chainId), true);\n            }\n        });\n    }\n    get selectedAddress() {\n        return this._addresses[0] || undefined;\n    }\n    get networkVersion() {\n        return this.getChainId().toString(10);\n    }\n    get chainId() {\n        return (0, util_1.prepend0x)(this.getChainId().toString(16));\n    }\n    get isWalletLink() {\n        return true;\n    }\n    /**\n     * Some DApps (i.e. Alpha Homora) seem to require the window.ethereum object return\n     * true for this method.\n     */\n    get isMetaMask() {\n        return this._overrideIsMetaMask;\n    }\n    get host() {\n        return this.jsonRpcUrl;\n    }\n    get connected() {\n        return true;\n    }\n    isConnected() {\n        return true;\n    }\n    get jsonRpcUrl() {\n        var _a;\n        return ((_a = this._storage.getItem(DEFAULT_JSON_RPC_URL)) !== null && _a !== void 0 ? _a : this._jsonRpcUrlFromOpts);\n    }\n    set jsonRpcUrl(value) {\n        this._storage.setItem(DEFAULT_JSON_RPC_URL, value);\n    }\n    get isChainOverridden() {\n        return this._storage.getItem(HAS_CHAIN_OVERRIDDEN_FROM_RELAY) === \"true\";\n    }\n    set isChainOverridden(value) {\n        this._storage.setItem(HAS_CHAIN_OVERRIDDEN_FROM_RELAY, value.toString());\n    }\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    setProviderInfo(jsonRpcUrl, chainId) {\n        if (this.isChainOverridden)\n            return;\n        this.updateProviderInfo(jsonRpcUrl, this.getChainId(), false);\n    }\n    updateProviderInfo(jsonRpcUrl, chainId, fromRelay) {\n        const hasChainSwitched = this._storage.getItem(HAS_CHAIN_BEEN_SWITCHED_KEY) === \"true\";\n        if (hasChainSwitched && fromRelay)\n            return;\n        if (fromRelay) {\n            this.isChainOverridden = true;\n        }\n        this.jsonRpcUrl = jsonRpcUrl;\n        // emit chainChanged event if necessary\n        const originalChainId = this.getChainId();\n        this._storage.setItem(DEFAULT_CHAIN_ID_KEY, chainId.toString(10));\n        const chainChanged = (0, util_1.ensureIntNumber)(chainId) !== originalChainId;\n        if (chainChanged || !this.hasMadeFirstChainChangedEmission) {\n            this.emit(\"chainChanged\", this.getChainId());\n            this.hasMadeFirstChainChangedEmission = true;\n        }\n    }\n    async watchAsset(type, address, symbol, decimals, image) {\n        const relay = await this.initializeRelay();\n        const result = await relay.watchAsset(type, address, symbol, decimals, image).promise;\n        return !!result.result;\n    }\n    async addEthereumChain(chainId, rpcUrls, blockExplorerUrls, chainName, iconUrls, nativeCurrency) {\n        var _a, _b;\n        if ((0, util_1.ensureIntNumber)(chainId) === this.getChainId()) {\n            return false;\n        }\n        const relay = await this.initializeRelay();\n        const res = await relay.addEthereumChain(chainId.toString(), rpcUrls, iconUrls, blockExplorerUrls, chainName, nativeCurrency).promise;\n        if (((_a = res.result) === null || _a === void 0 ? void 0 : _a.isApproved) === true) {\n            this._storage.setItem(HAS_CHAIN_BEEN_SWITCHED_KEY, \"true\");\n            this.updateProviderInfo(rpcUrls[0], chainId, false);\n        }\n        return ((_b = res.result) === null || _b === void 0 ? void 0 : _b.isApproved) === true;\n    }\n    async switchEthereumChain(chainId) {\n        if ((0, util_1.ensureIntNumber)(chainId) === this.getChainId()) {\n            return;\n        }\n        const relay = await this.initializeRelay();\n        const res = await relay.switchEthereumChain(chainId.toString(10)).promise;\n        if (res.errorCode) {\n            throw eth_rpc_errors_1.ethErrors.provider.custom({\n                code: res.errorCode\n            });\n        }\n        const switchResponse = res.result;\n        if (switchResponse.isApproved && switchResponse.rpcUrl.length > 0) {\n            this._storage.setItem(HAS_CHAIN_BEEN_SWITCHED_KEY, \"true\");\n            this.updateProviderInfo(switchResponse.rpcUrl, chainId, false);\n        }\n    }\n    setAppInfo(appName, appLogoUrl) {\n        void this.initializeRelay().then(relay => relay.setAppInfo(appName, appLogoUrl));\n    }\n    async enable() {\n        this._walletLinkAnalytics.sendEvent(init_1.EVENTS.ETH_ACCOUNTS_STATE, {\n            method: \"provider::enable\",\n            addresses_length: this._addresses.length,\n            sessionIdHash: this._relay ? Session_1.Session.hash(this._relay.session.id) : null\n        });\n        if (this._addresses.length > 0) {\n            return [...this._addresses];\n        }\n        return await this._send(JSONRPC_1.JSONRPCMethod.eth_requestAccounts);\n    }\n    close() {\n        void this.initializeRelay().then(relay => relay.resetAndReload());\n    }\n    send(requestOrMethod, callbackOrParams) {\n        // send<T>(method, params): Promise<T>\n        if (typeof requestOrMethod === \"string\") {\n            const method = requestOrMethod;\n            const params = Array.isArray(callbackOrParams)\n                ? callbackOrParams\n                : callbackOrParams !== undefined\n                    ? [callbackOrParams]\n                    : [];\n            const request = {\n                jsonrpc: \"2.0\",\n                id: 0,\n                method,\n                params\n            };\n            return this._sendRequestAsync(request).then(res => res.result);\n        }\n        // send(JSONRPCRequest | JSONRPCRequest[], callback): void\n        if (typeof callbackOrParams === \"function\") {\n            const request = requestOrMethod;\n            const callback = callbackOrParams;\n            return this._sendAsync(request, callback);\n        }\n        // send(JSONRPCRequest[]): JSONRPCResponse[]\n        if (Array.isArray(requestOrMethod)) {\n            const requests = requestOrMethod;\n            return requests.map(r => this._sendRequest(r));\n        }\n        // send(JSONRPCRequest): JSONRPCResponse\n        const req = requestOrMethod;\n        return this._sendRequest(req);\n    }\n    sendAsync(request, callback) {\n        if (typeof callback !== \"function\") {\n            throw new Error(\"callback is required\");\n        }\n        // send(JSONRPCRequest[], callback): void\n        if (Array.isArray(request)) {\n            const arrayCb = callback;\n            this._sendMultipleRequestsAsync(request)\n                .then(responses => arrayCb(null, responses))\n                .catch(err => arrayCb(err, null));\n            return;\n        }\n        // send(JSONRPCRequest, callback): void\n        const cb = callback;\n        this._sendRequestAsync(request)\n            .then(response => cb(null, response))\n            .catch(err => cb(err, null));\n    }\n    async request(args) {\n        if (!args || typeof args !== \"object\" || Array.isArray(args)) {\n            throw eth_rpc_errors_1.ethErrors.rpc.invalidRequest({\n                message: \"Expected a single, non-array, object argument.\",\n                data: args\n            });\n        }\n        const { method, params } = args;\n        if (typeof method !== \"string\" || method.length === 0) {\n            throw eth_rpc_errors_1.ethErrors.rpc.invalidRequest({\n                message: \"'args.method' must be a non-empty string.\",\n                data: args\n            });\n        }\n        if (params !== undefined &&\n            !Array.isArray(params) &&\n            (typeof params !== \"object\" || params === null)) {\n            throw eth_rpc_errors_1.ethErrors.rpc.invalidRequest({\n                message: \"'args.params' must be an object or array if provided.\",\n                data: args\n            });\n        }\n        const newParams = params === undefined ? [] : params;\n        // WalletLink Requests\n        const id = this._relayEventManager.makeRequestId();\n        const result = await this._sendRequestAsync({\n            method,\n            params: newParams,\n            jsonrpc: \"2.0\",\n            id\n        });\n        return result.result;\n    }\n    async scanQRCode(match) {\n        const relay = await this.initializeRelay();\n        const res = await relay.scanQRCode((0, util_1.ensureRegExpString)(match)).promise;\n        if (typeof res.result !== \"string\") {\n            throw new Error(\"result was not a string\");\n        }\n        return res.result;\n    }\n    async genericRequest(data, action) {\n        const relay = await this.initializeRelay();\n        const res = await relay.genericRequest(data, action).promise;\n        if (typeof res.result !== \"string\") {\n            throw new Error(\"result was not a string\");\n        }\n        return res.result;\n    }\n    supportsSubscriptions() {\n        return false;\n    }\n    subscribe() {\n        throw new Error(\"Subscriptions are not supported\");\n    }\n    unsubscribe() {\n        throw new Error(\"Subscriptions are not supported\");\n    }\n    disconnect() {\n        return true;\n    }\n    _sendRequest(request) {\n        const response = {\n            jsonrpc: \"2.0\",\n            id: request.id\n        };\n        const { method } = request;\n        response.result = this._handleSynchronousMethods(request);\n        if (response.result === undefined) {\n            throw new Error(`WalletLink does not support calling ${method} synchronously without ` +\n                `a callback. Please provide a callback parameter to call ${method} ` +\n                `asynchronously.`);\n        }\n        return response;\n    }\n    _setAddresses(addresses) {\n        if (!Array.isArray(addresses)) {\n            throw new Error(\"addresses is not an array\");\n        }\n        const newAddresses = addresses.map(address => (0, util_1.ensureAddressString)(address));\n        if (JSON.stringify(newAddresses) === JSON.stringify(this._addresses)) {\n            return;\n        }\n        this._addresses = newAddresses;\n        this.emit(\"accountsChanged\", this._addresses);\n        this._storage.setItem(WalletLinkRelayAbstract_1.LOCAL_STORAGE_ADDRESSES_KEY, newAddresses.join(\" \"));\n        window.dispatchEvent(new CustomEvent(\"walletlink:addresses\", { detail: this._addresses }));\n    }\n    _sendRequestAsync(request) {\n        return new Promise((resolve, reject) => {\n            try {\n                const syncResult = this._handleSynchronousMethods(request);\n                if (syncResult !== undefined) {\n                    return resolve({\n                        jsonrpc: \"2.0\",\n                        id: request.id,\n                        result: syncResult\n                    });\n                }\n                const filterPromise = this._handleAsynchronousFilterMethods(request);\n                if (filterPromise !== undefined) {\n                    filterPromise\n                        .then(res => resolve(Object.assign(Object.assign({}, res), { id: request.id })))\n                        .catch(err => reject(err));\n                    return;\n                }\n                const subscriptionPromise = this._handleSubscriptionMethods(request);\n                if (subscriptionPromise !== undefined) {\n                    subscriptionPromise\n                        .then(res => resolve({\n                        jsonrpc: \"2.0\",\n                        id: request.id,\n                        result: res.result\n                    }))\n                        .catch(err => reject(err));\n                    return;\n                }\n            }\n            catch (err) {\n                return reject(err);\n            }\n            this._handleAsynchronousMethods(request)\n                .then(res => res && resolve(Object.assign(Object.assign({}, res), { id: request.id })))\n                .catch(err => reject(err));\n        });\n    }\n    _sendMultipleRequestsAsync(requests) {\n        return Promise.all(requests.map(r => this._sendRequestAsync(r)));\n    }\n    _handleSynchronousMethods(request) {\n        const { method } = request;\n        const params = request.params || [];\n        switch (method) {\n            case JSONRPC_1.JSONRPCMethod.eth_accounts:\n                return this._eth_accounts();\n            case JSONRPC_1.JSONRPCMethod.eth_coinbase:\n                return this._eth_coinbase();\n            case JSONRPC_1.JSONRPCMethod.eth_uninstallFilter:\n                return this._eth_uninstallFilter(params);\n            case JSONRPC_1.JSONRPCMethod.net_version:\n                return this._net_version();\n            case JSONRPC_1.JSONRPCMethod.eth_chainId:\n                return this._eth_chainId();\n            default:\n                return undefined;\n        }\n    }\n    async _handleAsynchronousMethods(request) {\n        const { method } = request;\n        const params = request.params || [];\n        switch (method) {\n            case JSONRPC_1.JSONRPCMethod.eth_requestAccounts:\n                return this._eth_requestAccounts();\n            case JSONRPC_1.JSONRPCMethod.eth_sign:\n                return this._eth_sign(params);\n            case JSONRPC_1.JSONRPCMethod.eth_ecRecover:\n                return this._eth_ecRecover(params);\n            case JSONRPC_1.JSONRPCMethod.personal_sign:\n                return this._personal_sign(params);\n            case JSONRPC_1.JSONRPCMethod.personal_ecRecover:\n                return this._personal_ecRecover(params);\n            case JSONRPC_1.JSONRPCMethod.eth_signTransaction:\n                return this._eth_signTransaction(params);\n            case JSONRPC_1.JSONRPCMethod.eth_sendRawTransaction:\n                return this._eth_sendRawTransaction(params);\n            case JSONRPC_1.JSONRPCMethod.eth_sendTransaction:\n                return this._eth_sendTransaction(params);\n            case JSONRPC_1.JSONRPCMethod.eth_signTypedData_v1:\n                return this._eth_signTypedData_v1(params);\n            case JSONRPC_1.JSONRPCMethod.eth_signTypedData_v2:\n                return this._throwUnsupportedMethodError();\n            case JSONRPC_1.JSONRPCMethod.eth_signTypedData_v3:\n                return this._eth_signTypedData_v3(params);\n            case JSONRPC_1.JSONRPCMethod.eth_signTypedData_v4:\n            case JSONRPC_1.JSONRPCMethod.eth_signTypedData:\n                return this._eth_signTypedData_v4(params);\n            case JSONRPC_1.JSONRPCMethod.walletlink_arbitrary:\n                return this._walletlink_arbitrary(params);\n            case JSONRPC_1.JSONRPCMethod.wallet_addEthereumChain:\n                return this._wallet_addEthereumChain(params);\n            case JSONRPC_1.JSONRPCMethod.wallet_switchEthereumChain:\n                return this._wallet_switchEthereumChain(params);\n            case JSONRPC_1.JSONRPCMethod.wallet_watchAsset:\n                return this._wallet_watchAsset(params);\n        }\n        const relay = await this.initializeRelay();\n        return relay.makeEthereumJSONRPCRequest(request, this.jsonRpcUrl);\n    }\n    _handleAsynchronousFilterMethods(request) {\n        const { method } = request;\n        const params = request.params || [];\n        switch (method) {\n            case JSONRPC_1.JSONRPCMethod.eth_newFilter:\n                return this._eth_newFilter(params);\n            case JSONRPC_1.JSONRPCMethod.eth_newBlockFilter:\n                return this._eth_newBlockFilter();\n            case JSONRPC_1.JSONRPCMethod.eth_newPendingTransactionFilter:\n                return this._eth_newPendingTransactionFilter();\n            case JSONRPC_1.JSONRPCMethod.eth_getFilterChanges:\n                return this._eth_getFilterChanges(params);\n            case JSONRPC_1.JSONRPCMethod.eth_getFilterLogs:\n                return this._eth_getFilterLogs(params);\n        }\n        return undefined;\n    }\n    _handleSubscriptionMethods(request) {\n        switch (request.method) {\n            case JSONRPC_1.JSONRPCMethod.eth_subscribe:\n            case JSONRPC_1.JSONRPCMethod.eth_unsubscribe:\n                return this._subscriptionManager.handleRequest(request);\n        }\n        return undefined;\n    }\n    _isKnownAddress(addressString) {\n        try {\n            const address = (0, util_1.ensureAddressString)(addressString);\n            const lowercaseAddresses = this._addresses.map(address => (0, util_1.ensureAddressString)(address));\n            return lowercaseAddresses.includes(address);\n        }\n        catch (_a) { }\n        return false;\n    }\n    _ensureKnownAddress(addressString) {\n        if (!this._isKnownAddress(addressString)) {\n            this._walletLinkAnalytics.sendEvent(init_1.EVENTS.UNKNOWN_ADDRESS_ENCOUNTERED);\n            throw new Error(\"Unknown Ethereum address\");\n        }\n    }\n    _prepareTransactionParams(tx) {\n        const fromAddress = tx.from\n            ? (0, util_1.ensureAddressString)(tx.from)\n            : this.selectedAddress;\n        if (!fromAddress) {\n            throw new Error(\"Ethereum address is unavailable\");\n        }\n        this._ensureKnownAddress(fromAddress);\n        const toAddress = tx.to ? (0, util_1.ensureAddressString)(tx.to) : null;\n        const weiValue = tx.value != null ? (0, util_1.ensureBN)(tx.value) : new bn_js_1.default(0);\n        const data = tx.data ? (0, util_1.ensureBuffer)(tx.data) : Buffer.alloc(0);\n        const nonce = tx.nonce != null ? (0, util_1.ensureIntNumber)(tx.nonce) : null;\n        const gasPriceInWei = tx.gasPrice != null ? (0, util_1.ensureBN)(tx.gasPrice) : null;\n        const maxFeePerGas = tx.maxFeePerGas != null ? (0, util_1.ensureBN)(tx.maxFeePerGas) : null;\n        const maxPriorityFeePerGas = tx.maxPriorityFeePerGas != null ? (0, util_1.ensureBN)(tx.maxPriorityFeePerGas) : null;\n        const gasLimit = tx.gas != null ? (0, util_1.ensureBN)(tx.gas) : null;\n        const chainId = this.getChainId();\n        return {\n            fromAddress,\n            toAddress,\n            weiValue,\n            data,\n            nonce,\n            gasPriceInWei,\n            maxFeePerGas,\n            maxPriorityFeePerGas,\n            gasLimit,\n            chainId\n        };\n    }\n    _requireAuthorization() {\n        if (this._addresses.length === 0) {\n            throw eth_rpc_errors_1.ethErrors.provider.unauthorized({});\n        }\n    }\n    _throwUnsupportedMethodError() {\n        throw eth_rpc_errors_1.ethErrors.provider.unsupportedMethod({});\n    }\n    async _signEthereumMessage(message, address, addPrefix, typedDataJson) {\n        this._ensureKnownAddress(address);\n        try {\n            const relay = await this.initializeRelay();\n            const res = await relay.signEthereumMessage(message, address, addPrefix, typedDataJson).promise;\n            return { jsonrpc: \"2.0\", id: 0, result: res.result };\n        }\n        catch (err) {\n            if (typeof err.message === \"string\" &&\n                err.message.match(/(denied|rejected)/i)) {\n                throw eth_rpc_errors_1.ethErrors.provider.userRejectedRequest(\"User denied message signature\");\n            }\n            throw err;\n        }\n    }\n    async _ethereumAddressFromSignedMessage(message, signature, addPrefix) {\n        const relay = await this.initializeRelay();\n        const res = await relay.ethereumAddressFromSignedMessage(message, signature, addPrefix).promise;\n        return { jsonrpc: \"2.0\", id: 0, result: res.result };\n    }\n    _eth_accounts() {\n        return [...this._addresses];\n    }\n    _eth_coinbase() {\n        return this.selectedAddress || null;\n    }\n    _net_version() {\n        return this.getChainId().toString(10);\n    }\n    _eth_chainId() {\n        return (0, util_1.hexStringFromIntNumber)(this.getChainId());\n    }\n    getChainId() {\n        const chainIdStr = this._storage.getItem(DEFAULT_CHAIN_ID_KEY) || \"1\";\n        const chainId = parseInt(chainIdStr, 10);\n        return (0, util_1.ensureIntNumber)(chainId);\n    }\n    async _eth_requestAccounts() {\n        this._walletLinkAnalytics.sendEvent(init_1.EVENTS.ETH_ACCOUNTS_STATE, {\n            method: \"provider::_eth_requestAccounts\",\n            addresses_length: this._addresses.length,\n            sessionIdHash: this._relay ? Session_1.Session.hash(this._relay.session.id) : null\n        });\n        if (this._addresses.length > 0) {\n            return Promise.resolve({\n                jsonrpc: \"2.0\",\n                id: 0,\n                result: this._addresses\n            });\n        }\n        let res;\n        try {\n            const relay = await this.initializeRelay();\n            res = await relay.requestEthereumAccounts().promise;\n        }\n        catch (err) {\n            if (typeof err.message === \"string\" &&\n                err.message.match(/(denied|rejected)/i)) {\n                throw eth_rpc_errors_1.ethErrors.provider.userRejectedRequest(\"User denied account authorization\");\n            }\n            throw err;\n        }\n        if (!res.result) {\n            throw new Error(\"accounts received is empty\");\n        }\n        this._setAddresses(res.result);\n        return { jsonrpc: \"2.0\", id: 0, result: this._addresses };\n    }\n    _eth_sign(params) {\n        this._requireAuthorization();\n        const address = (0, util_1.ensureAddressString)(params[0]);\n        const message = (0, util_1.ensureBuffer)(params[1]);\n        return this._signEthereumMessage(message, address, false);\n    }\n    _eth_ecRecover(params) {\n        const message = (0, util_1.ensureBuffer)(params[0]);\n        const signature = (0, util_1.ensureBuffer)(params[1]);\n        return this._ethereumAddressFromSignedMessage(message, signature, false);\n    }\n    _personal_sign(params) {\n        this._requireAuthorization();\n        const message = (0, util_1.ensureBuffer)(params[0]);\n        const address = (0, util_1.ensureAddressString)(params[1]);\n        return this._signEthereumMessage(message, address, true);\n    }\n    _personal_ecRecover(params) {\n        const message = (0, util_1.ensureBuffer)(params[0]);\n        const signature = (0, util_1.ensureBuffer)(params[1]);\n        return this._ethereumAddressFromSignedMessage(message, signature, true);\n    }\n    async _eth_signTransaction(params) {\n        this._requireAuthorization();\n        const tx = this._prepareTransactionParams(params[0] || {});\n        try {\n            const relay = await this.initializeRelay();\n            const res = await relay.signEthereumTransaction(tx).promise;\n            return { jsonrpc: \"2.0\", id: 0, result: res.result };\n        }\n        catch (err) {\n            if (typeof err.message === \"string\" &&\n                err.message.match(/(denied|rejected)/i)) {\n                throw eth_rpc_errors_1.ethErrors.provider.userRejectedRequest(\"User denied transaction signature\");\n            }\n            throw err;\n        }\n    }\n    async _eth_sendRawTransaction(params) {\n        const signedTransaction = (0, util_1.ensureBuffer)(params[0]);\n        const relay = await this.initializeRelay();\n        const res = await relay.submitEthereumTransaction(signedTransaction, this.getChainId()).promise;\n        return { jsonrpc: \"2.0\", id: 0, result: res.result };\n    }\n    async _eth_sendTransaction(params) {\n        this._requireAuthorization();\n        const tx = this._prepareTransactionParams(params[0] || {});\n        try {\n            const relay = await this.initializeRelay();\n            const res = await relay.signAndSubmitEthereumTransaction(tx).promise;\n            return { jsonrpc: \"2.0\", id: 0, result: res.result };\n        }\n        catch (err) {\n            if (typeof err.message === \"string\" &&\n                err.message.match(/(denied|rejected)/i)) {\n                throw eth_rpc_errors_1.ethErrors.provider.userRejectedRequest(\"User denied transaction signature\");\n            }\n            throw err;\n        }\n    }\n    async _eth_signTypedData_v1(params) {\n        this._requireAuthorization();\n        const typedData = (0, util_1.ensureParsedJSONObject)(params[0]);\n        const address = (0, util_1.ensureAddressString)(params[1]);\n        this._ensureKnownAddress(address);\n        const message = eth_eip712_util_1.default.hashForSignTypedDataLegacy({ data: typedData });\n        const typedDataJSON = JSON.stringify(typedData, null, 2);\n        return this._signEthereumMessage(message, address, false, typedDataJSON);\n    }\n    async _eth_signTypedData_v3(params) {\n        this._requireAuthorization();\n        const address = (0, util_1.ensureAddressString)(params[0]);\n        const typedData = (0, util_1.ensureParsedJSONObject)(params[1]);\n        this._ensureKnownAddress(address);\n        const message = eth_eip712_util_1.default.hashForSignTypedData_v3({ data: typedData });\n        const typedDataJSON = JSON.stringify(typedData, null, 2);\n        return this._signEthereumMessage(message, address, false, typedDataJSON);\n    }\n    async _eth_signTypedData_v4(params) {\n        this._requireAuthorization();\n        const address = (0, util_1.ensureAddressString)(params[0]);\n        const typedData = (0, util_1.ensureParsedJSONObject)(params[1]);\n        this._ensureKnownAddress(address);\n        const message = eth_eip712_util_1.default.hashForSignTypedData_v4({ data: typedData });\n        const typedDataJSON = JSON.stringify(typedData, null, 2);\n        return this._signEthereumMessage(message, address, false, typedDataJSON);\n    }\n    async _walletlink_arbitrary(params) {\n        const action = params[0];\n        const data = params[1];\n        if (typeof data !== \"string\") {\n            throw new Error(\"parameter must be a string\");\n        }\n        if (typeof action !== \"object\" || action === null) {\n            throw new Error(\"parameter must be an object\");\n        }\n        const result = await this.genericRequest(action, data);\n        return { jsonrpc: \"2.0\", id: 0, result };\n    }\n    async _wallet_addEthereumChain(params) {\n        var _a, _b, _c, _d;\n        const request = params[0];\n        if (((_a = request.rpcUrls) === null || _a === void 0 ? void 0 : _a.length) === 0) {\n            return {\n                jsonrpc: \"2.0\",\n                id: 0,\n                error: { code: 2, message: `please pass in at least 1 rpcUrl` }\n            };\n        }\n        if (!request.chainName || request.chainName.trim() === \"\") {\n            throw eth_rpc_errors_1.ethErrors.provider.custom({\n                code: 0,\n                message: \"chainName is a required field\"\n            });\n        }\n        if (!request.nativeCurrency) {\n            throw eth_rpc_errors_1.ethErrors.provider.custom({\n                code: 0,\n                message: \"nativeCurrency is a required field\"\n            });\n        }\n        const chainIdNumber = parseInt(request.chainId, 16);\n        const success = await this.addEthereumChain(chainIdNumber, (_b = request.rpcUrls) !== null && _b !== void 0 ? _b : [], (_c = request.blockExplorerUrls) !== null && _c !== void 0 ? _c : [], request.chainName, (_d = request.iconUrls) !== null && _d !== void 0 ? _d : [], request.nativeCurrency);\n        if (success) {\n            return { jsonrpc: \"2.0\", id: 0, result: null };\n        }\n        else {\n            return {\n                jsonrpc: \"2.0\",\n                id: 0,\n                error: { code: 2, message: `unable to add ethereum chain` }\n            };\n        }\n    }\n    async _wallet_switchEthereumChain(params) {\n        const request = params[0];\n        await this.switchEthereumChain(parseInt(request.chainId, 16));\n        return { jsonrpc: \"2.0\", id: 0, result: null };\n    }\n    async _wallet_watchAsset(params) {\n        var _a;\n        const request = (Array.isArray(params) ? params[0] : params);\n        if (((_a = request.type) === null || _a === void 0 ? void 0 : _a.length) === 0) {\n            throw eth_rpc_errors_1.ethErrors.rpc.invalidParams({\n                message: \"type is a required field\"\n            });\n        }\n        if (request.type !== \"ERC20\") {\n            throw eth_rpc_errors_1.ethErrors.rpc.invalidParams({\n                message: `Asset of type '${request.type}' not supported`\n            });\n        }\n        if (!(request === null || request === void 0 ? void 0 : request.options)) {\n            throw eth_rpc_errors_1.ethErrors.rpc.invalidParams({\n                message: \"options is a required field\"\n            });\n        }\n        if (!request.options.address) {\n            throw eth_rpc_errors_1.ethErrors.rpc.invalidParams({\n                message: \"option address is a required option\"\n            });\n        }\n        const { address, symbol, image, decimals } = request.options;\n        const res = await this.watchAsset(request.type, address, symbol, decimals, image);\n        return { jsonrpc: \"2.0\", id: 0, result: res };\n    }\n    _eth_uninstallFilter(params) {\n        const filterId = (0, util_1.ensureHexString)(params[0]);\n        return this._filterPolyfill.uninstallFilter(filterId);\n    }\n    async _eth_newFilter(params) {\n        const param = params[0];\n        const filterId = await this._filterPolyfill.newFilter(param);\n        return { jsonrpc: \"2.0\", id: 0, result: filterId };\n    }\n    async _eth_newBlockFilter() {\n        const filterId = await this._filterPolyfill.newBlockFilter();\n        return { jsonrpc: \"2.0\", id: 0, result: filterId };\n    }\n    async _eth_newPendingTransactionFilter() {\n        const filterId = await this._filterPolyfill.newPendingTransactionFilter();\n        return { jsonrpc: \"2.0\", id: 0, result: filterId };\n    }\n    _eth_getFilterChanges(params) {\n        const filterId = (0, util_1.ensureHexString)(params[0]);\n        return this._filterPolyfill.getFilterChanges(filterId);\n    }\n    _eth_getFilterLogs(params) {\n        const filterId = (0, util_1.ensureHexString)(params[0]);\n        return this._filterPolyfill.getFilterLogs(filterId);\n    }\n    initializeRelay() {\n        if (this._relay) {\n            return Promise.resolve(this._relay);\n        }\n        return this._relayProvider().then(relay => {\n            relay.setAccountsCallback(accounts => this._setAddresses(accounts));\n            relay.setChainCallback((chainId, jsonRpcUrl) => {\n                this.updateProviderInfo(jsonRpcUrl, parseInt(chainId, 10), true);\n            });\n            this._relay = relay;\n            return relay;\n        });\n    }\n}\nexports.WalletLinkProvider = WalletLinkProvider;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WalletLinkSdkUI = void 0;\nconst LinkFlow_1 = require(\"../components/LinkFlow\");\nconst Snackbar_1 = require(\"../components/Snackbar\");\nconst cssReset_1 = require(\"../lib/cssReset\");\nconst WalletLinkUI_1 = require(\"./WalletLinkUI\");\nclass WalletLinkSdkUI extends WalletLinkUI_1.WalletLinkUI {\n    constructor(options) {\n        super(options);\n        this.attached = false;\n        this.snackbar = new Snackbar_1.Snackbar({\n            darkMode: options.darkMode\n        });\n        this.linkFlow = new LinkFlow_1.LinkFlow({\n            darkMode: options.darkMode,\n            version: options.version,\n            sessionId: options.session.id,\n            sessionSecret: options.session.secret,\n            walletLinkUrl: options.walletLinkUrl,\n            connected$: options.connected$,\n            isParentConnection: false\n        });\n    }\n    attach() {\n        if (this.attached) {\n            throw new Error(\"WalletLinkUI is already attached\");\n        }\n        const el = document.documentElement;\n        const container = document.createElement(\"div\");\n        container.className = \"-walletlink-css-reset\";\n        el.appendChild(container);\n        this.linkFlow.attach(container);\n        this.snackbar.attach(container);\n        this.attached = true;\n        (0, cssReset_1.injectCssReset)();\n    }\n    setConnectDisabled(connectDisabled) {\n        this.linkFlow.setConnectDisabled(connectDisabled);\n    }\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    addEthereumChain(options) {\n        // no-op\n    }\n    // @ts-ignore\n    watchAsset(options) {\n        // no-op\n    }\n    // @ts-ignore\n    switchEthereumChain(options) {\n        // no-op\n    }\n    requestEthereumAccounts(options) {\n        this.linkFlow.open({ onCancel: options.onCancel });\n    }\n    hideRequestEthereumAccounts() {\n        this.linkFlow.close();\n    }\n    signEthereumMessage(_) {\n        // No-op\n    }\n    signEthereumTransaction(_) {\n        // No-op\n    }\n    submitEthereumTransaction(_) {\n        // No-op\n    }\n    ethereumAddressFromSignedMessage(_) {\n        // No-op\n    }\n    showConnecting(options) {\n        let snackbarProps;\n        if (options.isUnlinkedErrorState) {\n            snackbarProps = {\n                autoExpand: true,\n                message: \"Connection lost\",\n                menuItems: [\n                    {\n                        isRed: false,\n                        info: \"Reset connection\",\n                        svgWidth: \"10\",\n                        svgHeight: \"11\",\n                        path: \"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z\",\n                        defaultFillRule: \"evenodd\",\n                        defaultClipRule: \"evenodd\",\n                        onClick: options.onResetConnection\n                    }\n                ]\n            };\n        }\n        else {\n            snackbarProps = {\n                message: \"Confirm on phone\",\n                menuItems: [\n                    {\n                        isRed: true,\n                        info: \"Cancel transaction\",\n                        svgWidth: \"11\",\n                        svgHeight: \"11\",\n                        path: \"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z\",\n                        defaultFillRule: \"inherit\",\n                        defaultClipRule: \"inherit\",\n                        onClick: options.onCancel\n                    },\n                    {\n                        isRed: false,\n                        info: \"Reset connection\",\n                        svgWidth: \"10\",\n                        svgHeight: \"11\",\n                        path: \"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z\",\n                        defaultFillRule: \"evenodd\",\n                        defaultClipRule: \"evenodd\",\n                        onClick: options.onResetConnection\n                    }\n                ]\n            };\n        }\n        return this.snackbar.presentItem(snackbarProps);\n    }\n    reloadUI() {\n        document.location.reload();\n    }\n    inlineAccountsResponse() {\n        return false;\n    }\n    // @ts-ignore\n    inlineAddEthereumChain(chainId) {\n        return false;\n    }\n    inlineWatchAsset() {\n        return false;\n    }\n    inlineSwitchEthereumChain() {\n        return false;\n    }\n    isStandalone() {\n        return false;\n    }\n}\nexports.WalletLinkSdkUI = WalletLinkSdkUI;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WalletLinkUI = void 0;\nclass WalletLinkUI {\n    constructor(_) { }\n    /**\n     * We want to disable showing the qr code for in-page walletlink if the dapp hasn't provided a json rpc url\n     */\n    setConnectDisabled(_) { }\n}\nexports.WalletLinkUI = WalletLinkUI;\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RelayMessageType = void 0;\nvar RelayMessageType;\n(function (RelayMessageType) {\n    RelayMessageType[\"SESSION_ID_REQUEST\"] = \"SESSION_ID_REQUEST\";\n    RelayMessageType[\"SESSION_ID_RESPONSE\"] = \"SESSION_ID_RESPONSE\";\n    RelayMessageType[\"LINKED\"] = \"LINKED\";\n    RelayMessageType[\"UNLINKED\"] = \"UNLINKED\";\n    RelayMessageType[\"WEB3_REQUEST\"] = \"WEB3_REQUEST\";\n    RelayMessageType[\"WEB3_REQUEST_CANCELED\"] = \"WEB3_REQUEST_CANCELED\";\n    RelayMessageType[\"WEB3_RESPONSE\"] = \"WEB3_RESPONSE\";\n})(RelayMessageType = exports.RelayMessageType || (exports.RelayMessageType = {}));\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Session = void 0;\nconst js_sha256_1 = require(\"js-sha256\");\nconst rxjs_1 = require(\"rxjs\");\nconst operators_1 = require(\"rxjs/operators\");\nconst util_1 = require(\"../util\");\nconst STORAGE_KEY_SESSION_ID = \"session:id\";\nconst STORAGE_KEY_SESSION_SECRET = \"session:secret\";\nconst STORAGE_KEY_SESSION_LINKED = \"session:linked\";\nclass Session {\n    constructor(storage, id, secret, linked) {\n        this._storage = storage;\n        this._id = id || (0, util_1.randomBytesHex)(16);\n        this._secret = secret || (0, util_1.randomBytesHex)(32);\n        const hash = js_sha256_1.sha256.create();\n        hash.update(`${this._id}, ${this._secret} WalletLink`);\n        this._key = hash.hex();\n        this._linked = !!linked;\n    }\n    static load(storage) {\n        const id = storage.getItem(STORAGE_KEY_SESSION_ID);\n        const linked = storage.getItem(STORAGE_KEY_SESSION_LINKED);\n        const secret = storage.getItem(STORAGE_KEY_SESSION_SECRET);\n        if (id && secret) {\n            return new Session(storage, id, secret, linked === \"1\");\n        }\n        return null;\n    }\n    static get persistedSessionIdChange$() {\n        return (0, rxjs_1.fromEvent)(window, \"storage\").pipe((0, operators_1.filter)(evt => evt.key === STORAGE_KEY_SESSION_ID), (0, operators_1.map)(evt => ({\n            oldValue: evt.oldValue || null,\n            newValue: evt.newValue || null\n        })));\n    }\n    /**\n     * Takes in a session ID and returns the sha256 hash of it.\n     * @param sessionId session ID\n     */\n    static hash(sessionId) {\n        const hash = js_sha256_1.sha256.create();\n        return hash.update(sessionId).hex();\n    }\n    get id() {\n        return this._id;\n    }\n    get secret() {\n        return this._secret;\n    }\n    get key() {\n        return this._key;\n    }\n    get linked() {\n        return this._linked;\n    }\n    set linked(val) {\n        this._linked = val;\n        this.persistLinked();\n    }\n    save() {\n        this._storage.setItem(STORAGE_KEY_SESSION_ID, this._id);\n        this._storage.setItem(STORAGE_KEY_SESSION_SECRET, this._secret);\n        this.persistLinked();\n        return this;\n    }\n    persistLinked() {\n        this._storage.setItem(STORAGE_KEY_SESSION_LINKED, this._linked ? \"1\" : \"0\");\n    }\n}\nexports.Session = Session;\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WalletLinkRelay = void 0;\nconst bind_decorator_1 = __importDefault(require(\"bind-decorator\"));\nconst eth_rpc_errors_1 = require(\"eth-rpc-errors\");\nconst rxjs_1 = require(\"rxjs\");\nconst operators_1 = require(\"rxjs/operators\");\nconst WalletLinkAnalytics_1 = require(\"../connection/WalletLinkAnalytics\");\nconst WalletLinkConnection_1 = require(\"../connection/WalletLinkConnection\");\nconst init_1 = require(\"../init\");\nconst util_1 = require(\"../util\");\nconst aes256gcm = __importStar(require(\"./aes256gcm\"));\nconst Session_1 = require(\"./Session\");\nconst WalletLinkRelayAbstract_1 = require(\"./WalletLinkRelayAbstract\");\nconst Web3Method_1 = require(\"./Web3Method\");\nconst Web3RequestCanceledMessage_1 = require(\"./Web3RequestCanceledMessage\");\nconst Web3RequestMessage_1 = require(\"./Web3RequestMessage\");\nconst Web3Response_1 = require(\"./Web3Response\");\nconst Web3ResponseMessage_1 = require(\"./Web3ResponseMessage\");\nclass WalletLinkRelay extends WalletLinkRelayAbstract_1.WalletLinkRelayAbstract {\n    constructor(options) {\n        super();\n        this.accountsCallback = null;\n        this.chainCallback = null;\n        this.appName = \"\";\n        this.appLogoUrl = null;\n        this.subscriptions = new rxjs_1.Subscription();\n        this.walletLinkUrl = options.walletLinkUrl;\n        this.storage = options.storage;\n        this._session =\n            Session_1.Session.load(options.storage) || new Session_1.Session(options.storage).save();\n        this.relayEventManager = options.relayEventManager;\n        this.walletLinkAnalytics = options.walletLinkAnalytics\n            ? options.walletLinkAnalytics\n            : new WalletLinkAnalytics_1.WalletLinkAnalytics();\n        this.connection = new WalletLinkConnection_1.WalletLinkConnection(this._session.id, this._session.key, this.walletLinkUrl, this.walletLinkAnalytics);\n        this.subscriptions.add(this.connection.incomingEvent$\n            .pipe((0, operators_1.filter)(m => m.event === \"Web3Response\"))\n            .subscribe({ next: this.handleIncomingEvent }) // eslint-disable-line @typescript-eslint/unbound-method\n        );\n        this.subscriptions.add(this.connection.linked$\n            .pipe((0, operators_1.skip)(1), (0, operators_1.tap)((linked) => {\n            var _a;\n            this.isLinked = linked;\n            const cachedAddresses = this.storage.getItem(WalletLinkRelayAbstract_1.LOCAL_STORAGE_ADDRESSES_KEY);\n            if (linked) {\n                // Only set linked session variable one way\n                this.session.linked = linked;\n            }\n            this.isUnlinkedErrorState = false;\n            if (cachedAddresses) {\n                const addresses = cachedAddresses.split(\" \");\n                const wasConnectedViaStandalone = this.storage.getItem(\"IsStandaloneSigning\") === \"true\";\n                if (addresses[0] !== \"\" &&\n                    !linked &&\n                    this.session.linked &&\n                    !wasConnectedViaStandalone) {\n                    this.isUnlinkedErrorState = true;\n                    const sessionIdHash = this.getSessionIdHash();\n                    (_a = this.walletLinkAnalytics) === null || _a === void 0 ? void 0 : _a.sendEvent(init_1.EVENTS.UNLINKED_ERROR_STATE, { sessionIdHash, origin: location.origin });\n                }\n            }\n        }))\n            .subscribe());\n        // if session is marked destroyed, reset and reload\n        this.subscriptions.add(this.connection.sessionConfig$\n            .pipe((0, operators_1.filter)(c => !!c.metadata && c.metadata.__destroyed === \"1\"))\n            .subscribe(() => {\n            var _a;\n            const alreadyDestroyed = this.connection.isDestroyed;\n            (_a = this.walletLinkAnalytics) === null || _a === void 0 ? void 0 : _a.sendEvent(init_1.EVENTS.METADATA_DESTROYED, {\n                alreadyDestroyed,\n                sessionIdHash: this.getSessionIdHash(),\n                origin: location.origin\n            });\n            return this.resetAndReload();\n        }));\n        this.subscriptions.add(this.connection.sessionConfig$\n            .pipe((0, operators_1.filter)(c => c.metadata && c.metadata.WalletUsername !== undefined))\n            .pipe((0, operators_1.mergeMap)(c => aes256gcm.decrypt(c.metadata.WalletUsername, this._session.secret)))\n            .subscribe({\n            next: walletUsername => {\n                this.storage.setItem(WalletLinkRelayAbstract_1.WALLET_USER_NAME_KEY, walletUsername);\n            },\n            error: () => {\n                var _a;\n                (_a = this.walletLinkAnalytics) === null || _a === void 0 ? void 0 : _a.sendEvent(init_1.EVENTS.GENERAL_ERROR, {\n                    message: \"Had error decrypting\",\n                    value: \"username\"\n                });\n            }\n        }));\n        this.subscriptions.add(this.connection.sessionConfig$\n            .pipe((0, operators_1.filter)(c => c.metadata && c.metadata.AppVersion !== undefined))\n            .pipe((0, operators_1.mergeMap)(c => aes256gcm.decrypt(c.metadata.AppVersion, this._session.secret)))\n            .subscribe({\n            next: appVersion => {\n                this.storage.setItem(WalletLinkRelayAbstract_1.APP_VERSION_KEY, appVersion);\n            },\n            error: () => {\n                var _a;\n                (_a = this.walletLinkAnalytics) === null || _a === void 0 ? void 0 : _a.sendEvent(init_1.EVENTS.GENERAL_ERROR, {\n                    message: \"Had error decrypting\",\n                    value: \"appversion\"\n                });\n            }\n        }));\n        this.subscriptions.add(this.connection.sessionConfig$\n            .pipe((0, operators_1.filter)(c => c.metadata &&\n            c.metadata.ChainId !== undefined &&\n            c.metadata.JsonRpcUrl !== undefined))\n            .pipe((0, operators_1.mergeMap)(c => (0, rxjs_1.zip)(aes256gcm.decrypt(c.metadata.ChainId, this._session.secret), aes256gcm.decrypt(c.metadata.JsonRpcUrl, this._session.secret))))\n            .pipe((0, operators_1.distinctUntilChanged)())\n            .subscribe({\n            next: ([chainId, jsonRpcUrl]) => {\n                if (this.chainCallback) {\n                    this.chainCallback(chainId, jsonRpcUrl);\n                }\n            },\n            error: () => {\n                var _a;\n                (_a = this.walletLinkAnalytics) === null || _a === void 0 ? void 0 : _a.sendEvent(init_1.EVENTS.GENERAL_ERROR, {\n                    message: \"Had error decrypting\",\n                    value: \"chainId|jsonRpcUrl\"\n                });\n            }\n        }));\n        this.subscriptions.add(this.connection.sessionConfig$\n            .pipe((0, operators_1.filter)(c => c.metadata && c.metadata.EthereumAddress !== undefined))\n            .pipe((0, operators_1.mergeMap)(c => aes256gcm.decrypt(c.metadata.EthereumAddress, this._session.secret)))\n            .subscribe({\n            next: selectedAddress => {\n                if (this.accountsCallback) {\n                    this.accountsCallback([selectedAddress]);\n                }\n                if (WalletLinkRelay.accountRequestCallbackIds.size > 0) {\n                    // We get the ethereum address from the metadata.  If for whatever\n                    // reason we don't get a response via an explicit web3 message\n                    // we can still fulfill the eip1102 request.\n                    Array.from(WalletLinkRelay.accountRequestCallbackIds.values()).forEach(id => {\n                        const message = (0, Web3ResponseMessage_1.Web3ResponseMessage)({\n                            id,\n                            response: (0, Web3Response_1.RequestEthereumAccountsResponse)([\n                                selectedAddress\n                            ])\n                        });\n                        this.invokeCallback(Object.assign(Object.assign({}, message), { id }));\n                    });\n                    WalletLinkRelay.accountRequestCallbackIds.clear();\n                }\n            },\n            error: () => {\n                var _a;\n                (_a = this.walletLinkAnalytics) === null || _a === void 0 ? void 0 : _a.sendEvent(init_1.EVENTS.GENERAL_ERROR, {\n                    message: \"Had error decrypting\",\n                    value: \"selectedAddress\"\n                });\n            }\n        }));\n        this.ui = options.walletLinkUIConstructor({\n            walletLinkUrl: options.walletLinkUrl,\n            version: options.version,\n            darkMode: options.darkMode,\n            session: this._session,\n            connected$: this.connection.connected$\n        });\n        this.connection.connect();\n    }\n    attachUI() {\n        this.ui.attach();\n    }\n    resetAndReload() {\n        this.connection\n            .setSessionMetadata(\"__destroyed\", \"1\")\n            .pipe((0, operators_1.timeout)(1000), (0, operators_1.catchError)(_ => (0, rxjs_1.of)(null)))\n            .subscribe(_ => {\n            var _a, _b, _c;\n            try {\n                this.subscriptions.unsubscribe();\n            }\n            catch (err) {\n                (_a = this.walletLinkAnalytics) === null || _a === void 0 ? void 0 : _a.sendEvent(init_1.EVENTS.GENERAL_ERROR, {\n                    message: \"Had error unsubscribing\"\n                });\n            }\n            (_b = this.walletLinkAnalytics) === null || _b === void 0 ? void 0 : _b.sendEvent(init_1.EVENTS.SESSION_STATE_CHANGE, {\n                method: \"relay::resetAndReload\",\n                sessionMetadataChange: \"__destroyed, 1\",\n                sessionIdHash: this.getSessionIdHash(),\n                origin: location.origin\n            });\n            this.connection.destroy();\n            /**\n             * Only clear storage if the session id we have in memory matches the one on disk\n             * Otherwise, in the case where we have 2 tabs, another tab might have cleared\n             * storage already.  In that case if we clear storage again, the user will be in\n             * a state where the first tab allows the user to connect but the session that\n             * was used isn't persisted.  This leaves the user in a state where they aren't\n             * connected to the mobile app.\n             */\n            const storedSession = Session_1.Session.load(this.storage);\n            if ((storedSession === null || storedSession === void 0 ? void 0 : storedSession.id) === this._session.id) {\n                this.storage.clear();\n            }\n            else if (storedSession) {\n                (_c = this.walletLinkAnalytics) === null || _c === void 0 ? void 0 : _c.sendEvent(init_1.EVENTS.SKIPPED_CLEARING_SESSION, {\n                    sessionIdHash: this.getSessionIdHash(),\n                    storedSessionIdHash: Session_1.Session.hash(storedSession.id),\n                    origin: location.origin\n                });\n            }\n            this.ui.reloadUI();\n        }, (err) => {\n            var _a;\n            (_a = this.walletLinkAnalytics) === null || _a === void 0 ? void 0 : _a.sendEvent(init_1.EVENTS.FAILURE, {\n                method: \"relay::resetAndReload\",\n                message: `failed to reset and reload with ${err}`,\n                sessionIdHash: this.getSessionIdHash()\n            });\n        });\n    }\n    setAppInfo(appName, appLogoUrl) {\n        this.appName = appName;\n        this.appLogoUrl = appLogoUrl;\n    }\n    getStorageItem(key) {\n        return this.storage.getItem(key);\n    }\n    get session() {\n        return this._session;\n    }\n    setStorageItem(key, value) {\n        this.storage.setItem(key, value);\n    }\n    signEthereumMessage(message, address, addPrefix, typedDataJson) {\n        return this.sendRequest({\n            method: Web3Method_1.Web3Method.signEthereumMessage,\n            params: {\n                message: (0, util_1.hexStringFromBuffer)(message, true),\n                address,\n                addPrefix,\n                typedDataJson: typedDataJson || null\n            }\n        });\n    }\n    ethereumAddressFromSignedMessage(message, signature, addPrefix) {\n        return this.sendRequest({\n            method: Web3Method_1.Web3Method.ethereumAddressFromSignedMessage,\n            params: {\n                message: (0, util_1.hexStringFromBuffer)(message, true),\n                signature: (0, util_1.hexStringFromBuffer)(signature, true),\n                addPrefix\n            }\n        });\n    }\n    signEthereumTransaction(params) {\n        return this.sendRequest({\n            method: Web3Method_1.Web3Method.signEthereumTransaction,\n            params: {\n                fromAddress: params.fromAddress,\n                toAddress: params.toAddress,\n                weiValue: (0, util_1.bigIntStringFromBN)(params.weiValue),\n                data: (0, util_1.hexStringFromBuffer)(params.data, true),\n                nonce: params.nonce,\n                gasPriceInWei: params.gasPriceInWei\n                    ? (0, util_1.bigIntStringFromBN)(params.gasPriceInWei)\n                    : null,\n                maxFeePerGas: params.gasPriceInWei\n                    ? (0, util_1.bigIntStringFromBN)(params.gasPriceInWei)\n                    : null,\n                maxPriorityFeePerGas: params.gasPriceInWei\n                    ? (0, util_1.bigIntStringFromBN)(params.gasPriceInWei)\n                    : null,\n                gasLimit: params.gasLimit ? (0, util_1.bigIntStringFromBN)(params.gasLimit) : null,\n                chainId: params.chainId,\n                shouldSubmit: false\n            }\n        });\n    }\n    signAndSubmitEthereumTransaction(params) {\n        return this.sendRequest({\n            method: Web3Method_1.Web3Method.signEthereumTransaction,\n            params: {\n                fromAddress: params.fromAddress,\n                toAddress: params.toAddress,\n                weiValue: (0, util_1.bigIntStringFromBN)(params.weiValue),\n                data: (0, util_1.hexStringFromBuffer)(params.data, true),\n                nonce: params.nonce,\n                gasPriceInWei: params.gasPriceInWei\n                    ? (0, util_1.bigIntStringFromBN)(params.gasPriceInWei)\n                    : null,\n                maxFeePerGas: params.maxFeePerGas\n                    ? (0, util_1.bigIntStringFromBN)(params.maxFeePerGas)\n                    : null,\n                maxPriorityFeePerGas: params.maxPriorityFeePerGas\n                    ? (0, util_1.bigIntStringFromBN)(params.maxPriorityFeePerGas)\n                    : null,\n                gasLimit: params.gasLimit ? (0, util_1.bigIntStringFromBN)(params.gasLimit) : null,\n                chainId: params.chainId,\n                shouldSubmit: true\n            }\n        });\n    }\n    submitEthereumTransaction(signedTransaction, chainId) {\n        return this.sendRequest({\n            method: Web3Method_1.Web3Method.submitEthereumTransaction,\n            params: {\n                signedTransaction: (0, util_1.hexStringFromBuffer)(signedTransaction, true),\n                chainId\n            }\n        });\n    }\n    scanQRCode(regExp) {\n        return this.sendRequest({\n            method: Web3Method_1.Web3Method.scanQRCode,\n            params: { regExp }\n        });\n    }\n    genericRequest(data, action) {\n        return this.sendRequest({\n            method: Web3Method_1.Web3Method.generic,\n            params: {\n                action,\n                data\n            }\n        });\n    }\n    sendGenericMessage(request) {\n        return this.sendRequest(request);\n    }\n    sendRequest(request) {\n        let hideSnackbarItem = null;\n        const id = (0, util_1.randomBytesHex)(8);\n        const cancel = () => {\n            this.publishWeb3RequestCanceledEvent(id);\n            this.handleWeb3ResponseMessage((0, Web3ResponseMessage_1.Web3ResponseMessage)({\n                id,\n                response: (0, Web3Response_1.ErrorResponse)(request.method, \"User rejected request\")\n            }));\n            hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n        };\n        const promise = new Promise((resolve, reject) => {\n            if (!this.ui.isStandalone()) {\n                hideSnackbarItem = this.ui.showConnecting({\n                    isUnlinkedErrorState: this.isUnlinkedErrorState,\n                    onCancel: cancel,\n                    onResetConnection: this.resetAndReload // eslint-disable-line @typescript-eslint/unbound-method\n                });\n            }\n            this.relayEventManager.callbacks.set(id, response => {\n                hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n                if (response.errorMessage) {\n                    return reject(new Error(response.errorMessage));\n                }\n                resolve(response);\n            });\n            if (this.ui.isStandalone()) {\n                this.sendRequestStandalone(id, request);\n            }\n            else {\n                this.publishWeb3RequestEvent(id, request);\n            }\n        });\n        return { promise, cancel };\n    }\n    setConnectDisabled(disabled) {\n        this.ui.setConnectDisabled(disabled);\n    }\n    setAccountsCallback(accountsCallback) {\n        this.accountsCallback = accountsCallback;\n    }\n    setChainCallback(chainCallback) {\n        this.chainCallback = chainCallback;\n    }\n    publishWeb3RequestEvent(id, request) {\n        var _a;\n        const message = (0, Web3RequestMessage_1.Web3RequestMessage)({ id, request });\n        const storedSession = Session_1.Session.load(this.storage);\n        (_a = this.walletLinkAnalytics) === null || _a === void 0 ? void 0 : _a.sendEvent(init_1.EVENTS.WEB3_REQUEST, {\n            eventId: message.id,\n            method: `relay::${message.request.method}`,\n            sessionIdHash: this.getSessionIdHash(),\n            storedSessionIdHash: storedSession ? Session_1.Session.hash(storedSession.id) : \"\",\n            isSessionMismatched: ((storedSession === null || storedSession === void 0 ? void 0 : storedSession.id) !== this._session.id).toString(),\n            origin: location.origin\n        });\n        this.subscriptions.add(this.publishEvent(\"Web3Request\", message, true).subscribe({\n            next: _ => {\n                var _a;\n                (_a = this.walletLinkAnalytics) === null || _a === void 0 ? void 0 : _a.sendEvent(init_1.EVENTS.WEB3_REQUEST_PUBLISHED, {\n                    eventId: message.id,\n                    method: `relay::${message.request.method}`,\n                    sessionIdHash: this.getSessionIdHash(),\n                    storedSessionIdHash: storedSession\n                        ? Session_1.Session.hash(storedSession.id)\n                        : \"\",\n                    isSessionMismatched: ((storedSession === null || storedSession === void 0 ? void 0 : storedSession.id) !== this._session.id).toString(),\n                    origin: location.origin\n                });\n            },\n            error: err => {\n                this.handleWeb3ResponseMessage((0, Web3ResponseMessage_1.Web3ResponseMessage)({\n                    id: message.id,\n                    response: {\n                        method: message.request.method,\n                        errorMessage: err.message\n                    }\n                }));\n            }\n        }));\n    }\n    publishWeb3RequestCanceledEvent(id) {\n        const message = (0, Web3RequestCanceledMessage_1.Web3RequestCanceledMessage)(id);\n        this.subscriptions.add(this.publishEvent(\"Web3RequestCanceled\", message, false).subscribe());\n    }\n    publishEvent(event, message, callWebhook) {\n        const secret = this.session.secret;\n        return new rxjs_1.Observable(subscriber => {\n            void aes256gcm\n                .encrypt(JSON.stringify(Object.assign(Object.assign({}, message), { origin: location.origin })), secret)\n                .then((encrypted) => {\n                subscriber.next(encrypted);\n                subscriber.complete();\n            });\n        }).pipe((0, operators_1.mergeMap)((encrypted) => {\n            return this.connection.publishEvent(event, encrypted, callWebhook);\n        }));\n    }\n    handleIncomingEvent(event) {\n        try {\n            this.subscriptions.add(aes256gcm\n                .decrypt(event.data, this.session.secret)\n                .pipe((0, operators_1.map)(c => JSON.parse(c)))\n                .subscribe({\n                next: json => {\n                    const message = (0, Web3ResponseMessage_1.isWeb3ResponseMessage)(json) ? json : null;\n                    if (!message) {\n                        return;\n                    }\n                    this.handleWeb3ResponseMessage(message);\n                },\n                error: () => {\n                    var _a;\n                    (_a = this.walletLinkAnalytics) === null || _a === void 0 ? void 0 : _a.sendEvent(init_1.EVENTS.GENERAL_ERROR, {\n                        message: \"Had error decrypting\",\n                        value: \"incomingEvent\"\n                    });\n                }\n            }));\n        }\n        catch (_a) {\n            return;\n        }\n    }\n    handleWeb3ResponseMessage(message) {\n        var _a;\n        const { response } = message;\n        (_a = this.walletLinkAnalytics) === null || _a === void 0 ? void 0 : _a.sendEvent(init_1.EVENTS.WEB3_RESPONSE, {\n            eventId: message.id,\n            method: `relay::${response.method}`,\n            sessionIdHash: this.getSessionIdHash(),\n            origin: location.origin\n        });\n        if ((0, Web3Response_1.isRequestEthereumAccountsResponse)(response)) {\n            Array.from(WalletLinkRelay.accountRequestCallbackIds.values()).forEach(id => this.invokeCallback(Object.assign(Object.assign({}, message), { id })));\n            WalletLinkRelay.accountRequestCallbackIds.clear();\n            return;\n        }\n        this.invokeCallback(message);\n    }\n    invokeCallback(message) {\n        const callback = this.relayEventManager.callbacks.get(message.id);\n        if (callback) {\n            callback(message.response);\n            this.relayEventManager.callbacks.delete(message.id);\n        }\n    }\n    requestEthereumAccounts() {\n        let request = {\n            method: Web3Method_1.Web3Method.requestEthereumAccounts,\n            params: {\n                appName: this.appName,\n                appLogoUrl: this.appLogoUrl || null\n            }\n        };\n        let hideSnackbarItem = null;\n        const id = (0, util_1.randomBytesHex)(8);\n        const cancel = () => {\n            this.publishWeb3RequestCanceledEvent(id);\n            this.handleWeb3ResponseMessage((0, Web3ResponseMessage_1.Web3ResponseMessage)({\n                id,\n                response: (0, Web3Response_1.ErrorResponse)(request.method, \"User rejected request\")\n            }));\n            hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n        };\n        const promise = new Promise((resolve, reject) => {\n            var _a;\n            this.relayEventManager.callbacks.set(id, response => {\n                this.ui.hideRequestEthereumAccounts();\n                hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n                if (response.errorMessage) {\n                    return reject(new Error(response.errorMessage));\n                }\n                resolve(response);\n            });\n            const userAgent = ((_a = window === null || window === void 0 ? void 0 : window.navigator) === null || _a === void 0 ? void 0 : _a.userAgent) || null;\n            if (userAgent &&\n                /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent)) {\n                window.location.href = `https://go.cb-w.com/xoXnYwQimhb?cb_url=${encodeURIComponent(window.location.href)}`;\n                return;\n            }\n            if (this.ui.inlineAccountsResponse()) {\n                const onAccounts = (accounts) => {\n                    this.handleWeb3ResponseMessage((0, Web3ResponseMessage_1.Web3ResponseMessage)({\n                        id,\n                        response: (0, Web3Response_1.RequestEthereumAccountsResponse)(accounts)\n                    }));\n                };\n                this.ui.requestEthereumAccounts({\n                    onCancel: cancel,\n                    onAccounts\n                });\n            }\n            else {\n                this.ui.requestEthereumAccounts({\n                    onCancel: cancel\n                });\n            }\n            WalletLinkRelay.accountRequestCallbackIds.add(id);\n            if (!this.ui.inlineAccountsResponse() && !this.ui.isStandalone()) {\n                this.publishWeb3RequestEvent(id, request);\n            }\n        });\n        return { promise, cancel };\n    }\n    watchAsset(type, address, symbol, decimals, image) {\n        const request = {\n            method: Web3Method_1.Web3Method.watchAsset,\n            params: {\n                type,\n                options: {\n                    address,\n                    symbol,\n                    decimals,\n                    image\n                }\n            }\n        };\n        let hideSnackbarItem = null;\n        const id = (0, util_1.randomBytesHex)(8);\n        const cancel = () => {\n            this.publishWeb3RequestCanceledEvent(id);\n            this.handleWeb3ResponseMessage((0, Web3ResponseMessage_1.Web3ResponseMessage)({\n                id,\n                response: (0, Web3Response_1.ErrorResponse)(request.method, \"User rejected request\")\n            }));\n            hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n        };\n        if (!this.ui.inlineWatchAsset()) {\n            hideSnackbarItem = this.ui.showConnecting({\n                isUnlinkedErrorState: this.isUnlinkedErrorState,\n                onCancel: cancel,\n                onResetConnection: this.resetAndReload // eslint-disable-line @typescript-eslint/unbound-method\n            });\n        }\n        const promise = new Promise((resolve, reject) => {\n            this.relayEventManager.callbacks.set(id, response => {\n                hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n                if (response.errorMessage) {\n                    return reject(new Error(response.errorMessage));\n                }\n                resolve(response);\n            });\n            const _cancel = () => {\n                this.handleWeb3ResponseMessage((0, Web3ResponseMessage_1.Web3ResponseMessage)({\n                    id,\n                    response: (0, Web3Response_1.WatchAssetReponse)(false)\n                }));\n            };\n            const approve = () => {\n                this.handleWeb3ResponseMessage((0, Web3ResponseMessage_1.Web3ResponseMessage)({\n                    id,\n                    response: (0, Web3Response_1.WatchAssetReponse)(true)\n                }));\n            };\n            if (this.ui.inlineWatchAsset()) {\n                this.ui.watchAsset({\n                    onApprove: approve,\n                    onCancel: _cancel,\n                    type,\n                    address,\n                    symbol,\n                    decimals,\n                    image\n                });\n            }\n            if (!this.ui.inlineWatchAsset() && !this.ui.isStandalone()) {\n                this.publishWeb3RequestEvent(id, request);\n            }\n        });\n        return { cancel, promise };\n    }\n    addEthereumChain(chainId, rpcUrls, iconUrls, blockExplorerUrls, chainName, nativeCurrency) {\n        let request = {\n            method: Web3Method_1.Web3Method.addEthereumChain,\n            params: {\n                chainId,\n                rpcUrls,\n                blockExplorerUrls,\n                chainName,\n                iconUrls,\n                nativeCurrency\n            }\n        };\n        let hideSnackbarItem = null;\n        const id = (0, util_1.randomBytesHex)(8);\n        const cancel = () => {\n            this.publishWeb3RequestCanceledEvent(id);\n            this.handleWeb3ResponseMessage((0, Web3ResponseMessage_1.Web3ResponseMessage)({\n                id,\n                response: (0, Web3Response_1.ErrorResponse)(request.method, \"User rejected request\")\n            }));\n            hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n        };\n        if (!this.ui.inlineAddEthereumChain(chainId)) {\n            hideSnackbarItem = this.ui.showConnecting({\n                isUnlinkedErrorState: this.isUnlinkedErrorState,\n                onCancel: cancel,\n                onResetConnection: this.resetAndReload // eslint-disable-line @typescript-eslint/unbound-method\n            });\n        }\n        const promise = new Promise((resolve, reject) => {\n            this.relayEventManager.callbacks.set(id, response => {\n                hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n                if (response.errorMessage) {\n                    return reject(new Error(response.errorMessage));\n                }\n                resolve(response);\n            });\n            const _cancel = () => {\n                this.handleWeb3ResponseMessage((0, Web3ResponseMessage_1.Web3ResponseMessage)({\n                    id,\n                    response: (0, Web3Response_1.AddEthereumChainResponse)({\n                        isApproved: false,\n                        rpcUrl: \"\"\n                    })\n                }));\n            };\n            const approve = (rpcUrl) => {\n                this.handleWeb3ResponseMessage((0, Web3ResponseMessage_1.Web3ResponseMessage)({\n                    id,\n                    response: (0, Web3Response_1.AddEthereumChainResponse)({ isApproved: true, rpcUrl })\n                }));\n            };\n            if (this.ui.inlineAddEthereumChain(chainId)) {\n                this.ui.addEthereumChain({\n                    onCancel: _cancel,\n                    onApprove: approve,\n                    chainId: request.params.chainId,\n                    rpcUrls: request.params.rpcUrls,\n                    blockExplorerUrls: request.params\n                        .blockExplorerUrls,\n                    chainName: request.params.chainName,\n                    iconUrls: request.params.iconUrls,\n                    nativeCurrency: request.params\n                        .nativeCurrency\n                });\n            }\n            if (!this.ui.inlineAddEthereumChain(chainId) && !this.ui.isStandalone()) {\n                this.publishWeb3RequestEvent(id, request);\n            }\n        });\n        return { promise, cancel };\n    }\n    switchEthereumChain(chainId) {\n        let request = {\n            method: Web3Method_1.Web3Method.switchEthereumChain,\n            params: {\n                chainId\n            }\n        };\n        let hideSnackbarItem = null;\n        const id = (0, util_1.randomBytesHex)(8);\n        const cancel = () => {\n            this.publishWeb3RequestCanceledEvent(id);\n            this.handleWeb3ResponseMessage((0, Web3ResponseMessage_1.Web3ResponseMessage)({\n                id,\n                response: (0, Web3Response_1.ErrorResponse)(request.method, \"User rejected request\")\n            }));\n            hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n        };\n        if (!this.ui.inlineSwitchEthereumChain()) {\n            hideSnackbarItem = this.ui.showConnecting({\n                isUnlinkedErrorState: this.isUnlinkedErrorState,\n                onCancel: cancel,\n                onResetConnection: this.resetAndReload // eslint-disable-line @typescript-eslint/unbound-method\n            });\n        }\n        const promise = new Promise((resolve, reject) => {\n            this.relayEventManager.callbacks.set(id, response => {\n                hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n                if (response.errorMessage && response.errorCode) {\n                    return reject(eth_rpc_errors_1.ethErrors.provider.custom({\n                        code: response.errorCode,\n                        message: `Unrecognized chain ID. Try adding the chain using addEthereumChain first.`\n                    }));\n                }\n                else if (response.errorMessage) {\n                    return reject(new Error(response.errorMessage));\n                }\n                resolve(response);\n            });\n            const _cancel = (errorCode) => {\n                if (errorCode) {\n                    this.handleWeb3ResponseMessage((0, Web3ResponseMessage_1.Web3ResponseMessage)({\n                        id,\n                        response: (0, Web3Response_1.ErrorResponse)(Web3Method_1.Web3Method.switchEthereumChain, \"unsupported chainId\", errorCode)\n                    }));\n                }\n                else {\n                    this.handleWeb3ResponseMessage((0, Web3ResponseMessage_1.Web3ResponseMessage)({\n                        id,\n                        response: (0, Web3Response_1.SwitchEthereumChainResponse)({\n                            isApproved: false,\n                            rpcUrl: \"\"\n                        })\n                    }));\n                }\n            };\n            const approve = (rpcUrl) => {\n                this.handleWeb3ResponseMessage((0, Web3ResponseMessage_1.Web3ResponseMessage)({\n                    id,\n                    response: (0, Web3Response_1.SwitchEthereumChainResponse)({\n                        isApproved: true,\n                        rpcUrl\n                    })\n                }));\n            };\n            this.ui.switchEthereumChain({\n                onCancel: _cancel,\n                onApprove: approve,\n                chainId: request.params.chainId\n            });\n            if (!this.ui.inlineSwitchEthereumChain() && !this.ui.isStandalone()) {\n                this.publishWeb3RequestEvent(id, request);\n            }\n        });\n        return { promise, cancel };\n    }\n    getSessionIdHash() {\n        return Session_1.Session.hash(this._session.id);\n    }\n    sendRequestStandalone(id, request) {\n        const _cancel = () => {\n            this.handleWeb3ResponseMessage((0, Web3ResponseMessage_1.Web3ResponseMessage)({\n                id,\n                response: (0, Web3Response_1.ErrorResponse)(request.method, \"User rejected request\")\n            }));\n        };\n        const onSuccess = (response) => {\n            this.handleWeb3ResponseMessage((0, Web3ResponseMessage_1.Web3ResponseMessage)({\n                id,\n                response\n            }));\n        };\n        switch (request.method) {\n            case Web3Method_1.Web3Method.signEthereumMessage:\n                this.ui.signEthereumMessage({\n                    request,\n                    onSuccess,\n                    onCancel: _cancel\n                });\n                break;\n            case Web3Method_1.Web3Method.signEthereumTransaction:\n                this.ui.signEthereumTransaction({\n                    request,\n                    onSuccess,\n                    onCancel: _cancel\n                });\n                break;\n            case Web3Method_1.Web3Method.submitEthereumTransaction:\n                this.ui.submitEthereumTransaction({\n                    request,\n                    onSuccess,\n                    onCancel: _cancel\n                });\n                break;\n            case Web3Method_1.Web3Method.ethereumAddressFromSignedMessage:\n                this.ui.ethereumAddressFromSignedMessage({\n                    request,\n                    onSuccess\n                });\n                break;\n            default:\n                _cancel();\n                break;\n        }\n    }\n}\nWalletLinkRelay.accountRequestCallbackIds = new Set();\n__decorate([\n    bind_decorator_1.default\n], WalletLinkRelay.prototype, \"resetAndReload\", null);\n__decorate([\n    bind_decorator_1.default\n], WalletLinkRelay.prototype, \"handleIncomingEvent\", null);\nexports.WalletLinkRelay = WalletLinkRelay;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WalletLinkRelayAbstract = exports.APP_VERSION_KEY = exports.LOCAL_STORAGE_ADDRESSES_KEY = exports.WALLET_USER_NAME_KEY = void 0;\nconst eth_rpc_errors_1 = require(\"eth-rpc-errors\");\nexports.WALLET_USER_NAME_KEY = \"walletUsername\";\nexports.LOCAL_STORAGE_ADDRESSES_KEY = \"Addresses\";\nexports.APP_VERSION_KEY = \"AppVersion\";\nclass WalletLinkRelayAbstract {\n    async makeEthereumJSONRPCRequest(request, jsonRpcUrl) {\n        if (!jsonRpcUrl)\n            throw new Error(\"Error: No jsonRpcUrl provided\");\n        return window\n            .fetch(jsonRpcUrl, {\n            method: \"POST\",\n            body: JSON.stringify(request),\n            mode: \"cors\",\n            headers: { \"Content-Type\": \"application/json\" }\n        })\n            .then(res => res.json())\n            .then(json => {\n            if (!json) {\n                throw eth_rpc_errors_1.ethErrors.rpc.parse({});\n            }\n            const response = json;\n            const { error } = response;\n            if (error) {\n                throw (0, eth_rpc_errors_1.serializeError)(error);\n            }\n            return response;\n        });\n    }\n}\nexports.WalletLinkRelayAbstract = WalletLinkRelayAbstract;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WalletLinkRelayEventManager = void 0;\nconst util_1 = require(\"../util\");\nclass WalletLinkRelayEventManager {\n    constructor() {\n        this._nextRequestId = 0;\n        this.callbacks = new Map();\n    }\n    makeRequestId() {\n        // max nextId == max int32 for compatibility with mobile\n        this._nextRequestId = (this._nextRequestId + 1) % 0x7fffffff;\n        const id = this._nextRequestId;\n        const idStr = (0, util_1.prepend0x)(id.toString(16));\n        // unlikely that this will ever be an issue, but just to be safe\n        const callback = this.callbacks.get(idStr);\n        if (callback) {\n            this.callbacks.delete(idStr);\n        }\n        return id;\n    }\n}\nexports.WalletLinkRelayEventManager = WalletLinkRelayEventManager;\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Web3Method = void 0;\nvar Web3Method;\n(function (Web3Method) {\n    Web3Method[\"requestEthereumAccounts\"] = \"requestEthereumAccounts\";\n    Web3Method[\"signEthereumMessage\"] = \"signEthereumMessage\";\n    Web3Method[\"signEthereumTransaction\"] = \"signEthereumTransaction\";\n    Web3Method[\"submitEthereumTransaction\"] = \"submitEthereumTransaction\";\n    Web3Method[\"ethereumAddressFromSignedMessage\"] = \"ethereumAddressFromSignedMessage\";\n    Web3Method[\"scanQRCode\"] = \"scanQRCode\";\n    Web3Method[\"generic\"] = \"generic\";\n    Web3Method[\"childRequestEthereumAccounts\"] = \"childRequestEthereumAccounts\";\n    Web3Method[\"addEthereumChain\"] = \"addEthereumChain\";\n    Web3Method[\"switchEthereumChain\"] = \"switchEthereumChain\";\n    Web3Method[\"makeEthereumJSONRPCRequest\"] = \"makeEthereumJSONRPCRequest\";\n    Web3Method[\"watchAsset\"] = \"watchAsset\";\n})(Web3Method = exports.Web3Method || (exports.Web3Method = {}));\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Web3RequestCanceledMessage = void 0;\nconst RelayMessage_1 = require(\"./RelayMessage\");\nfunction Web3RequestCanceledMessage(id) {\n    return { type: RelayMessage_1.RelayMessageType.WEB3_REQUEST_CANCELED, id };\n}\nexports.Web3RequestCanceledMessage = Web3RequestCanceledMessage;\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Web3RequestMessage = void 0;\nconst RelayMessage_1 = require(\"./RelayMessage\");\nfunction Web3RequestMessage(params) {\n    return Object.assign({ type: RelayMessage_1.RelayMessageType.WEB3_REQUEST }, params);\n}\nexports.Web3RequestMessage = Web3RequestMessage;\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EthereumAddressFromSignedMessageResponse = exports.SubmitEthereumTransactionResponse = exports.SignEthereumTransactionResponse = exports.SignEthereumMessageResponse = exports.isRequestEthereumAccountsResponse = exports.WatchAssetReponse = exports.RequestEthereumAccountsResponse = exports.SwitchEthereumChainResponse = exports.AddEthereumChainResponse = exports.ErrorResponse = void 0;\nconst Web3Method_1 = require(\"./Web3Method\");\nfunction ErrorResponse(method, errorMessage, errorCode) {\n    return { method, errorMessage, errorCode };\n}\nexports.ErrorResponse = ErrorResponse;\nfunction AddEthereumChainResponse(addResponse) {\n    return {\n        method: Web3Method_1.Web3Method.addEthereumChain,\n        result: addResponse\n    };\n}\nexports.AddEthereumChainResponse = AddEthereumChainResponse;\nfunction SwitchEthereumChainResponse(switchResponse) {\n    return {\n        method: Web3Method_1.Web3Method.switchEthereumChain,\n        result: switchResponse\n    };\n}\nexports.SwitchEthereumChainResponse = SwitchEthereumChainResponse;\nfunction RequestEthereumAccountsResponse(addresses) {\n    return { method: Web3Method_1.Web3Method.requestEthereumAccounts, result: addresses };\n}\nexports.RequestEthereumAccountsResponse = RequestEthereumAccountsResponse;\nfunction WatchAssetReponse(success) {\n    return { method: Web3Method_1.Web3Method.watchAsset, result: success };\n}\nexports.WatchAssetReponse = WatchAssetReponse;\nfunction isRequestEthereumAccountsResponse(res) {\n    return res && res.method === Web3Method_1.Web3Method.requestEthereumAccounts;\n}\nexports.isRequestEthereumAccountsResponse = isRequestEthereumAccountsResponse;\nfunction SignEthereumMessageResponse(signature) {\n    return { method: Web3Method_1.Web3Method.signEthereumMessage, result: signature };\n}\nexports.SignEthereumMessageResponse = SignEthereumMessageResponse;\nfunction SignEthereumTransactionResponse(signedData) {\n    return { method: Web3Method_1.Web3Method.signEthereumTransaction, result: signedData };\n}\nexports.SignEthereumTransactionResponse = SignEthereumTransactionResponse;\nfunction SubmitEthereumTransactionResponse(txHash) {\n    return { method: Web3Method_1.Web3Method.submitEthereumTransaction, result: txHash };\n}\nexports.SubmitEthereumTransactionResponse = SubmitEthereumTransactionResponse;\nfunction EthereumAddressFromSignedMessageResponse(address) {\n    return {\n        method: Web3Method_1.Web3Method.ethereumAddressFromSignedMessage,\n        result: address\n    };\n}\nexports.EthereumAddressFromSignedMessageResponse = EthereumAddressFromSignedMessageResponse;\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isWeb3ResponseMessage = exports.Web3ResponseMessage = void 0;\nconst RelayMessage_1 = require(\"./RelayMessage\");\nfunction Web3ResponseMessage(params) {\n    return Object.assign({ type: RelayMessage_1.RelayMessageType.WEB3_RESPONSE }, params);\n}\nexports.Web3ResponseMessage = Web3ResponseMessage;\nfunction isWeb3ResponseMessage(msg) {\n    return msg && msg.type === RelayMessage_1.RelayMessageType.WEB3_RESPONSE;\n}\nexports.isWeb3ResponseMessage = isWeb3ResponseMessage;\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.decrypt = exports.encrypt = void 0;\nconst rxjs_1 = require(\"rxjs\");\nconst util_1 = require(\"../util\");\n/**\n *\n * @param plainText string to be encrypted\n * @param secret hex representation of 32-byte secret\n * returns hex string representation of bytes in the order: initialization vector (iv),\n * auth tag, encrypted plaintext. IV is 12 bytes. Auth tag is 16 bytes. Remaining bytes are the\n * encrypted plainText.\n */\nasync function encrypt(plainText, secret) {\n    if (secret.length !== 64)\n        throw Error(`secret must be 256 bits`);\n    const ivBytes = crypto.getRandomValues(new Uint8Array(12));\n    const secretKey = await crypto.subtle.importKey(\"raw\", (0, util_1.hexStringToUint8Array)(secret), { \"name\": \"aes-gcm\" }, false, [\"encrypt\", \"decrypt\"]);\n    const enc = new TextEncoder();\n    // Will return encrypted plainText with auth tag (ie MAC or checksum) appended at the end\n    const encryptedResult = await window.crypto.subtle.encrypt({\n        name: \"AES-GCM\",\n        iv: ivBytes\n    }, secretKey, enc.encode(plainText));\n    const tagLength = 16;\n    const authTag = encryptedResult.slice(encryptedResult.byteLength - tagLength);\n    const encryptedPlaintext = encryptedResult.slice(0, encryptedResult.byteLength - tagLength);\n    const authTagBytes = new Uint8Array(authTag);\n    const encryptedPlaintextBytes = new Uint8Array(encryptedPlaintext);\n    const concatted = new Uint8Array([...ivBytes, ...authTagBytes, ...encryptedPlaintextBytes]);\n    return (0, util_1.uint8ArrayToHex)(concatted);\n}\nexports.encrypt = encrypt;\n/**\n *\n * @param cipherText hex string representation of bytes in the order: initialization vector (iv),\n * auth tag, encrypted plaintext. IV is 12 bytes. Auth tag is 16 bytes.\n * @param secret hex string representation of 32-byte secret\n */\nfunction decrypt(cipherText, secret) {\n    if (secret.length !== 64)\n        throw Error(`secret must be 256 bits`);\n    return new rxjs_1.Observable((subscriber) => {\n        void (async function () {\n            const secretKey = await crypto.subtle.importKey(\"raw\", (0, util_1.hexStringToUint8Array)(secret), { \"name\": \"aes-gcm\" }, false, [\"encrypt\", \"decrypt\"]);\n            const encrypted = (0, util_1.hexStringToUint8Array)(cipherText);\n            const ivBytes = encrypted.slice(0, 12);\n            const authTagBytes = encrypted.slice(12, 28);\n            const encryptedPlaintextBytes = encrypted.slice(28);\n            const concattedBytes = new Uint8Array([...encryptedPlaintextBytes, ...authTagBytes]);\n            const algo = {\n                name: \"AES-GCM\",\n                iv: new Uint8Array(ivBytes)\n            };\n            try {\n                const decrypted = await window.crypto.subtle.decrypt(algo, secretKey, concattedBytes);\n                const decoder = new TextDecoder();\n                subscriber.next(decoder.decode(decrypted));\n                subscriber.complete();\n            }\n            catch (err) {\n                subscriber.error(err);\n            }\n        })();\n    });\n}\nexports.decrypt = decrypt;\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RegExpString = exports.IntNumber = exports.BigIntString = exports.AddressString = exports.HexString = exports.OpaqueType = void 0;\nfunction OpaqueType() {\n    return (value) => value;\n}\nexports.OpaqueType = OpaqueType;\nexports.HexString = OpaqueType();\nexports.AddressString = OpaqueType();\nexports.BigIntString = OpaqueType();\nfunction IntNumber(num) {\n    return Math.floor(num);\n}\nexports.IntNumber = IntNumber;\nexports.RegExpString = OpaqueType();\n","\"use strict\";\n// Copyright (c) 2018-2020 WalletLink.org <https://www.walletlink.org/>\n// Copyright (c) 2018-2020 Coinbase, Inc. <https://www.coinbase.com/>\n// Licensed under the Apache License, version 2.0\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getFavicon = exports.range = exports.isBigNumber = exports.ensureParsedJSONObject = exports.ensureBN = exports.ensureRegExpString = exports.ensureIntNumber = exports.ensureBuffer = exports.ensureAddressString = exports.ensureEvenLengthHexString = exports.ensureHexString = exports.isHexString = exports.prepend0x = exports.strip0x = exports.has0xPrefix = exports.hexStringFromIntNumber = exports.intNumberFromHexString = exports.bigIntStringFromBN = exports.hexStringFromBuffer = exports.hexStringToUint8Array = exports.uint8ArrayToHex = exports.randomBytesHex = void 0;\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\nconst types_1 = require(\"./types\");\nconst INT_STRING_REGEX = /^[0-9]*$/;\nconst HEXADECIMAL_STRING_REGEX = /^[a-f0-9]*$/;\n/**\n * @param length number of bytes\n */\nfunction randomBytesHex(length) {\n    return uint8ArrayToHex(crypto.getRandomValues(new Uint8Array(length)));\n}\nexports.randomBytesHex = randomBytesHex;\nfunction uint8ArrayToHex(value) {\n    return [...value].map(b => b.toString(16).padStart(2, '0')).join('');\n}\nexports.uint8ArrayToHex = uint8ArrayToHex;\nfunction hexStringToUint8Array(hexString) {\n    return new Uint8Array(hexString.match(/.{1,2}/g).map(byte => parseInt(byte, 16)));\n}\nexports.hexStringToUint8Array = hexStringToUint8Array;\nfunction hexStringFromBuffer(buf, includePrefix = false) {\n    const hex = buf.toString(\"hex\");\n    return (0, types_1.HexString)(includePrefix ? \"0x\" + hex : hex);\n}\nexports.hexStringFromBuffer = hexStringFromBuffer;\nfunction bigIntStringFromBN(bn) {\n    return (0, types_1.BigIntString)(bn.toString(10));\n}\nexports.bigIntStringFromBN = bigIntStringFromBN;\nfunction intNumberFromHexString(hex) {\n    return (0, types_1.IntNumber)(new bn_js_1.default(ensureEvenLengthHexString(hex, false), 16).toNumber());\n}\nexports.intNumberFromHexString = intNumberFromHexString;\nfunction hexStringFromIntNumber(num) {\n    return (0, types_1.HexString)(\"0x\" + new bn_js_1.default(num).toString(16));\n}\nexports.hexStringFromIntNumber = hexStringFromIntNumber;\nfunction has0xPrefix(str) {\n    return str.startsWith(\"0x\") || str.startsWith(\"0X\");\n}\nexports.has0xPrefix = has0xPrefix;\nfunction strip0x(hex) {\n    if (has0xPrefix(hex)) {\n        return hex.slice(2);\n    }\n    return hex;\n}\nexports.strip0x = strip0x;\nfunction prepend0x(hex) {\n    if (has0xPrefix(hex)) {\n        return \"0x\" + hex.slice(2);\n    }\n    return \"0x\" + hex;\n}\nexports.prepend0x = prepend0x;\nfunction isHexString(hex) {\n    if (typeof hex !== \"string\") {\n        return false;\n    }\n    const s = strip0x(hex).toLowerCase();\n    return HEXADECIMAL_STRING_REGEX.test(s);\n}\nexports.isHexString = isHexString;\nfunction ensureHexString(hex, includePrefix = false) {\n    if (typeof hex === \"string\") {\n        const s = strip0x(hex).toLowerCase();\n        if (HEXADECIMAL_STRING_REGEX.test(s)) {\n            return (0, types_1.HexString)(includePrefix ? \"0x\" + s : s);\n        }\n    }\n    throw new Error(`\"${String(hex)}\" is not a hexadecimal string`);\n}\nexports.ensureHexString = ensureHexString;\nfunction ensureEvenLengthHexString(hex, includePrefix = false) {\n    let h = ensureHexString(hex, false);\n    if (h.length % 2 === 1) {\n        h = (0, types_1.HexString)(\"0\" + h);\n    }\n    return includePrefix ? (0, types_1.HexString)(\"0x\" + h) : h;\n}\nexports.ensureEvenLengthHexString = ensureEvenLengthHexString;\nfunction ensureAddressString(str) {\n    if (typeof str === \"string\") {\n        const s = strip0x(str).toLowerCase();\n        if (isHexString(s) && s.length === 40) {\n            return (0, types_1.AddressString)(prepend0x(s));\n        }\n    }\n    throw new Error(`Invalid Ethereum address: ${String(str)}`);\n}\nexports.ensureAddressString = ensureAddressString;\nfunction ensureBuffer(str) {\n    if (Buffer.isBuffer(str)) {\n        return str;\n    }\n    if (typeof str === \"string\") {\n        if (isHexString(str)) {\n            const s = ensureEvenLengthHexString(str, false);\n            return Buffer.from(s, \"hex\");\n        }\n        else {\n            return Buffer.from(str, \"utf8\");\n        }\n    }\n    throw new Error(`Not binary data: ${String(str)}`);\n}\nexports.ensureBuffer = ensureBuffer;\nfunction ensureIntNumber(num) {\n    if (typeof num === \"number\" && Number.isInteger(num)) {\n        return (0, types_1.IntNumber)(num);\n    }\n    if (typeof num === \"string\") {\n        if (INT_STRING_REGEX.test(num)) {\n            return (0, types_1.IntNumber)(Number(num));\n        }\n        if (isHexString(num)) {\n            return (0, types_1.IntNumber)(new bn_js_1.default(ensureEvenLengthHexString(num, false), 16).toNumber());\n        }\n    }\n    throw new Error(`Not an integer: ${String(num)}`);\n}\nexports.ensureIntNumber = ensureIntNumber;\nfunction ensureRegExpString(regExp) {\n    if (regExp instanceof RegExp) {\n        return (0, types_1.RegExpString)(regExp.toString());\n    }\n    throw new Error(`Not a RegExp: ${String(regExp)}`);\n}\nexports.ensureRegExpString = ensureRegExpString;\nfunction ensureBN(val) {\n    if (val !== null && (bn_js_1.default.isBN(val) || isBigNumber(val))) {\n        return new bn_js_1.default(val.toString(10), 10);\n    }\n    if (typeof val === \"number\") {\n        return new bn_js_1.default(ensureIntNumber(val));\n    }\n    if (typeof val === \"string\") {\n        if (INT_STRING_REGEX.test(val)) {\n            return new bn_js_1.default(val, 10);\n        }\n        if (isHexString(val)) {\n            return new bn_js_1.default(ensureEvenLengthHexString(val, false), 16);\n        }\n    }\n    throw new Error(`Not an integer: ${String(val)}`);\n}\nexports.ensureBN = ensureBN;\nfunction ensureParsedJSONObject(val) {\n    if (typeof val === \"string\") {\n        return JSON.parse(val);\n    }\n    if (typeof val === \"object\") {\n        return val;\n    }\n    throw new Error(`Not a JSON string or an object: ${String(val)}`);\n}\nexports.ensureParsedJSONObject = ensureParsedJSONObject;\nfunction isBigNumber(val) {\n    if (val == null || typeof val.constructor !== \"function\") {\n        return false;\n    }\n    const { constructor } = val;\n    return (typeof constructor.config === \"function\" &&\n        typeof constructor.EUCLID === \"number\");\n}\nexports.isBigNumber = isBigNumber;\nfunction range(start, stop) {\n    return Array.from({ length: stop - start }, (_, i) => start + i);\n}\nexports.range = range;\nfunction getFavicon() {\n    const el = document.querySelector('link[sizes=\"192x192\"]') ||\n        document.querySelector('link[sizes=\"180x180\"]') ||\n        document.querySelector('link[rel=\"icon\"]') ||\n        document.querySelector('link[rel=\"shortcut icon\"]');\n    const { protocol, host } = document.location;\n    const href = el ? el.getAttribute(\"href\") : null;\n    if (!href || href.startsWith(\"javascript:\")) {\n        return null;\n    }\n    if (href.startsWith(\"http://\") ||\n        href.startsWith(\"https://\") ||\n        href.startsWith(\"data:\")) {\n        return href;\n    }\n    if (href.startsWith(\"//\")) {\n        return protocol + href;\n    }\n    return `${protocol}//${host}${href}`;\n}\nexports.getFavicon = getFavicon;\n","// Extracted from https://github.com/ethereumjs/ethereumjs-abi and stripped out irrelevant code\n// Original code licensed under the MIT License - Copyright (c) 2015 Alex Beregszaszi\n\nconst util = require('./util')\nconst BN = require('bn.js')\n\n// Convert from short to canonical names\n// FIXME: optimise or make this nicer?\nfunction elementaryName (name) {\n  if (name.startsWith('int[')) {\n    return 'int256' + name.slice(3)\n  } else if (name === 'int') {\n    return 'int256'\n  } else if (name.startsWith('uint[')) {\n    return 'uint256' + name.slice(4)\n  } else if (name === 'uint') {\n    return 'uint256'\n  } else if (name.startsWith('fixed[')) {\n    return 'fixed128x128' + name.slice(5)\n  } else if (name === 'fixed') {\n    return 'fixed128x128'\n  } else if (name.startsWith('ufixed[')) {\n    return 'ufixed128x128' + name.slice(6)\n  } else if (name === 'ufixed') {\n    return 'ufixed128x128'\n  }\n  return name\n}\n\n// Parse N from type<N>\nfunction parseTypeN (type) {\n  return parseInt(/^\\D+(\\d+)$/.exec(type)[1], 10)\n}\n\n// Parse N,M from type<N>x<M>\nfunction parseTypeNxM (type) {\n  var tmp = /^\\D+(\\d+)x(\\d+)$/.exec(type)\n  return [ parseInt(tmp[1], 10), parseInt(tmp[2], 10) ]\n}\n\n// Parse N in type[<N>] where \"type\" can itself be an array type.\nfunction parseTypeArray (type) {\n  var tmp = type.match(/(.*)\\[(.*?)\\]$/)\n  if (tmp) {\n    return tmp[2] === '' ? 'dynamic' : parseInt(tmp[2], 10)\n  }\n  return null\n}\n\nfunction parseNumber (arg) {\n  var type = typeof arg\n  if (type === 'string') {\n    if (util.isHexString(arg)) {\n      return new BN(util.stripHexPrefix(arg), 16)\n    } else {\n      return new BN(arg, 10)\n    }\n  } else if (type === 'number') {\n    return new BN(arg)\n  } else if (arg.toArray) {\n    // assume this is a BN for the moment, replace with BN.isBN soon\n    return arg\n  } else {\n    throw new Error('Argument is not a number')\n  }\n}\n\n// Encodes a single item (can be dynamic array)\n// @returns: Buffer\nfunction encodeSingle (type, arg) {\n  var size, num, ret, i\n\n  if (type === 'address') {\n    return encodeSingle('uint160', parseNumber(arg))\n  } else if (type === 'bool') {\n    return encodeSingle('uint8', arg ? 1 : 0)\n  } else if (type === 'string') {\n    return encodeSingle('bytes', new Buffer(arg, 'utf8'))\n  } else if (isArray(type)) {\n    // this part handles fixed-length ([2]) and variable length ([]) arrays\n    // NOTE: we catch here all calls to arrays, that simplifies the rest\n    if (typeof arg.length === 'undefined') {\n      throw new Error('Not an array?')\n    }\n    size = parseTypeArray(type)\n    if (size !== 'dynamic' && size !== 0 && arg.length > size) {\n      throw new Error('Elements exceed array size: ' + size)\n    }\n    ret = []\n    type = type.slice(0, type.lastIndexOf('['))\n    if (typeof arg === 'string') {\n      arg = JSON.parse(arg)\n    }\n    for (i in arg) {\n      ret.push(encodeSingle(type, arg[i]))\n    }\n    if (size === 'dynamic') {\n      var length = encodeSingle('uint256', arg.length)\n      ret.unshift(length)\n    }\n    return Buffer.concat(ret)\n  } else if (type === 'bytes') {\n    arg = new Buffer(arg)\n\n    ret = Buffer.concat([ encodeSingle('uint256', arg.length), arg ])\n\n    if ((arg.length % 32) !== 0) {\n      ret = Buffer.concat([ ret, util.zeros(32 - (arg.length % 32)) ])\n    }\n\n    return ret\n  } else if (type.startsWith('bytes')) {\n    size = parseTypeN(type)\n    if (size < 1 || size > 32) {\n      throw new Error('Invalid bytes<N> width: ' + size)\n    }\n\n    return util.setLengthRight(arg, 32)\n  } else if (type.startsWith('uint')) {\n    size = parseTypeN(type)\n    if ((size % 8) || (size < 8) || (size > 256)) {\n      throw new Error('Invalid uint<N> width: ' + size)\n    }\n\n    num = parseNumber(arg)\n    if (num.bitLength() > size) {\n      throw new Error('Supplied uint exceeds width: ' + size + ' vs ' + num.bitLength())\n    }\n\n    if (num < 0) {\n      throw new Error('Supplied uint is negative')\n    }\n\n    return num.toArrayLike(Buffer, 'be', 32)\n  } else if (type.startsWith('int')) {\n    size = parseTypeN(type)\n    if ((size % 8) || (size < 8) || (size > 256)) {\n      throw new Error('Invalid int<N> width: ' + size)\n    }\n\n    num = parseNumber(arg)\n    if (num.bitLength() > size) {\n      throw new Error('Supplied int exceeds width: ' + size + ' vs ' + num.bitLength())\n    }\n\n    return num.toTwos(256).toArrayLike(Buffer, 'be', 32)\n  } else if (type.startsWith('ufixed')) {\n    size = parseTypeNxM(type)\n\n    num = parseNumber(arg)\n\n    if (num < 0) {\n      throw new Error('Supplied ufixed is negative')\n    }\n\n    return encodeSingle('uint256', num.mul(new BN(2).pow(new BN(size[1]))))\n  } else if (type.startsWith('fixed')) {\n    size = parseTypeNxM(type)\n\n    return encodeSingle('int256', parseNumber(arg).mul(new BN(2).pow(new BN(size[1]))))\n  }\n\n  throw new Error('Unsupported or invalid type: ' + type)\n}\n\n// Is a type dynamic?\nfunction isDynamic (type) {\n  // FIXME: handle all types? I don't think anything is missing now\n  return (type === 'string') || (type === 'bytes') || (parseTypeArray(type) === 'dynamic')\n}\n\n// Is a type an array?\nfunction isArray (type) {\n  return type.lastIndexOf(']') === type.length - 1\n}\n\n// Encode a method/event with arguments\n// @types an array of string type names\n// @args  an array of the appropriate values\nfunction rawEncode (types, values) {\n  var output = []\n  var data = []\n\n  var headLength = 32 * types.length\n\n  for (var i in types) {\n    var type = elementaryName(types[i])\n    var value = values[i]\n    var cur = encodeSingle(type, value)\n\n    // Use the head/tail method for storing dynamic data\n    if (isDynamic(type)) {\n      output.push(encodeSingle('uint256', headLength))\n      data.push(cur)\n      headLength += cur.length\n    } else {\n      output.push(cur)\n    }\n  }\n\n  return Buffer.concat(output.concat(data))\n}\n\nfunction solidityPack (types, values) {\n  if (types.length !== values.length) {\n    throw new Error('Number of types are not matching the values')\n  }\n\n  var size, num\n  var ret = []\n\n  for (var i = 0; i < types.length; i++) {\n    var type = elementaryName(types[i])\n    var value = values[i]\n\n    if (type === 'bytes') {\n      ret.push(value)\n    } else if (type === 'string') {\n      ret.push(new Buffer(value, 'utf8'))\n    } else if (type === 'bool') {\n      ret.push(new Buffer(value ? '01' : '00', 'hex'))\n    } else if (type === 'address') {\n      ret.push(util.setLength(value, 20))\n    } else if (type.startsWith('bytes')) {\n      size = parseTypeN(type)\n      if (size < 1 || size > 32) {\n        throw new Error('Invalid bytes<N> width: ' + size)\n      }\n\n      ret.push(util.setLengthRight(value, size))\n    } else if (type.startsWith('uint')) {\n      size = parseTypeN(type)\n      if ((size % 8) || (size < 8) || (size > 256)) {\n        throw new Error('Invalid uint<N> width: ' + size)\n      }\n\n      num = parseNumber(value)\n      if (num.bitLength() > size) {\n        throw new Error('Supplied uint exceeds width: ' + size + ' vs ' + num.bitLength())\n      }\n\n      ret.push(num.toArrayLike(Buffer, 'be', size / 8))\n    } else if (type.startsWith('int')) {\n      size = parseTypeN(type)\n      if ((size % 8) || (size < 8) || (size > 256)) {\n        throw new Error('Invalid int<N> width: ' + size)\n      }\n\n      num = parseNumber(value)\n      if (num.bitLength() > size) {\n        throw new Error('Supplied int exceeds width: ' + size + ' vs ' + num.bitLength())\n      }\n\n      ret.push(num.toTwos(size).toArrayLike(Buffer, 'be', size / 8))\n    } else {\n      // FIXME: support all other types\n      throw new Error('Unsupported or invalid type: ' + type)\n    }\n  }\n\n  return Buffer.concat(ret)\n}\n\nfunction soliditySHA3 (types, values) {\n  return util.keccak(solidityPack(types, values))\n}\n\nmodule.exports = {\n  rawEncode,\n  solidityPack,\n  soliditySHA3\n}\n","const util = require('./util')\nconst abi = require('./abi')\n\nconst TYPED_MESSAGE_SCHEMA = {\n  type: 'object',\n  properties: {\n    types: {\n      type: 'object',\n      additionalProperties: {\n        type: 'array',\n        items: {\n          type: 'object',\n          properties: {\n            name: {type: 'string'},\n            type: {type: 'string'},\n          },\n          required: ['name', 'type'],\n        },\n      },\n    },\n    primaryType: {type: 'string'},\n    domain: {type: 'object'},\n    message: {type: 'object'},\n  },\n  required: ['types', 'primaryType', 'domain', 'message'],\n}\n\n/**\n * A collection of utility functions used for signing typed data\n */\nconst TypedDataUtils = {\n  /**\n   * Encodes an object by encoding and concatenating each of its members\n   *\n   * @param {string} primaryType - Root type\n   * @param {Object} data - Object to encode\n   * @param {Object} types - Type definitions\n   * @returns {string} - Encoded representation of an object\n   */\n  encodeData (primaryType, data, types, useV4 = true) {\n    const encodedTypes = ['bytes32']\n    const encodedValues = [this.hashType(primaryType, types)]\n\n    if(useV4) {\n      const encodeField = (name, type, value) => {\n        if (types[type] !== undefined) {\n          return ['bytes32', value == null ?\n            '0x0000000000000000000000000000000000000000000000000000000000000000' :\n            util.keccak(this.encodeData(type, value, types, useV4))]\n        }\n\n        if(value === undefined)\n          throw new Error(`missing value for field ${name} of type ${type}`)\n\n        if (type === 'bytes') {\n          return ['bytes32', util.keccak(value)]\n        }\n\n        if (type === 'string') {\n          // convert string to buffer - prevents ethUtil from interpreting strings like '0xabcd' as hex\n          if (typeof value === 'string') {\n            value = Buffer.from(value, 'utf8')\n          }\n          return ['bytes32', util.keccak(value)]\n        }\n\n        if (type.lastIndexOf(']') === type.length - 1) {\n          const parsedType = type.slice(0, type.lastIndexOf('['))\n          const typeValuePairs = value.map(item =>\n            encodeField(name, parsedType, item))\n          return ['bytes32', util.keccak(abi.rawEncode(\n            typeValuePairs.map(([type]) => type),\n            typeValuePairs.map(([, value]) => value),\n          ))]\n        }\n\n        return [type, value]\n      }\n\n      for (const field of types[primaryType]) {\n        const [type, value] = encodeField(field.name, field.type, data[field.name])\n        encodedTypes.push(type)\n        encodedValues.push(value)\n      }\n    } else {\n      for (const field of types[primaryType]) {\n        let value = data[field.name]\n        if (value !== undefined) {\n          if (field.type === 'bytes') {\n            encodedTypes.push('bytes32')\n            value = util.keccak(value)\n            encodedValues.push(value)\n          } else if (field.type === 'string') {\n            encodedTypes.push('bytes32')\n            // convert string to buffer - prevents ethUtil from interpreting strings like '0xabcd' as hex\n            if (typeof value === 'string') {\n              value = Buffer.from(value, 'utf8')\n            }\n            value = util.keccak(value)\n            encodedValues.push(value)\n          } else if (types[field.type] !== undefined) {\n            encodedTypes.push('bytes32')\n            value = util.keccak(this.encodeData(field.type, value, types, useV4))\n            encodedValues.push(value)\n          } else if (field.type.lastIndexOf(']') === field.type.length - 1) {\n            throw new Error('Arrays currently unimplemented in encodeData')\n          } else {\n            encodedTypes.push(field.type)\n            encodedValues.push(value)\n          }\n        }\n      }\n    }\n\n    return abi.rawEncode(encodedTypes, encodedValues)\n  },\n\n  /**\n   * Encodes the type of an object by encoding a comma delimited list of its members\n   *\n   * @param {string} primaryType - Root type to encode\n   * @param {Object} types - Type definitions\n   * @returns {string} - Encoded representation of the type of an object\n   */\n  encodeType (primaryType, types) {\n    let result = ''\n    let deps = this.findTypeDependencies(primaryType, types).filter(dep => dep !== primaryType)\n    deps = [primaryType].concat(deps.sort())\n    for (const type of deps) {\n      const children = types[type]\n      if (!children) {\n        throw new Error('No type definition specified: ' + type)\n      }\n      result += type + '(' + types[type].map(({ name, type }) => type + ' ' + name).join(',') + ')'\n    }\n    return result\n  },\n\n  /**\n   * Finds all types within a type defintion object\n   *\n   * @param {string} primaryType - Root type\n   * @param {Object} types - Type definitions\n   * @param {Array} results - current set of accumulated types\n   * @returns {Array} - Set of all types found in the type definition\n   */\n  findTypeDependencies (primaryType, types, results = []) {\n    primaryType = primaryType.match(/^\\w*/)[0]\n    if (results.includes(primaryType) || types[primaryType] === undefined) { return results }\n    results.push(primaryType)\n    for (const field of types[primaryType]) {\n      for (const dep of this.findTypeDependencies(field.type, types, results)) {\n        !results.includes(dep) && results.push(dep)\n      }\n    }\n    return results\n  },\n\n  /**\n   * Hashes an object\n   *\n   * @param {string} primaryType - Root type\n   * @param {Object} data - Object to hash\n   * @param {Object} types - Type definitions\n   * @returns {string} - Hash of an object\n   */\n  hashStruct (primaryType, data, types, useV4 = true) {\n    return util.keccak(this.encodeData(primaryType, data, types, useV4))\n  },\n\n  /**\n   * Hashes the type of an object\n   *\n   * @param {string} primaryType - Root type to hash\n   * @param {Object} types - Type definitions\n   * @returns {string} - Hash of an object\n   */\n  hashType (primaryType, types) {\n    return util.keccak(this.encodeType(primaryType, types))\n  },\n\n  /**\n   * Removes properties from a message object that are not defined per EIP-712\n   *\n   * @param {Object} data - typed message object\n   * @returns {Object} - typed message object with only allowed fields\n   */\n  sanitizeData (data) {\n    const sanitizedData = {}\n    for (const key in TYPED_MESSAGE_SCHEMA.properties) {\n      data[key] && (sanitizedData[key] = data[key])\n    }\n    if (sanitizedData.types) {\n      sanitizedData.types = Object.assign({ EIP712Domain: [] }, sanitizedData.types)\n    }\n    return sanitizedData\n  },\n\n  /**\n   * Returns the hash of a typed message as per EIP-712 for signing\n   *\n   * @param {Object} typedData - Types message data to sign\n   * @returns {string} - sha3 hash for signing\n   */\n  hash (typedData, useV4 = true) {\n    const sanitizedData = this.sanitizeData(typedData)\n    const parts = [Buffer.from('1901', 'hex')]\n    parts.push(this.hashStruct('EIP712Domain', sanitizedData.domain, sanitizedData.types, useV4))\n    if (sanitizedData.primaryType !== 'EIP712Domain') {\n      parts.push(this.hashStruct(sanitizedData.primaryType, sanitizedData.message, sanitizedData.types, useV4))\n    }\n    return util.keccak(Buffer.concat(parts))\n  },\n}\n\nmodule.exports = {\n  TYPED_MESSAGE_SCHEMA,\n  TypedDataUtils,\n\n  hashForSignTypedDataLegacy: function (msgParams) {\n    return typedSignatureHashLegacy(msgParams.data)\n  },\n\n  hashForSignTypedData_v3: function (msgParams) {\n    return TypedDataUtils.hash(msgParams.data, false)\n  },\n\n  hashForSignTypedData_v4: function (msgParams) {\n    return TypedDataUtils.hash(msgParams.data)\n  },\n}\n\n/**\n * @param typedData - Array of data along with types, as per EIP712.\n * @returns Buffer\n */\nfunction typedSignatureHashLegacy(typedData) {\n  const error = new Error('Expect argument to be non-empty array')\n  if (typeof typedData !== 'object' || !typedData.length) throw error\n\n  const data = typedData.map(function (e) {\n    return e.type === 'bytes' ? util.toBuffer(e.value) : e.value\n  })\n  const types = typedData.map(function (e) { return e.type })\n  const schema = typedData.map(function (e) {\n    if (!e.name) throw error\n    return e.type + ' ' + e.name\n  })\n\n  return abi.soliditySHA3(\n    ['bytes32', 'bytes32'],\n    [\n      abi.soliditySHA3(new Array(typedData.length).fill('string'), schema),\n      abi.soliditySHA3(types, data)\n    ]\n  )\n}\n","// Extracted from https://github.com/ethereumjs/ethereumjs-util and stripped out irrelevant code\n// Original code licensed under the Mozilla Public License Version 2.0\n\nconst createKeccakHash = require('keccak/js')\nconst BN = require('bn.js')\n\n/**\n * Returns a buffer filled with 0s\n * @method zeros\n * @param {Number} bytes  the number of bytes the buffer should be\n * @return {Buffer}\n */\nfunction zeros (bytes) {\n  return Buffer.allocUnsafe(bytes).fill(0)\n}\n\n/**\n * Left Pads an `Array` or `Buffer` with leading zeros till it has `length` bytes.\n * Or it truncates the beginning if it exceeds.\n * @method setLength\n * @param {Buffer|Array} msg the value to pad\n * @param {Number} length the number of bytes the output should be\n * @param {Boolean} [right=false] whether to start padding form the left or right\n * @return {Buffer|Array}\n */\nfunction setLength (msg, length, right) {\n  const buf = zeros(length)\n  msg = toBuffer(msg)\n  if (right) {\n    if (msg.length < length) {\n      msg.copy(buf)\n      return buf\n    }\n    return msg.slice(0, length)\n  } else {\n    if (msg.length < length) {\n      msg.copy(buf, length - msg.length)\n      return buf\n    }\n    return msg.slice(-length)\n  }\n}\n\n/**\n * Right Pads an `Array` or `Buffer` with leading zeros till it has `length` bytes.\n * Or it truncates the beginning if it exceeds.\n * @param {Buffer|Array} msg the value to pad\n * @param {Number} length the number of bytes the output should be\n * @return {Buffer|Array}\n */\nfunction setLengthRight (msg, length) {\n  return setLength(msg, length, true)\n}\n\n/**\n * Attempts to turn a value into a `Buffer`. As input it supports `Buffer`, `String`, `Number`, null/undefined, `BN` and other objects with a `toArray()` method.\n * @param {*} v the value\n */\nfunction toBuffer (v) {\n  if (!Buffer.isBuffer(v)) {\n    if (Array.isArray(v)) {\n      v = Buffer.from(v)\n    } else if (typeof v === 'string') {\n      if (isHexString(v)) {\n        v = Buffer.from(padToEven(stripHexPrefix(v)), 'hex')\n      } else {\n        v = Buffer.from(v)\n      }\n    } else if (typeof v === 'number') {\n      v = intToBuffer(v)\n    } else if (v === null || v === undefined) {\n      v = Buffer.allocUnsafe(0)\n    } else if (BN.isBN(v)) {\n      v = v.toArrayLike(Buffer)\n    } else if (v.toArray) {\n      // converts a BN to a Buffer\n      v = Buffer.from(v.toArray())\n    } else {\n      throw new Error('invalid type')\n    }\n  }\n  return v\n}\n\n/**\n * Converts a `Buffer` into a hex `String`\n * @param {Buffer} buf\n * @return {String}\n */\nfunction bufferToHex (buf) {\n  buf = toBuffer(buf)\n  return '0x' + buf.toString('hex')\n}\n\n/**\n * Creates Keccak hash of the input\n * @param {Buffer|Array|String|Number} a the input data\n * @param {Number} [bits=256] the Keccak width\n * @return {Buffer}\n */\nfunction keccak (a, bits) {\n  a = toBuffer(a)\n  if (!bits) bits = 256\n\n  return createKeccakHash('keccak' + bits).update(a).digest()\n}\n\nfunction padToEven (str) {\n  return str.length % 2 ? '0' + str : str\n}\n\nfunction isHexString (str) {\n  return typeof str === 'string' && str.match(/^0x[0-9A-Fa-f]*$/)\n}\n\nfunction stripHexPrefix (str) {\n  if (typeof str === 'string' && str.startsWith('0x')) {\n    return str.slice(2)\n  }\n  return str\n}\n\nmodule.exports = {\n  zeros,\n  setLength,\n  setLengthRight,\n  isHexString,\n  stripHexPrefix,\n  toBuffer,\n  bufferToHex,\n  keccak\n}\n","/**\n * @fileoverview\n * - modified davidshimjs/qrcodejs library for use in node.js\n * - Using the 'QRCode for Javascript library'\n * - Fixed dataset of 'QRCode for Javascript library' for support full-spec.\n * - this library has no dependencies.\n *\n * @version 0.9.1 (2016-02-12)\n * @author davidshimjs, papnkukn\n * @see <a href=\"http://www.d-project.com/\" target=\"_blank\">http://www.d-project.com/</a>\n * @see <a href=\"http://jeromeetienne.github.com/jquery-qrcode/\" target=\"_blank\">http://jeromeetienne.github.com/jquery-qrcode/</a>\n * @see <a href=\"https://github.com/davidshimjs/qrcodejs\" target=\"_blank\">https://github.com/davidshimjs/qrcodejs</a>\n */\n\n//---------------------------------------------------------------------\n// QRCode for JavaScript\n//\n// Copyright (c) 2009 Kazuhiko Arase\n//\n// URL: http://www.d-project.com/\n//\n// Licensed under the MIT license:\n//   http://www.opensource.org/licenses/mit-license.php\n//\n// The word \"QR Code\" is registered trademark of\n// DENSO WAVE INCORPORATED\n//   http://www.denso-wave.com/qrcode/faqpatent-e.html\n//\n//---------------------------------------------------------------------\nfunction QR8bitByte(data) {\n  this.mode = QRMode.MODE_8BIT_BYTE;\n  this.data = data;\n  this.parsedData = [];\n\n  // Added to support UTF-8 Characters\n  for (var i = 0, l = this.data.length; i < l; i++) {\n    var byteArray = [];\n    var code = this.data.charCodeAt(i);\n\n    if (code > 0x10000) {\n      byteArray[0] = 0xF0 | ((code & 0x1C0000) >>> 18);\n      byteArray[1] = 0x80 | ((code & 0x3F000) >>> 12);\n      byteArray[2] = 0x80 | ((code & 0xFC0) >>> 6);\n      byteArray[3] = 0x80 | (code & 0x3F);\n    } else if (code > 0x800) {\n      byteArray[0] = 0xE0 | ((code & 0xF000) >>> 12);\n      byteArray[1] = 0x80 | ((code & 0xFC0) >>> 6);\n      byteArray[2] = 0x80 | (code & 0x3F);\n    } else if (code > 0x80) {\n      byteArray[0] = 0xC0 | ((code & 0x7C0) >>> 6);\n      byteArray[1] = 0x80 | (code & 0x3F);\n    } else {\n      byteArray[0] = code;\n    }\n\n    this.parsedData.push(byteArray);\n  }\n\n  this.parsedData = Array.prototype.concat.apply([], this.parsedData);\n\n  if (this.parsedData.length != this.data.length) {\n    this.parsedData.unshift(191);\n    this.parsedData.unshift(187);\n    this.parsedData.unshift(239);\n  }\n}\n\nQR8bitByte.prototype = {\n  getLength: function (buffer) {\n    return this.parsedData.length;\n  },\n  write: function (buffer) {\n    for (var i = 0, l = this.parsedData.length; i < l; i++) {\n      buffer.put(this.parsedData[i], 8);\n    }\n  }\n};\n\nfunction QRCodeModel(typeNumber, errorCorrectLevel) {\n  this.typeNumber = typeNumber;\n  this.errorCorrectLevel = errorCorrectLevel;\n  this.modules = null;\n  this.moduleCount = 0;\n  this.dataCache = null;\n  this.dataList = [];\n}\n\nQRCodeModel.prototype={addData:function(data){var newData=new QR8bitByte(data);this.dataList.push(newData);this.dataCache=null;},isDark:function(row,col){if(row<0||this.moduleCount<=row||col<0||this.moduleCount<=col){throw new Error(row+\",\"+col);}\nreturn this.modules[row][col];},getModuleCount:function(){return this.moduleCount;},make:function(){this.makeImpl(false,this.getBestMaskPattern());},makeImpl:function(test,maskPattern){this.moduleCount=this.typeNumber*4+17;this.modules=new Array(this.moduleCount);for(var row=0;row<this.moduleCount;row++){this.modules[row]=new Array(this.moduleCount);for(var col=0;col<this.moduleCount;col++){this.modules[row][col]=null;}}\nthis.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-7,0);this.setupPositionProbePattern(0,this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(test,maskPattern);if(this.typeNumber>=7){this.setupTypeNumber(test);}\nif(this.dataCache==null){this.dataCache=QRCodeModel.createData(this.typeNumber,this.errorCorrectLevel,this.dataList);}\nthis.mapData(this.dataCache,maskPattern);},setupPositionProbePattern:function(row,col){for(var r=-1;r<=7;r++){if(row+r<=-1||this.moduleCount<=row+r)continue;for(var c=-1;c<=7;c++){if(col+c<=-1||this.moduleCount<=col+c)continue;if((0<=r&&r<=6&&(c==0||c==6))||(0<=c&&c<=6&&(r==0||r==6))||(2<=r&&r<=4&&2<=c&&c<=4)){this.modules[row+r][col+c]=true;}else{this.modules[row+r][col+c]=false;}}}},getBestMaskPattern:function(){var minLostPoint=0;var pattern=0;for(var i=0;i<8;i++){this.makeImpl(true,i);var lostPoint=QRUtil.getLostPoint(this);if(i==0||minLostPoint>lostPoint){minLostPoint=lostPoint;pattern=i;}}\nreturn pattern;},createMovieClip:function(target_mc,instance_name,depth){var qr_mc=target_mc.createEmptyMovieClip(instance_name,depth);var cs=1;this.make();for(var row=0;row<this.modules.length;row++){var y=row*cs;for(var col=0;col<this.modules[row].length;col++){var x=col*cs;var dark=this.modules[row][col];if(dark){qr_mc.beginFill(0,100);qr_mc.moveTo(x,y);qr_mc.lineTo(x+cs,y);qr_mc.lineTo(x+cs,y+cs);qr_mc.lineTo(x,y+cs);qr_mc.endFill();}}}\nreturn qr_mc;},setupTimingPattern:function(){for(var r=8;r<this.moduleCount-8;r++){if(this.modules[r][6]!=null){continue;}\nthis.modules[r][6]=(r%2==0);}\nfor(var c=8;c<this.moduleCount-8;c++){if(this.modules[6][c]!=null){continue;}\nthis.modules[6][c]=(c%2==0);}},setupPositionAdjustPattern:function(){var pos=QRUtil.getPatternPosition(this.typeNumber);for(var i=0;i<pos.length;i++){for(var j=0;j<pos.length;j++){var row=pos[i];var col=pos[j];if(this.modules[row][col]!=null){continue;}\nfor(var r=-2;r<=2;r++){for(var c=-2;c<=2;c++){if(r==-2||r==2||c==-2||c==2||(r==0&&c==0)){this.modules[row+r][col+c]=true;}else{this.modules[row+r][col+c]=false;}}}}}},setupTypeNumber:function(test){var bits=QRUtil.getBCHTypeNumber(this.typeNumber);for(var i=0;i<18;i++){var mod=(!test&&((bits>>i)&1)==1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=mod;}\nfor(var i=0;i<18;i++){var mod=(!test&&((bits>>i)&1)==1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=mod;}},setupTypeInfo:function(test,maskPattern){var data=(this.errorCorrectLevel<<3)|maskPattern;var bits=QRUtil.getBCHTypeInfo(data);for(var i=0;i<15;i++){var mod=(!test&&((bits>>i)&1)==1);if(i<6){this.modules[i][8]=mod;}else if(i<8){this.modules[i+1][8]=mod;}else{this.modules[this.moduleCount-15+i][8]=mod;}}\nfor(var i=0;i<15;i++){var mod=(!test&&((bits>>i)&1)==1);if(i<8){this.modules[8][this.moduleCount-i-1]=mod;}else if(i<9){this.modules[8][15-i-1+1]=mod;}else{this.modules[8][15-i-1]=mod;}}\nthis.modules[this.moduleCount-8][8]=(!test);},mapData:function(data,maskPattern){var inc=-1;var row=this.moduleCount-1;var bitIndex=7;var byteIndex=0;for(var col=this.moduleCount-1;col>0;col-=2){if(col==6)col--;while(true){for(var c=0;c<2;c++){if(this.modules[row][col-c]==null){var dark=false;if(byteIndex<data.length){dark=(((data[byteIndex]>>>bitIndex)&1)==1);}\nvar mask=QRUtil.getMask(maskPattern,row,col-c);if(mask){dark=!dark;}\nthis.modules[row][col-c]=dark;bitIndex--;if(bitIndex==-1){byteIndex++;bitIndex=7;}}}\nrow+=inc;if(row<0||this.moduleCount<=row){row-=inc;inc=-inc;break;}}}}};QRCodeModel.PAD0=0xEC;QRCodeModel.PAD1=0x11;QRCodeModel.createData=function(typeNumber,errorCorrectLevel,dataList){var rsBlocks=QRRSBlock.getRSBlocks(typeNumber,errorCorrectLevel);var buffer=new QRBitBuffer();for(var i=0;i<dataList.length;i++){var data=dataList[i];buffer.put(data.mode,4);buffer.put(data.getLength(),QRUtil.getLengthInBits(data.mode,typeNumber));data.write(buffer);}\nvar totalDataCount=0;for(var i=0;i<rsBlocks.length;i++){totalDataCount+=rsBlocks[i].dataCount;}\nif(buffer.getLengthInBits()>totalDataCount*8){throw new Error(\"code length overflow. (\"\n+buffer.getLengthInBits()\n+\">\"\n+totalDataCount*8\n+\")\");}\nif(buffer.getLengthInBits()+4<=totalDataCount*8){buffer.put(0,4);}\nwhile(buffer.getLengthInBits()%8!=0){buffer.putBit(false);}\nwhile(true){if(buffer.getLengthInBits()>=totalDataCount*8){break;}\nbuffer.put(QRCodeModel.PAD0,8);if(buffer.getLengthInBits()>=totalDataCount*8){break;}\nbuffer.put(QRCodeModel.PAD1,8);}\nreturn QRCodeModel.createBytes(buffer,rsBlocks);};QRCodeModel.createBytes=function(buffer,rsBlocks){var offset=0;var maxDcCount=0;var maxEcCount=0;var dcdata=new Array(rsBlocks.length);var ecdata=new Array(rsBlocks.length);for(var r=0;r<rsBlocks.length;r++){var dcCount=rsBlocks[r].dataCount;var ecCount=rsBlocks[r].totalCount-dcCount;maxDcCount=Math.max(maxDcCount,dcCount);maxEcCount=Math.max(maxEcCount,ecCount);dcdata[r]=new Array(dcCount);for(var i=0;i<dcdata[r].length;i++){dcdata[r][i]=0xff&buffer.buffer[i+offset];}\noffset+=dcCount;var rsPoly=QRUtil.getErrorCorrectPolynomial(ecCount);var rawPoly=new QRPolynomial(dcdata[r],rsPoly.getLength()-1);var modPoly=rawPoly.mod(rsPoly);ecdata[r]=new Array(rsPoly.getLength()-1);for(var i=0;i<ecdata[r].length;i++){var modIndex=i+modPoly.getLength()-ecdata[r].length;ecdata[r][i]=(modIndex>=0)?modPoly.get(modIndex):0;}}\nvar totalCodeCount=0;for(var i=0;i<rsBlocks.length;i++){totalCodeCount+=rsBlocks[i].totalCount;}\nvar data=new Array(totalCodeCount);var index=0;for(var i=0;i<maxDcCount;i++){for(var r=0;r<rsBlocks.length;r++){if(i<dcdata[r].length){data[index++]=dcdata[r][i];}}}\nfor(var i=0;i<maxEcCount;i++){for(var r=0;r<rsBlocks.length;r++){if(i<ecdata[r].length){data[index++]=ecdata[r][i];}}}\nreturn data;};var QRMode={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3};var QRErrorCorrectLevel={L:1,M:0,Q:3,H:2};var QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:(1<<10)|(1<<8)|(1<<5)|(1<<4)|(1<<2)|(1<<1)|(1<<0),G18:(1<<12)|(1<<11)|(1<<10)|(1<<9)|(1<<8)|(1<<5)|(1<<2)|(1<<0),G15_MASK:(1<<14)|(1<<12)|(1<<10)|(1<<4)|(1<<1),getBCHTypeInfo:function(data){var d=data<<10;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)>=0){d^=(QRUtil.G15<<(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)));}\nreturn((data<<10)|d)^QRUtil.G15_MASK;},getBCHTypeNumber:function(data){var d=data<<12;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)>=0){d^=(QRUtil.G18<<(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)));}\nreturn(data<<12)|d;},getBCHDigit:function(data){var digit=0;while(data!=0){digit++;data>>>=1;}\nreturn digit;},getPatternPosition:function(typeNumber){return QRUtil.PATTERN_POSITION_TABLE[typeNumber-1];},getMask:function(maskPattern,i,j){switch(maskPattern){case QRMaskPattern.PATTERN000:return(i+j)%2==0;case QRMaskPattern.PATTERN001:return i%2==0;case QRMaskPattern.PATTERN010:return j%3==0;case QRMaskPattern.PATTERN011:return(i+j)%3==0;case QRMaskPattern.PATTERN100:return(Math.floor(i/2)+Math.floor(j/3))%2==0;case QRMaskPattern.PATTERN101:return(i*j)%2+(i*j)%3==0;case QRMaskPattern.PATTERN110:return((i*j)%2+(i*j)%3)%2==0;case QRMaskPattern.PATTERN111:return((i*j)%3+(i+j)%2)%2==0;default:throw new Error(\"bad maskPattern:\"+maskPattern);}},getErrorCorrectPolynomial:function(errorCorrectLength){var a=new QRPolynomial([1],0);for(var i=0;i<errorCorrectLength;i++){a=a.multiply(new QRPolynomial([1,QRMath.gexp(i)],0));}\nreturn a;},getLengthInBits:function(mode,type){if(1<=type&&type<10){switch(mode){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw new Error(\"mode:\"+mode);}}else if(type<27){switch(mode){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error(\"mode:\"+mode);}}else if(type<41){switch(mode){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error(\"mode:\"+mode);}}else{throw new Error(\"type:\"+type);}},getLostPoint:function(qrCode){var moduleCount=qrCode.getModuleCount();var lostPoint=0;for(var row=0;row<moduleCount;row++){for(var col=0;col<moduleCount;col++){var sameCount=0;var dark=qrCode.isDark(row,col);for(var r=-1;r<=1;r++){if(row+r<0||moduleCount<=row+r){continue;}\nfor(var c=-1;c<=1;c++){if(col+c<0||moduleCount<=col+c){continue;}\nif(r==0&&c==0){continue;}\nif(dark==qrCode.isDark(row+r,col+c)){sameCount++;}}}\nif(sameCount>5){lostPoint+=(3+sameCount-5);}}}\nfor(var row=0;row<moduleCount-1;row++){for(var col=0;col<moduleCount-1;col++){var count=0;if(qrCode.isDark(row,col))count++;if(qrCode.isDark(row+1,col))count++;if(qrCode.isDark(row,col+1))count++;if(qrCode.isDark(row+1,col+1))count++;if(count==0||count==4){lostPoint+=3;}}}\nfor(var row=0;row<moduleCount;row++){for(var col=0;col<moduleCount-6;col++){if(qrCode.isDark(row,col)&&!qrCode.isDark(row,col+1)&&qrCode.isDark(row,col+2)&&qrCode.isDark(row,col+3)&&qrCode.isDark(row,col+4)&&!qrCode.isDark(row,col+5)&&qrCode.isDark(row,col+6)){lostPoint+=40;}}}\nfor(var col=0;col<moduleCount;col++){for(var row=0;row<moduleCount-6;row++){if(qrCode.isDark(row,col)&&!qrCode.isDark(row+1,col)&&qrCode.isDark(row+2,col)&&qrCode.isDark(row+3,col)&&qrCode.isDark(row+4,col)&&!qrCode.isDark(row+5,col)&&qrCode.isDark(row+6,col)){lostPoint+=40;}}}\nvar darkCount=0;for(var col=0;col<moduleCount;col++){for(var row=0;row<moduleCount;row++){if(qrCode.isDark(row,col)){darkCount++;}}}\nvar ratio=Math.abs(100*darkCount/moduleCount/moduleCount-50)/5;lostPoint+=ratio*10;return lostPoint;}};var QRMath={glog:function(n){if(n<1){throw new Error(\"glog(\"+n+\")\");}\nreturn QRMath.LOG_TABLE[n];},gexp:function(n){while(n<0){n+=255;}\nwhile(n>=256){n-=255;}\nreturn QRMath.EXP_TABLE[n];},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var i=0;i<8;i++){QRMath.EXP_TABLE[i]=1<<i;}\nfor(var i=8;i<256;i++){QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8];}\nfor(var i=0;i<255;i++){QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i;}\nfunction QRPolynomial(num,shift){if(num.length==undefined){throw new Error(num.length+\"/\"+shift);}\nvar offset=0;while(offset<num.length&&num[offset]==0){offset++;}\nthis.num=new Array(num.length-offset+shift);for(var i=0;i<num.length-offset;i++){this.num[i]=num[i+offset];}}\nQRPolynomial.prototype={get:function(index){return this.num[index];},getLength:function(){return this.num.length;},multiply:function(e){var num=new Array(this.getLength()+e.getLength()-1);for(var i=0;i<this.getLength();i++){for(var j=0;j<e.getLength();j++){num[i+j]^=QRMath.gexp(QRMath.glog(this.get(i))+QRMath.glog(e.get(j)));}}\nreturn new QRPolynomial(num,0);},mod:function(e){if(this.getLength()-e.getLength()<0){return this;}\nvar ratio=QRMath.glog(this.get(0))-QRMath.glog(e.get(0));var num=new Array(this.getLength());for(var i=0;i<this.getLength();i++){num[i]=this.get(i);}\nfor(var i=0;i<e.getLength();i++){num[i]^=QRMath.gexp(QRMath.glog(e.get(i))+ratio);}\nreturn new QRPolynomial(num,0).mod(e);}};function QRRSBlock(totalCount,dataCount){this.totalCount=totalCount;this.dataCount=dataCount;}\nQRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];QRRSBlock.getRSBlocks=function(typeNumber,errorCorrectLevel){var rsBlock=QRRSBlock.getRsBlockTable(typeNumber,errorCorrectLevel);if(rsBlock==undefined){throw new Error(\"bad rs block @ typeNumber:\"+typeNumber+\"/errorCorrectLevel:\"+errorCorrectLevel);}\nvar length=rsBlock.length/3;var list=[];for(var i=0;i<length;i++){var count=rsBlock[i*3+0];var totalCount=rsBlock[i*3+1];var dataCount=rsBlock[i*3+2];for(var j=0;j<count;j++){list.push(new QRRSBlock(totalCount,dataCount));}}\nreturn list;};QRRSBlock.getRsBlockTable=function(typeNumber,errorCorrectLevel){switch(errorCorrectLevel){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+3];default:return undefined;}};function QRBitBuffer(){this.buffer=[];this.length=0;}\nQRBitBuffer.prototype={get:function(index){var bufIndex=Math.floor(index/8);return((this.buffer[bufIndex]>>>(7-index%8))&1)==1;},put:function(num,length){for(var i=0;i<length;i++){this.putBit(((num>>>(length-i-1))&1)==1);}},getLengthInBits:function(){return this.length;},putBit:function(bit){var bufIndex=Math.floor(this.length/8);if(this.buffer.length<=bufIndex){this.buffer.push(0);}\nif(bit){this.buffer[bufIndex]|=(0x80>>>(this.length%8));}\nthis.length++;}};var QRCodeLimitLength=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];\n\n\n/** Constructor */\nfunction QRCode(options) {\n  var instance = this;\n\n  //Default options\n  this.options = {\n    padding: 4,\n    width: 256,\n    height: 256,\n    typeNumber: 4,\n    color: \"#000000\",\n    background: \"#ffffff\",\n    ecl: \"M\",\n    image:{\n      svg:\"\",\n      width:0,\n      height:0\n    }\n  };\n\n  //In case the options is string\n  if (typeof options === 'string') {\n    options = {\n      content: options\n    };\n  }\n\n  //Merge options\n  if (options) {\n    for (var i in options) {\n      this.options[i] = options[i];\n    }\n  }\n\n  if (typeof this.options.content !== 'string') {\n    throw new Error(\"Expected 'content' as string!\");\n  }\n\n  if (this.options.content.length === 0 /* || this.options.content.length > 7089 */) {\n    throw new Error(\"Expected 'content' to be non-empty!\");\n  }\n\n  if (!(this.options.padding >= 0)) {\n    throw new Error(\"Expected 'padding' value to be non-negative!\");\n  }\n\n  if (!(this.options.width > 0) || !(this.options.height > 0)) {\n    throw new Error(\"Expected 'width' or 'height' value to be higher than zero!\");\n  }\n\n  //Gets the error correction level\n  function _getErrorCorrectLevel(ecl) {\n    switch (ecl) {\n        case \"L\":\n          return QRErrorCorrectLevel.L;\n\n        case \"M\":\n          return QRErrorCorrectLevel.M;\n\n        case \"Q\":\n          return QRErrorCorrectLevel.Q;\n\n        case \"H\":\n          return QRErrorCorrectLevel.H;\n\n        default:\n          throw new Error(\"Unknwon error correction level: \" + ecl);\n      }\n  }\n\n  //Get type number\n  function _getTypeNumber(content, ecl) {\n    var length = _getUTF8Length(content);\n\n    var type = 1;\n    var limit = 0;\n    for (var i = 0, len = QRCodeLimitLength.length; i <= len; i++) {\n      var table = QRCodeLimitLength[i];\n      if (!table) {\n        throw new Error(\"Content too long: expected \" + limit + \" but got \" + length);\n      }\n\n      switch (ecl) {\n        case \"L\":\n          limit = table[0];\n          break;\n\n        case \"M\":\n          limit = table[1];\n          break;\n\n        case \"Q\":\n          limit = table[2];\n          break;\n\n        case \"H\":\n          limit = table[3];\n          break;\n\n        default:\n          throw new Error(\"Unknwon error correction level: \" + ecl);\n      }\n\n      if (length <= limit) {\n        break;\n      }\n\n      type++;\n    }\n\n    if (type > QRCodeLimitLength.length) {\n      throw new Error(\"Content too long\");\n    }\n\n    return type;\n  }\n\n  //Gets text length\n  function _getUTF8Length(content) {\n    var result = encodeURI(content).toString().replace(/\\%[0-9a-fA-F]{2}/g, 'a');\n    return result.length + (result.length != content ? 3 : 0);\n  }\n\n  //Generate QR Code matrix\n  var content = this.options.content;\n  var type = _getTypeNumber(content, this.options.ecl);\n  var ecl = _getErrorCorrectLevel(this.options.ecl);\n  this.qrcode = new QRCodeModel(type, ecl);\n  this.qrcode.addData(content);\n  this.qrcode.make();\n}\n\n/** Generates QR Code as SVG image */\nQRCode.prototype.svg = function(opt) {\n  var options = this.options || { };\n  var modules = this.qrcode.modules;\n\n  if (typeof opt == \"undefined\") {\n    opt = { container: options.container || \"svg\" };\n  }\n\n  //Apply new lines and indents in SVG?\n  var pretty = typeof options.pretty != \"undefined\" ? !!options.pretty : true;\n\n  var indent = pretty ? '  ' : '';\n  var EOL = pretty ? '\\r\\n' : '';\n  var width = options.width;\n  var height = options.height;\n  var length = modules.length;\n  var xsize = width / (length + 2 * options.padding);\n  var ysize = height / (length + 2 * options.padding);\n\n  //Join (union, merge) rectangles into one shape?\n  var join = typeof options.join != \"undefined\" ? !!options.join : false;\n\n  //Swap the X and Y modules, pull request #2\n  var swap = typeof options.swap != \"undefined\" ? !!options.swap : false;\n\n  //Apply <?xml...?> declaration in SVG?\n  var xmlDeclaration = typeof options.xmlDeclaration != \"undefined\" ? !!options.xmlDeclaration : true;\n\n  //Populate with predefined shape instead of \"rect\" elements, thanks to @kkocdko\n  var predefined = typeof options.predefined != \"undefined\" ? !!options.predefined : false;\n  var defs = predefined ? indent + '<defs><path id=\"qrmodule\" d=\"M0 0 h' + ysize + ' v' + xsize + ' H0 z\" style=\"fill:' + options.color + ';shape-rendering:crispEdges;\" /></defs>' + EOL : '';\n\n  //Background rectangle\n  var bgrect = indent + '<rect x=\"0\" y=\"0\" width=\"' + width + '\" height=\"' + height + '\" style=\"fill:' + options.background + ';shape-rendering:crispEdges;\"/>' + EOL;\n\n  //Rectangles representing modules\n  var modrect = '';\n  var pathdata = '';\n\n  for (var y = 0; y < length; y++) {\n    for (var x = 0; x < length; x++) {\n      var module = modules[x][y];\n      if (module) {\n\n        var px = (x * xsize + options.padding * xsize);\n        var py = (y * ysize + options.padding * ysize);\n\n        //Some users have had issues with the QR Code, thanks to @danioso for the solution\n        if (swap) {\n          var t = px;\n          px = py;\n          py = t;\n        }\n\n        if (join) {\n          //Module as a part of svg path data, thanks to @danioso\n          var w = xsize + px\n          var h = ysize + py\n\n          px = (Number.isInteger(px))? Number(px): px.toFixed(2);\n          py = (Number.isInteger(py))? Number(py): py.toFixed(2);\n          w = (Number.isInteger(w))? Number(w): w.toFixed(2);\n          h = (Number.isInteger(h))? Number(h): h.toFixed(2);\n\n          pathdata += ('M' + px + ',' + py + ' V' + h + ' H' + w + ' V' + py + ' H' + px + ' Z ');\n        }\n        else if (predefined) {\n          //Module as a predefined shape, thanks to @kkocdko\n          modrect += indent + '<use x=\"' + px.toString() + '\" y=\"' + py.toString() + '\" href=\"#qrmodule\" />' + EOL;\n        }\n        else {\n          //Module as rectangle element\n          modrect += indent + '<rect x=\"' + px.toString() + '\" y=\"' + py.toString() + '\" width=\"' + xsize + '\" height=\"' + ysize + '\" style=\"fill:' + options.color + ';shape-rendering:crispEdges;\"/>' + EOL;\n        }\n      }\n    }\n  }\n\n  if (join) {\n    modrect = indent + '<path x=\"0\" y=\"0\" style=\"fill:' + options.color + ';shape-rendering:crispEdges;\" d=\"' + pathdata + '\" />';\n  }\n  let imgSvg = \"\";\n  if(this.options.image !== undefined && this.options.image.svg){\n    const imgWidth = width * this.options.image.width / 100;\n    const imgHeight = height * this.options.image.height / 100;\n    const imgX = (width/2) - imgWidth/2;\n    const imgY = (height/2) - imgHeight/2;\n    imgSvg += `<svg x=\"${imgX}\" y=\"${imgY}\" width=\"${imgWidth}\" height=\"${imgHeight}\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMinYMin meet\">`;\n    imgSvg += this.options.image.svg + EOL;\n    imgSvg += '</svg>';\n  }\n\n  var svg = \"\";\n  switch (opt.container) {\n    //Wrapped in SVG document\n    case \"svg\":\n      if (xmlDeclaration) {\n        svg += '<?xml version=\"1.0\" standalone=\"yes\"?>' + EOL;\n      }\n      svg += '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"' + width + '\" height=\"' + height + '\">' + EOL;\n      svg += defs + bgrect + modrect;\n      svg += imgSvg;\n      svg += '</svg>';\n      break;\n\n    //Viewbox for responsive use in a browser, thanks to @danioso\n    case \"svg-viewbox\":\n      if (xmlDeclaration) {\n        svg += '<?xml version=\"1.0\" standalone=\"yes\"?>' + EOL;\n      }\n      svg += '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 ' + width + ' ' + height + '\">' + EOL;\n      svg += defs + bgrect + modrect;\n      svg += imgSvg;\n      svg += '</svg>';\n      break;\n\n\n    //Wrapped in group element\n    case \"g\":\n      svg += '<g width=\"' + width + '\" height=\"' + height + '\">' + EOL;\n      svg += defs + bgrect + modrect;\n      svg += imgSvg;\n      svg += '</g>';\n\n      break;\n\n    //Without a container\n    default:\n      svg += (defs + bgrect + modrect + imgSvg).replace(/^\\s+/, \"\"); //Clear indents on each line\n      break;\n  }\n\n  return svg;\n};\n\nmodule.exports = QRCode;\n\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LIB_VERSION = void 0;\nexports.LIB_VERSION = \"2.5.0\";\n","const EthQuery = require('eth-query')\nconst pify = require('pify')\nconst SafeEventEmitter = require('safe-event-emitter')\n\nconst sec = 1000\n\nconst calculateSum = (accumulator, currentValue) => accumulator + currentValue\nconst blockTrackerEvents = ['sync', 'latest']\n\nclass BaseBlockTracker extends SafeEventEmitter {\n\n  //\n  // public\n  //\n\n  constructor (opts = {}) {\n    super()\n    // config\n    this._blockResetDuration = opts.blockResetDuration || 20 * sec\n    // state\n    this._blockResetTimeout\n    this._currentBlock = null\n    this._isRunning = false\n    // bind functions for internal use\n    this._onNewListener = this._onNewListener.bind(this)\n    this._onRemoveListener = this._onRemoveListener.bind(this)\n    this._resetCurrentBlock = this._resetCurrentBlock.bind(this)\n    // listen for handler changes\n    this._setupInternalEvents()\n  }\n\n  isRunning () {\n    return this._isRunning\n  }\n\n  getCurrentBlock () {\n    return this._currentBlock\n  }\n\n  async getLatestBlock () {\n    // return if available\n    if (this._currentBlock) return this._currentBlock\n    // wait for a new latest block\n    const latestBlock = await new Promise(resolve => this.once('latest', resolve))\n    // return newly set current block\n    return latestBlock\n  }\n\n  // dont allow module consumer to remove our internal event listeners\n  removeAllListeners (eventName) {\n    // perform default behavior, preserve fn arity\n    if (eventName) {\n      super.removeAllListeners(eventName)\n    } else {\n      super.removeAllListeners()\n    }\n    // re-add internal events\n    this._setupInternalEvents()\n    // trigger stop check just in case\n    this._onRemoveListener()\n  }\n\n  //\n  // to be implemented in subclass\n  //\n\n  _start () {\n    // default behavior is noop\n  }\n\n  _end () {\n    // default behavior is noop\n  }\n\n  //\n  // private\n  //\n\n  _setupInternalEvents () {\n    // first remove listeners for idempotence\n    this.removeListener('newListener', this._onNewListener)\n    this.removeListener('removeListener', this._onRemoveListener)\n    // then add them\n    this.on('newListener', this._onNewListener)\n    this.on('removeListener', this._onRemoveListener)\n  }\n\n  _onNewListener (eventName, handler) {\n    // `newListener` is called *before* the listener is added\n    if (!blockTrackerEvents.includes(eventName)) return\n    this._maybeStart()\n  }\n\n  _onRemoveListener (eventName, handler) {\n    // `removeListener` is called *after* the listener is removed\n    if (this._getBlockTrackerEventCount() > 0) return\n    this._maybeEnd()\n  }\n\n  _maybeStart () {\n    if (this._isRunning) return\n    this._isRunning = true\n    // cancel setting latest block to stale\n    this._cancelBlockResetTimeout()\n    this._start()\n  }\n\n  _maybeEnd () {\n    if (!this._isRunning) return\n    this._isRunning = false\n    this._setupBlockResetTimeout()\n    this._end()\n  }\n\n  _getBlockTrackerEventCount () {\n    return blockTrackerEvents\n      .map(eventName => this.listenerCount(eventName))\n      .reduce(calculateSum)\n  }\n\n  _newPotentialLatest (newBlock) {\n    const currentBlock = this._currentBlock\n    // only update if blok number is higher\n    if (currentBlock && (hexToInt(newBlock) <= hexToInt(currentBlock))) return\n    this._setCurrentBlock(newBlock)\n  }\n\n  _setCurrentBlock (newBlock) {\n    const oldBlock = this._currentBlock\n    this._currentBlock = newBlock\n    this.emit('latest', newBlock)\n    this.emit('sync', { oldBlock, newBlock })\n  }\n\n  _setupBlockResetTimeout () {\n    // clear any existing timeout\n    this._cancelBlockResetTimeout()\n    // clear latest block when stale\n    this._blockResetTimeout = setTimeout(this._resetCurrentBlock, this._blockResetDuration)\n    // nodejs - dont hold process open\n    if (this._blockResetTimeout.unref) {\n      this._blockResetTimeout.unref()\n    }\n  }\n\n  _cancelBlockResetTimeout () {\n    clearTimeout(this._blockResetTimeout)\n  }\n\n  _resetCurrentBlock () {\n    this._currentBlock = null\n  }\n\n}\n\nmodule.exports = BaseBlockTracker\n\nfunction hexToInt(hexInt) {\n  return Number.parseInt(hexInt, 16)\n}\n","const pify = require('pify')\nconst BaseBlockTracker = require('./base')\n\nconst sec = 1000\n\nclass PollingBlockTracker extends BaseBlockTracker {\n\n  constructor (opts = {}) {\n    // parse + validate args\n    if (!opts.provider) throw new Error('PollingBlockTracker - no provider specified.')\n    const pollingInterval = opts.pollingInterval || 20 * sec\n    const retryTimeout = opts.retryTimeout || pollingInterval / 10\n    const keepEventLoopActive = opts.keepEventLoopActive !== undefined ? opts.keepEventLoopActive : true\n    const setSkipCacheFlag = opts.setSkipCacheFlag || false\n    // BaseBlockTracker constructor\n    super(Object.assign({\n      blockResetDuration: pollingInterval,\n    }, opts))\n    // config\n    this._provider = opts.provider\n    this._pollingInterval = pollingInterval\n    this._retryTimeout = retryTimeout\n    this._keepEventLoopActive = keepEventLoopActive\n    this._setSkipCacheFlag = setSkipCacheFlag\n  }\n\n  //\n  // public\n  //\n\n  // trigger block polling\n  async checkForLatestBlock () {\n    await this._updateLatestBlock()\n    return await this.getLatestBlock()\n  }\n\n  //\n  // private\n  //\n\n  _start () {\n    this._performSync().catch(err => this.emit('error', err))\n  }\n\n  async _performSync () {\n    while (this._isRunning) {\n      try {\n        await this._updateLatestBlock()\n        await timeout(this._pollingInterval, !this._keepEventLoopActive)\n      } catch (err) {\n        const newErr = new Error(`PollingBlockTracker - encountered an error while attempting to update latest block:\\n${err.stack}`)\n        try {\n          this.emit('error', newErr)\n        } catch (emitErr) {\n          console.error(newErr)\n        }\n        await timeout(this._retryTimeout, !this._keepEventLoopActive)\n      }\n    }\n  }\n\n  async _updateLatestBlock () {\n    // fetch + set latest block\n    const latestBlock = await this._fetchLatestBlock()\n    this._newPotentialLatest(latestBlock)\n  }\n\n  async _fetchLatestBlock () {\n    const req = { jsonrpc: \"2.0\", id: 1, method: 'eth_blockNumber', params: [] }\n    if (this._setSkipCacheFlag) req.skipCache = true\n    const res = await pify((cb) => this._provider.sendAsync(req, cb))()\n    if (res.error) throw new Error(`PollingBlockTracker - encountered error fetching block:\\n${res.error}`)\n    return res.result\n  }\n\n}\n\nmodule.exports = PollingBlockTracker\n\nfunction timeout (duration, unref) {\n  return new Promise(resolve => {\n    const timoutRef = setTimeout(resolve, duration)\n    // don't keep process open\n    if (timoutRef.unref && unref) {\n      timoutRef.unref()\n    }\n  })\n}\n","const BaseFilter = require('./base-filter')\n\n// tracks all results ever recorded\nclass BaseFilterWithHistory extends BaseFilter {\n\n  constructor () {\n    super()\n    this.allResults = []\n  }\n\n  async update () {\n    throw new Error('BaseFilterWithHistory - no update method specified')\n  }\n\n  addResults (newResults) {\n    this.allResults = this.allResults.concat(newResults)\n    super.addResults(newResults)\n  }\n\n  addInitialResults (newResults) {\n    this.allResults = this.allResults.concat(newResults)\n    super.addInitialResults(newResults)\n  }\n\n  getAllResults () {\n    return this.allResults\n  }\n\n}\n\nmodule.exports = BaseFilterWithHistory","const SafeEventEmitter = require('@metamask/safe-event-emitter').default\n\nclass BaseFilter extends SafeEventEmitter {\n\n  constructor () {\n    super()\n    this.updates = []\n  }\n\n  async initialize () {}\n\n  async update () {\n    throw new Error('BaseFilter - no update method specified')\n  }\n\n  addResults (newResults) {\n    this.updates = this.updates.concat(newResults)\n    newResults.forEach(result => this.emit('update', result))\n  }\n\n  addInitialResults (newResults) {}\n\n  getChangesAndClear () {\n    const updates = this.updates\n    this.updates = []\n    return updates\n  }\n  \n}\n\nmodule.exports = BaseFilter\n","const BaseFilter = require('./base-filter')\nconst getBlocksForRange = require('./getBlocksForRange')\nconst { incrementHexInt } = require('./hexUtils')\n\nclass BlockFilter extends BaseFilter {\n\n  constructor ({ provider, params }) {\n    super()\n    this.type = 'block'\n    this.provider = provider\n  }\n\n  async update ({ oldBlock, newBlock }) {\n    const toBlock = newBlock\n    const fromBlock = incrementHexInt(oldBlock)\n    const blockBodies = await getBlocksForRange({ provider: this.provider, fromBlock, toBlock })\n    const blockHashes = blockBodies.map((block) => block.hash)\n    this.addResults(blockHashes)\n  }\n\n}\n\nmodule.exports = BlockFilter\n","module.exports = getBlocksForRange\n\nasync function getBlocksForRange({ provider, fromBlock, toBlock }) {\n  if (!fromBlock) fromBlock = toBlock\n\n  const fromBlockNumber = hexToInt(fromBlock)\n  const toBlockNumber = hexToInt(toBlock)\n  const blockCountToQuery = toBlockNumber - fromBlockNumber + 1\n  // load all blocks from old to new (inclusive)\n  const missingBlockNumbers = Array(blockCountToQuery).fill()\n                              .map((_,index) => fromBlockNumber + index)\n                              .map(intToHex)\n  const blockBodies = await Promise.all(\n    missingBlockNumbers.map(blockNum => query(provider, 'eth_getBlockByNumber', [blockNum, false]))\n  )\n  return blockBodies\n}\n\nfunction hexToInt(hexString) {\n  if (hexString === undefined || hexString === null) return hexString\n  return Number.parseInt(hexString, 16)\n}\n\nfunction incrementHexInt(hexString){\n  if (hexString === undefined || hexString === null) return hexString\n  const value = hexToInt(hexString)\n  return intToHex(value + 1)\n}\n\nfunction intToHex(int) {\n  if (int === undefined || int === null) return int\n  const hexString = int.toString(16)\n  return '0x' + hexString\n}\n\nfunction query(provider, method, params) {\n  return new Promise((resolve, reject) => {\n    provider.sendAsync({ id: 1, jsonrpc: '2.0', method, params }, (err, res) => {\n      if (err) return reject(err)\n      resolve(res.result)\n    })\n  })\n}\n","\nmodule.exports = {\n  minBlockRef,\n  maxBlockRef,\n  sortBlockRefs,\n  bnToHex,\n  blockRefIsNumber,\n  hexToInt,\n  incrementHexInt,\n  intToHex,\n  unsafeRandomBytes,\n}\n\nfunction minBlockRef(...refs) {\n  const sortedRefs = sortBlockRefs(refs)\n  return sortedRefs[0]\n}\n\nfunction maxBlockRef(...refs) {\n  const sortedRefs = sortBlockRefs(refs)\n  return sortedRefs[sortedRefs.length-1]\n}\n\nfunction sortBlockRefs(refs) {\n  return refs.sort((refA, refB) => {\n    if (refA === 'latest' || refB === 'earliest') return 1\n    if (refB === 'latest' || refA === 'earliest') return -1\n    return hexToInt(refA) - hexToInt(refB)\n  })\n}\n\nfunction bnToHex(bn) {\n  return '0x' + bn.toString(16)\n}\n\nfunction blockRefIsNumber(blockRef){\n  return blockRef && !['earliest', 'latest', 'pending'].includes(blockRef)\n}\n\nfunction hexToInt(hexString) {\n  if (hexString === undefined || hexString === null) return hexString\n  return Number.parseInt(hexString, 16)\n}\n\nfunction incrementHexInt(hexString){\n  if (hexString === undefined || hexString === null) return hexString\n  const value = hexToInt(hexString)\n  return intToHex(value + 1)\n}\n\nfunction intToHex(int) {\n  if (int === undefined || int === null) return int\n  let hexString = int.toString(16)\n  const needsLeftPad = hexString.length % 2\n  if (needsLeftPad) hexString = '0' + hexString\n  return '0x' + hexString\n}\n\nfunction unsafeRandomBytes(byteCount) {\n  let result = '0x'\n  for (let i = 0; i < byteCount; i++) {\n    result += unsafeRandomNibble()\n    result += unsafeRandomNibble()\n  }\n  return result\n}\n\nfunction unsafeRandomNibble() {\n  return Math.floor(Math.random() * 16).toString(16)\n}\n","const Mutex = require('async-mutex').Mutex\nconst { createAsyncMiddleware } = require('json-rpc-engine')\nconst createJsonRpcMiddleware = require('eth-json-rpc-middleware/scaffold')\nconst LogFilter = require('./log-filter.js')\nconst BlockFilter = require('./block-filter.js')\nconst TxFilter = require('./tx-filter.js')\nconst { intToHex, hexToInt } = require('./hexUtils')\n\nmodule.exports = createEthFilterMiddleware\n\nfunction createEthFilterMiddleware({ blockTracker, provider }) {\n\n  // create filter collection\n  let filterIndex = 0\n  let filters = {}\n  // create update mutex\n  const mutex = new Mutex()\n  const waitForFree = mutexMiddlewareWrapper({ mutex })\n\n  const middleware = createJsonRpcMiddleware({\n    // install filters\n    eth_newFilter:                   waitForFree(toFilterCreationMiddleware(newLogFilter)),\n    eth_newBlockFilter:              waitForFree(toFilterCreationMiddleware(newBlockFilter)),\n    eth_newPendingTransactionFilter: waitForFree(toFilterCreationMiddleware(newPendingTransactionFilter)),\n    // uninstall filters\n    eth_uninstallFilter:             waitForFree(toAsyncRpcMiddleware(uninstallFilterHandler)),\n    // checking filter changes\n    eth_getFilterChanges:            waitForFree(toAsyncRpcMiddleware(getFilterChanges)),\n    eth_getFilterLogs:               waitForFree(toAsyncRpcMiddleware(getFilterLogs)),\n  })\n\n  // setup filter updating and destroy handler\n  const filterUpdater = async ({ oldBlock, newBlock }) => {\n    if (filters.length === 0) return\n    // lock update reads\n    const releaseLock = await mutex.acquire()\n    try {\n      // process all filters in parallel\n      await Promise.all(objValues(filters).map(async (filter) => {\n        try {\n         await filter.update({ oldBlock, newBlock })\n        } catch (err) {\n          // handle each error individually so filter update errors don't affect other filters\n          console.error(err)\n        }\n      }))\n    } catch (err) {\n      // log error so we don't skip the releaseLock\n      console.error(err)\n    }\n    // unlock update reads\n    releaseLock()\n  }\n\n  // expose filter methods directly\n  middleware.newLogFilter = newLogFilter\n  middleware.newBlockFilter = newBlockFilter\n  middleware.newPendingTransactionFilter = newPendingTransactionFilter\n  middleware.uninstallFilter = uninstallFilterHandler\n  middleware.getFilterChanges = getFilterChanges\n  middleware.getFilterLogs = getFilterLogs\n\n  // expose destroy method for cleanup\n  middleware.destroy = () => {\n    uninstallAllFilters()\n  }\n\n  return middleware\n\n  //\n  // new filters\n  //\n\n  async function newLogFilter(params) {\n    const filter = new LogFilter({ provider, params })\n    const filterIndex = await installFilter(filter)\n    return filter\n  }\n\n  async function newBlockFilter() {\n    const filter = new BlockFilter({ provider })\n    const filterIndex = await installFilter(filter)\n    return filter\n  }\n\n  async function newPendingTransactionFilter() {\n    const filter = new TxFilter({ provider })\n    const filterIndex = await installFilter(filter)\n    return filter\n  }\n\n  //\n  // get filter changes\n  //\n\n  async function getFilterChanges(filterIndexHex) {\n    const filterIndex = hexToInt(filterIndexHex)\n    const filter = filters[filterIndex]\n    if (!filter) {\n      throw new Error(`No filter for index \"${filterIndex}\"`)\n    }\n    const results = filter.getChangesAndClear()\n    return results\n  }\n\n  async function getFilterLogs(filterIndexHex) {\n    const filterIndex = hexToInt(filterIndexHex)\n    const filter = filters[filterIndex]\n    if (!filter) {\n      throw new Error(`No filter for index \"${filterIndex}\"`)\n    }\n    // only return results for log filters\n    if (filter.type === 'log') {\n      results = filter.getAllResults()\n    } else {\n      results = []\n    }\n    return results\n  }\n\n\n  //\n  // remove filters\n  //\n\n\n  async function uninstallFilterHandler(filterIndexHex) {\n    // check filter exists\n    const filterIndex = hexToInt(filterIndexHex)\n    const filter = filters[filterIndex]\n    const result = Boolean(filter)\n    // uninstall filter\n    if (result) {\n      await uninstallFilter(filterIndex)\n    }\n    return result\n  }\n\n  //\n  // utils\n  //\n\n  async function installFilter(filter) {\n    const prevFilterCount = objValues(filters).length\n    // install filter\n    const currentBlock = await blockTracker.getLatestBlock()\n    await filter.initialize({ currentBlock })\n    filterIndex++\n    filters[filterIndex] = filter\n    filter.id = filterIndex\n    filter.idHex = intToHex(filterIndex)\n    // update block tracker subs\n    const newFilterCount = objValues(filters).length\n    updateBlockTrackerSubs({ prevFilterCount, newFilterCount })\n    return filterIndex\n  }\n\n  async function uninstallFilter(filterIndex) {\n    const prevFilterCount = objValues(filters).length\n    delete filters[filterIndex]\n    // update block tracker subs\n    const newFilterCount = objValues(filters).length\n    updateBlockTrackerSubs({ prevFilterCount, newFilterCount })\n  }\n\n  async function uninstallAllFilters() {\n    const prevFilterCount = objValues(filters).length\n    filters = {}\n    // update block tracker subs\n    updateBlockTrackerSubs({ prevFilterCount, newFilterCount: 0 })\n  }\n\n  function updateBlockTrackerSubs({ prevFilterCount, newFilterCount }) {\n    // subscribe\n    if (prevFilterCount === 0 && newFilterCount > 0) {\n      blockTracker.on('sync', filterUpdater)\n      return\n    }\n    // unsubscribe\n    if (prevFilterCount > 0 && newFilterCount === 0) {\n      blockTracker.removeListener('sync', filterUpdater)\n      return\n    }\n  }\n\n}\n\n// helper for turning filter constructors into rpc middleware\nfunction toFilterCreationMiddleware(createFilterFn) {\n  return toAsyncRpcMiddleware(async (...args) => {\n    const filter = await createFilterFn(...args)\n    const result = intToHex(filter.id)\n    return result\n  })\n}\n\n// helper for pulling out req.params and setting res.result\nfunction toAsyncRpcMiddleware(asyncFn) {\n  return createAsyncMiddleware(async (req, res) => {\n    const result = await asyncFn.apply(null, req.params)\n    res.result = result\n  })\n}\n\nfunction mutexMiddlewareWrapper({ mutex }) {\n  return (middleware) => {\n    return async (req, res, next, end) => {\n      // wait for mutex available\n      // we can release immediately because\n      // we just need to make sure updates aren't active\n      const releaseLock = await mutex.acquire()\n      releaseLock()\n      middleware(req, res, next, end)\n    }\n  }\n}\n\nfunction objValues(obj, fn){\n  const values = []\n  for (let key in obj) {\n    values.push(obj[key])\n  }\n  return values\n}\n","const EthQuery = require('eth-query')\nconst pify = require('pify')\nconst BaseFilterWithHistory = require('./base-filter-history')\nconst { bnToHex, hexToInt, incrementHexInt, minBlockRef, blockRefIsNumber } = require('./hexUtils')\n\nclass LogFilter extends BaseFilterWithHistory {\n\n  constructor ({ provider, params }) {\n    super()\n    this.type = 'log'\n    this.ethQuery = new EthQuery(provider)\n    this.params = Object.assign({\n      fromBlock: 'latest',\n      toBlock: 'latest',\n      address: undefined,\n      topics: [],\n    }, params)\n    // normalize address parameter\n    if (this.params.address) {\n      // ensure array\n      if (!Array.isArray(this.params.address)) {\n        this.params.address = [this.params.address]\n      }\n      // ensure lowercase\n      this.params.address = this.params.address.map(address => address.toLowerCase())\n    }\n  }\n\n  async initialize({ currentBlock }) {\n    // resolve params.fromBlock\n    let fromBlock = this.params.fromBlock\n    if (['latest', 'pending'].includes(fromBlock)) fromBlock = currentBlock\n    if ('earliest' === fromBlock) fromBlock = '0x0'\n    this.params.fromBlock = fromBlock\n    // set toBlock for initial lookup\n    const toBlock = minBlockRef(this.params.toBlock, currentBlock)\n    const params = Object.assign({}, this.params, { toBlock })\n    // fetch logs and add to results\n    const newLogs = await this._fetchLogs(params)\n    this.addInitialResults(newLogs)\n  }\n\n  async update ({ oldBlock, newBlock }) {\n    // configure params for this update\n    const toBlock = newBlock\n    let fromBlock\n    // oldBlock is empty on first sync\n    if (oldBlock) {\n      fromBlock = incrementHexInt(oldBlock)\n    } else {\n      fromBlock = newBlock\n    }\n    // fetch logs\n    const params = Object.assign({}, this.params, { fromBlock, toBlock })\n    const newLogs = await this._fetchLogs(params)\n    const matchingLogs = newLogs.filter(log => this.matchLog(log))\n\n    // add to results\n    this.addResults(matchingLogs)\n  }\n\n  async _fetchLogs (params) {\n    const newLogs = await pify(cb => this.ethQuery.getLogs(params, cb))()\n    // add to results\n    return newLogs\n  }\n\n  matchLog(log) {\n    // check if block number in bounds:\n    if (hexToInt(this.params.fromBlock) >= hexToInt(log.blockNumber)) return false\n    if (blockRefIsNumber(this.params.toBlock) && hexToInt(this.params.toBlock) <= hexToInt(log.blockNumber)) return false\n\n    // address is correct:\n    const normalizedLogAddress = log.address && log.address.toLowerCase()\n    if (this.params.address && normalizedLogAddress && !this.params.address.includes(normalizedLogAddress)) return false\n\n    // topics match:\n    // topics are position-dependant\n    // topics can be nested to represent `or` [[a || b], c]\n    // topics can be null, representing a wild card for that position\n    const topicsMatch = this.params.topics.every((topicPattern, index) => {\n      // pattern is longer than actual topics\n      let logTopic = log.topics[index]\n      if (!logTopic) return false\n      logTopic = logTopic.toLowerCase()\n      // normalize subTopics\n      let subtopicsToMatch = Array.isArray(topicPattern) ? topicPattern : [topicPattern]\n      // check for wild card\n      const subtopicsIncludeWildcard = subtopicsToMatch.includes(null)\n      if (subtopicsIncludeWildcard) return true\n      subtopicsToMatch = subtopicsToMatch.map(topic => topic.toLowerCase())\n      // check each possible matching topic\n      const topicDoesMatch = subtopicsToMatch.includes(logTopic)\n      return topicDoesMatch\n    })\n\n    return topicsMatch\n  }\n\n}\n\nmodule.exports = LogFilter\n","'use strict';\n\nconst processFn = (fn, options, proxy, unwrapped) => function (...arguments_) {\n\tconst P = options.promiseModule;\n\n\treturn new P((resolve, reject) => {\n\t\tif (options.multiArgs) {\n\t\t\targuments_.push((...result) => {\n\t\t\t\tif (options.errorFirst) {\n\t\t\t\t\tif (result[0]) {\n\t\t\t\t\t\treject(result);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.shift();\n\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (options.errorFirst) {\n\t\t\targuments_.push((error, result) => {\n\t\t\t\tif (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\targuments_.push(resolve);\n\t\t}\n\n\t\tconst self = this === proxy ? unwrapped : this;\n\t\tReflect.apply(fn, self, arguments_);\n\t});\n};\n\nconst filterCache = new WeakMap();\n\nmodule.exports = (input, options) => {\n\toptions = {\n\t\texclude: [/.+(?:Sync|Stream)$/],\n\t\terrorFirst: true,\n\t\tpromiseModule: Promise,\n\t\t...options\n\t};\n\n\tconst objectType = typeof input;\n\tif (!(input !== null && (objectType === 'object' || objectType === 'function'))) {\n\t\tthrow new TypeError(`Expected \\`input\\` to be a \\`Function\\` or \\`Object\\`, got \\`${input === null ? 'null' : objectType}\\``);\n\t}\n\n\tconst filter = (target, key) => {\n\t\tlet cached = filterCache.get(target);\n\n\t\tif (!cached) {\n\t\t\tcached = {};\n\t\t\tfilterCache.set(target, cached);\n\t\t}\n\n\t\tif (key in cached) {\n\t\t\treturn cached[key];\n\t\t}\n\n\t\tconst match = pattern => (typeof pattern === 'string' || typeof key === 'symbol') ? key === pattern : pattern.test(key);\n\t\tconst desc = Reflect.getOwnPropertyDescriptor(target, key);\n\t\tconst writableOrConfigurableOwn = (desc === undefined || desc.writable || desc.configurable);\n\t\tconst included = options.include ? options.include.some(match) : !options.exclude.some(match);\n\t\tconst shouldFilter = included && writableOrConfigurableOwn;\n\t\tcached[key] = shouldFilter;\n\t\treturn shouldFilter;\n\t};\n\n\tconst cache = new WeakMap();\n\n\tconst proxy = new Proxy(input, {\n\t\tapply(target, thisArg, args) {\n\t\t\tconst cached = cache.get(target);\n\n\t\t\tif (cached) {\n\t\t\t\treturn Reflect.apply(cached, thisArg, args);\n\t\t\t}\n\n\t\t\tconst pified = options.excludeMain ? target : processFn(target, options, proxy, target);\n\t\t\tcache.set(target, pified);\n\t\t\treturn Reflect.apply(pified, thisArg, args);\n\t\t},\n\n\t\tget(target, key) {\n\t\t\tconst property = target[key];\n\n\t\t\t// eslint-disable-next-line no-use-extend-native/no-use-extend-native\n\t\t\tif (!filter(target, key) || property === Function.prototype[key]) {\n\t\t\t\treturn property;\n\t\t\t}\n\n\t\t\tconst cached = cache.get(property);\n\n\t\t\tif (cached) {\n\t\t\t\treturn cached;\n\t\t\t}\n\n\t\t\tif (typeof property === 'function') {\n\t\t\t\tconst pified = processFn(property, options, proxy, target);\n\t\t\t\tcache.set(property, pified);\n\t\t\t\treturn pified;\n\t\t\t}\n\n\t\t\treturn property;\n\t\t}\n\t});\n\n\treturn proxy;\n};\n","const SafeEventEmitter = require('@metamask/safe-event-emitter').default\nconst createScaffoldMiddleware = require('eth-json-rpc-middleware/scaffold')\nconst { createAsyncMiddleware } = require('json-rpc-engine')\nconst createFilterMiddleware = require('./index.js')\nconst { unsafeRandomBytes, incrementHexInt } = require('./hexUtils.js')\nconst getBlocksForRange = require('./getBlocksForRange.js')\n\nmodule.exports = createSubscriptionMiddleware\n\n\nfunction createSubscriptionMiddleware({ blockTracker, provider }) {\n  // state and utilities for handling subscriptions\n  const subscriptions = {}\n  const filterManager = createFilterMiddleware({ blockTracker, provider })\n\n  // internal flag\n  let isDestroyed = false\n\n  // create subscriptionManager api object\n  const events = new SafeEventEmitter()\n  const middleware = createScaffoldMiddleware({\n    eth_subscribe: createAsyncMiddleware(subscribe),\n    eth_unsubscribe: createAsyncMiddleware(unsubscribe),\n  })\n  middleware.destroy = destroy\n  return { events, middleware }\n\n  async function subscribe(req, res) {\n\n    if (isDestroyed) throw new Error(\n      'SubscriptionManager - attempting to use after destroying'\n    )\n\n    const subscriptionType = req.params[0]\n    // subId is 16 byte hex string\n    const subId = unsafeRandomBytes(16)\n\n    // create sub\n    let sub\n    switch (subscriptionType) {\n      case 'newHeads':\n        sub = createSubNewHeads({ subId })\n        break\n      case 'logs':\n        const filterParams = req.params[1]\n        const filter = await filterManager.newLogFilter(filterParams)\n        sub = createSubFromFilter({ subId, filter })\n        break\n      default:\n        throw new Error(`SubscriptionManager - unsupported subscription type \"${subscriptionType}\"`)\n\n    }\n    subscriptions[subId] = sub\n\n    res.result = subId\n    return\n\n    function createSubNewHeads({ subId }) {\n      const sub = {\n        type: subscriptionType,\n        destroy: async () => {\n          blockTracker.removeListener('sync', sub.update)\n        },\n        update: async ({ oldBlock, newBlock }) => {\n          // for newHeads\n          const toBlock = newBlock\n          const fromBlock = incrementHexInt(oldBlock)\n          const rawBlocks = await getBlocksForRange({ provider, fromBlock, toBlock })\n          const results = rawBlocks.map(normalizeBlock)\n          results.forEach((value) => {\n            _emitSubscriptionResult(subId, value)\n          })\n        }\n      }\n      // check for subscription updates on new block\n      blockTracker.on('sync', sub.update)\n      return sub\n    }\n\n    function createSubFromFilter({ subId, filter }){\n      filter.on('update', result => _emitSubscriptionResult(subId, result))\n      const sub = {\n        type: subscriptionType,\n        destroy: async () => {\n          return await filterManager.uninstallFilter(filter.idHex)\n        },\n      }\n      return sub\n    }\n  }\n\n  async function unsubscribe(req, res) {\n\n    if (isDestroyed) throw new Error(\n      'SubscriptionManager - attempting to use after destroying'\n    )\n\n    const id = req.params[0]\n    const subscription = subscriptions[id]\n    // if missing, return \"false\" to indicate it was not removed\n    if (!subscription) {\n      res.result = false\n      return\n    }\n    // cleanup subscription\n    delete subscriptions[id]\n    await subscription.destroy()\n    res.result = true\n  }\n\n  function _emitSubscriptionResult(filterIdHex, value) {\n    events.emit('notification', {\n      jsonrpc: '2.0',\n      method: 'eth_subscription',\n      params: {\n        subscription: filterIdHex,\n        result: value,\n      },\n    })\n  }\n\n  function destroy () {\n    events.removeAllListeners()\n    for (const id in subscriptions) {\n      subscriptions[id].destroy()\n      delete subscriptions[id]\n    }\n    isDestroyed = true\n  }\n}\n\nfunction normalizeBlock(block) {\n  return {\n    hash: block.hash,\n    parentHash: block.parentHash,\n    sha3Uncles: block.sha3Uncles,\n    miner: block.miner,\n    stateRoot: block.stateRoot,\n    transactionsRoot: block.transactionsRoot,\n    receiptsRoot: block.receiptsRoot,\n    logsBloom: block.logsBloom,\n    difficulty: block.difficulty,\n    number: block.number,\n    gasLimit: block.gasLimit,\n    gasUsed: block.gasUsed,\n    nonce: block.nonce,\n    mixHash: block.mixHash,\n    timestamp: block.timestamp,\n    extraData: block.extraData,\n  }\n}\n","const BaseFilter = require('./base-filter')\nconst getBlocksForRange = require('./getBlocksForRange')\nconst { incrementHexInt } = require('./hexUtils')\n\nclass TxFilter extends BaseFilter {\n\n  constructor ({ provider }) {\n    super()\n    this.type = 'tx'\n    this.provider = provider\n  }\n\n  async update ({ oldBlock }) {\n    const toBlock = oldBlock\n    const fromBlock = incrementHexInt(oldBlock)\n    const blocks = await getBlocksForRange({ provider: this.provider, fromBlock, toBlock })\n    const blockTxHashes = []\n    for (const block of blocks) {\n      blockTxHashes.push(...block.transactions)\n    }\n    // add to results\n    this.addResults(blockTxHashes)\n  }\n\n}\n\nmodule.exports = TxFilter\n"],"names":["module","exports","handlers","req","res","next","end","handler","method","undefined","result","ERROR","WINDOW","window","root","JS_SHA256_NO_WINDOW","WEB_WORKER","self","NODE_JS","JS_SHA256_NO_NODE_JS","process","versions","node","global","COMMON_JS","JS_SHA256_NO_COMMON_JS","AMD","define","ARRAY_BUFFER","JS_SHA256_NO_ARRAY_BUFFER","ArrayBuffer","HEX_CHARS","split","EXTRA","SHIFT","K","OUTPUT_TYPES","blocks","Array","isArray","obj","Object","prototype","toString","call","JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW","isView","buffer","constructor","createOutputMethod","outputType","is224","message","Sha256","update","createMethod","nodeWrap","create","i","length","type","crypto","eval","Buffer","algorithm","nodeMethod","createHash","digest","Error","Uint8Array","createHmacOutputMethod","key","HmacSha256","createHmacMethod","sharedMemory","this","h0","h1","h2","h3","h4","h5","h6","h7","block","start","bytes","hBytes","finalized","hashed","first","code","index","charCodeAt","array","oKeyPad","iKeyPad","b","inner","notString","lastByteIndex","hash","finalize","j","s0","s1","maj","t1","ab","da","cd","bc","a","c","d","e","f","g","h","hex","arr","push","arrayBuffer","dataView","DataView","setUint32","innerHash","sha256","sha224","hmac","util","require","EventEmitter","R","Reflect","ReflectApply","apply","target","receiver","args","Function","SafeEventEmitter","safeApply","context","err","setTimeout","inherits","emit","arguments","doError","events","_events","error","er","len","listeners","n","copy","arrayClone","_classCallCheck","_createClass","defineProperty","value","WalletLink","WalletLinkAnalytics_1","ScopedLocalStorage_1","WalletLinkProvider_1","WalletLinkSdkUI_1","WalletLinkRelay_1","WalletLinkRelayEventManager_1","util_1","WALLETLINK_URL","WALLETLINK_VERSION","options","_a","_appName","_appLogoUrl","_relay","_relayEventManager","walletLinkUIConstructor","walletLinkUrl","opts","WalletLinkSdkUI","overrideIsMetaMask","_overrideIsMetaMask","_overrideIsCoinbaseWallet","overrideIsCoinbaseWallet","_walletLinkAnalytics","walletLinkAnalytics","WalletLinkAnalytics","u","URL","walletLinkOrigin","concat","protocol","host","_storage","ScopedLocalStorage","setItem","VERSION","walletLinkExtension","WalletLinkRelayEventManager","WalletLinkRelay","version","darkMode","storage","relayEventManager","setAppInfo","appName","appLogoUrl","attachUI","jsonRpcUrl","chainId","isCipher","setProviderInfo","relay","setConnectDisabled","WalletLinkProvider","relayProvider","Promise","resolve","getFavicon","close","resetAndReload","_slicedToArray","__importDefault","mod","__esModule","LinkDialog","clsx_1","preact_1","hooks_1","LinkDialog_css_1","QRCode_1","Spinner_1","version_1","props","_ref","useState","isOpen","_ref2","isContainerHidden","setContainerHidden","_ref3","_ref4","isDialogHidden","setDialogHidden","useEffect","timers","forEach","clearTimeout","class","default","ScanQRCode","sessionId","sessionSecret","isConnected","isParentConnection","onCancel","CancelButton","onClick","serverUrl","encodeURIComponent","sessionIdKey","qrUrl","QRCode","content","width","height","fgColor","bgColor","name","LIB_VERSION","Spinner","size","color","title","href","rel","LinkFlow","rxjs_1","operators_1","LinkDialog_1","TryExtensionLinkDialog_1","_this","extensionUI$","BehaviorSubject","subscriptions","Subscription","connectDisabled","connected$","fetch","then","json","enabled","desktop","extension_ui","catch","console","el","_this2","document","createElement","className","appendChild","render","add","subscribe","v","unsubscribe","parentElement","removeChild","_this3","subscription","pipe","TryExtensionLinkDialog","qrcode_svg_1","svg","setSvg","_b","qrcode","background","container","ecl","padding","image","base64","from","src","alt","Snackbar","Snackbar_css_1","items","Map","nextItemKey","itemProps","set","delete","clear","SnackbarContainer","entries","map","SnackbarInstance","assign","children","autoExpand","menuItems","_ref5","hidden","setHidden","_ref6","_ref7","expanded","setExpanded","viewBox","fill","xmlns","cx","cy","r","action","isRed","svgWidth","svgHeight","defaultFillRule","defaultClipRule","path","info","Spinner_css_1","style","stroke","globe_icon_svg_1","link_icon_svg_1","lock_icon_svg_1","QRLogo_1","TryExtensionLinkDialog_css_1","TryExtensionBox","onInstallClick","open","ScanQRBox","DescriptionItem","icon","text","ClientMessagePublishEvent","ClientMessageSetSessionConfig","ClientMessageGetSessionConfig","ClientMessageIsLinked","ClientMessageHostSession","params","RxWebSocket","ConnectionState","url","WebSocketClass","WebSocket","webSocket","connectionStateSubject","DISCONNECTED","incomingDataSubject","Subject","replace","throwError","Observable","obs","CONNECTING","onclose","evt","clearWebSocket","reason","onopen","_","complete","CONNECTED","onmessage","data","take","get","asObservable","incomingData$","flatMap","m","JSON","parse","empty","of","send","onerror","isServerMessageFail","msg","id","_eventType","_eventProperties","_defineProperty","WalletLinkConnection","init_1","Session_1","types_1","ClientMessage_1","RxWebSocket_1","ServerMessage_1","sessionKey","destroyed","lastHeartbeatResponse","nextReqId","IntNumber","connectedSubject","linkedSubject","sessionConfigSubject","ReplaySubject","ws","connectionState$","tap","state","sendEvent","EVENTS","CONNECTED_STATE_CHANGE","sessionIdHash","Session","skip","filter","cs","delay","connect","retry","switchMap","iif","authenticate","sendIsLinked","sendGetSessionConfig","distinctUntilChanged","catchError","connected","timer","updateLastHeartbeat","heartbeat","incomingJSONData$","includes","LINKED","linked","onlineGuests","SESSION_CONFIG_RECEIVED","metadata_keys","metadata","keys","webhookId","webhookUrl","STARTED_CONNECTING","disconnect","linked$","sme","eventId","event","onceConnected$","makeRequest","callWebhook","onceLinked$","sendData","stringify","Date","now","HEARTBEAT_INTERVAL","timeout","reqId","timeoutWith","WalletLink_1","WalletLinkProvider_2","enumerable","WalletLink_2","WalletLinkAnalyticsAbstract","REQUEST_CHILD_ETHEREUM_ACCOUNTS_START","REQUEST_CHILD_ETHEREUM_ACCOUNTS_RESPONSE","METADATA_DESTROYED","FAILURE","ETH_ACCOUNTS_STATE","SESSION_STATE_CHANGE","UNLINKED_ERROR_STATE","SKIPPED_CLEARING_SESSION","GENERAL_ERROR","WEB3_REQUEST","WEB3_REQUEST_PUBLISHED","WEB3_RESPONSE","UNKNOWN_ADDRESS_ENCOUNTERED","__createBinding","o","k","k2","__exportStar","p","hasOwnProperty","scope","localStorage","scopedKey","getItem","removeItem","prefix","keysToRemove","startsWith","injectCssReset","cssReset_css_1","styleEl","createTextNode","documentElement","_toConsumableArray","_regeneratorRuntime","_asyncToGenerator","filterFromParam","FilterPolyfill","JSONRPC_TEMPLATE","jsonrpc","provider","logFilters","blockFilters","Set","pendingTransactionFilters","cursors","timeouts","nextFilterId","_newFilter","mark","_callee","param","cursor","wrap","_context","prev","makeFilterId","setInitialCursorPosition","fromBlock","sent","log","setFilterTimeout","abrupt","hexStringFromIntNumber","stop","_x","_newBlockFilter","_callee2","_context2","_newPendingTransactionFilter","_callee3","_context3","filterId","intNumberFromHexString","deleteFilter","has","getLogFilterChanges","getBlockFilterChanges","getPendingTransactionFilterChanges","filterNotFoundError","_getFilterLogs","_callee4","_context4","sendAsyncPromise","paramFromFilter","_x2","request","reject","sendAsync","response","_getLogFilterChanges","_callee5","cursorPosition","currentBlockHeight","toBlock","highestBlock","newCursorPosition","_context5","getCurrentBlockHeight","emptyResult","blockNumber","Math","max","_x3","_getBlockFilterChanges","_callee6","_context6","all","range","getBlockHashByNumber","_x4","_getPendingTransactionFilterChanges","_callee7","_id","_context7","_x5","_setInitialCursorPosition","_callee8","startBlock","initialCursorPosition","_context8","_x6","_x7","existing","_getCurrentBlockHeight","_callee9","_yield$this$sendAsync","_context9","ensureHexString","_getBlockHashByNumber","_callee10","_context10","_x8","intBlockHeightFromHexBlockHeight","addresses","address","topics","hexBlockHeightFromIntBlockHeight","isHexString","String","JSONRPCMethod","SubscriptionManager","PollingBlockTracker","createSubscriptionManager","noop","blockTracker","pollingInterval","setSkipCacheFlag","_createSubscriptionMa","middleware","subscriptionMiddleware","_handleRequest","destroy","_assertThisInitialized","_inherits","_createSuper","safe_event_emitter_1","bn_js_1","eth_rpc_errors_1","WalletLinkRelayAbstract_1","eth_eip712_util_1","FilterPolyfill_1","JSONRPC_1","SubscriptionManager_1","DEFAULT_CHAIN_ID_KEY","DEFAULT_JSON_RPC_URL","HAS_CHAIN_BEEN_SWITCHED_KEY","HAS_CHAIN_OVERRIDDEN_FROM_RELAY","_safe_event_emitter_","_super","_filterPolyfill","_subscriptionManager","_addresses","hasMadeFirstChainChangedEmission","_send","bind","_sendAsync","updateProviderInfo","getChainId","enable","_setAddresses","scanQRCode","genericRequest","_jsonRpcUrlFromOpts","_relayProvider","isCoinbaseWallet","chainIdStr","prepend0x","cachedAddresses","LOCAL_STORAGE_ADDRESSES_KEY","ensureAddressString","on","notification","initializeRelay","addEventListener","_chainId","Number","isChainOverridden","fromRelay","originalChainId","ensureIntNumber","_watchAsset","symbol","decimals","watchAsset","promise","_addEthereumChain","rpcUrls","blockExplorerUrls","chainName","iconUrls","nativeCurrency","addEthereumChain","isApproved","_x9","_x10","_x11","_switchEthereumChain","switchResponse","switchEthereumChain","errorCode","ethErrors","custom","rpcUrl","_x12","_enable","addresses_length","session","eth_requestAccounts","requestOrMethod","callbackOrParams","_sendRequestAsync","callback","_sendRequest","arrayCb","_sendMultipleRequestsAsync","responses","cb","_request2","newParams","rpc","invalidRequest","makeRequestId","_x13","_scanQRCode","match","ensureRegExpString","_x14","_genericRequest","_x15","_x16","_handleSynchronousMethods","newAddresses","join","dispatchEvent","CustomEvent","detail","syncResult","filterPromise","_handleAsynchronousFilterMethods","subscriptionPromise","_handleSubscriptionMethods","_handleAsynchronousMethods","requests","_this4","eth_accounts","_eth_accounts","eth_coinbase","_eth_coinbase","eth_uninstallFilter","_eth_uninstallFilter","net_version","_net_version","eth_chainId","_eth_chainId","_handleAsynchronousMethods2","t0","eth_sign","eth_ecRecover","personal_sign","personal_ecRecover","eth_signTransaction","eth_sendRawTransaction","eth_sendTransaction","eth_signTypedData_v1","eth_signTypedData_v2","eth_signTypedData_v3","eth_signTypedData_v4","eth_signTypedData","walletlink_arbitrary","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_watchAsset","_eth_requestAccounts","_eth_sign","_eth_ecRecover","_personal_sign","_personal_ecRecover","_eth_signTransaction","_eth_sendRawTransaction","_eth_sendTransaction","_eth_signTypedData_v1","_throwUnsupportedMethodError","_eth_signTypedData_v3","_eth_signTypedData_v4","_walletlink_arbitrary","_wallet_addEthereumChain","_wallet_switchEthereumChain","_wallet_watchAsset","makeEthereumJSONRPCRequest","_x17","eth_newFilter","_eth_newFilter","eth_newBlockFilter","_eth_newBlockFilter","eth_newPendingTransactionFilter","_eth_newPendingTransactionFilter","eth_getFilterChanges","_eth_getFilterChanges","eth_getFilterLogs","_eth_getFilterLogs","eth_subscribe","eth_unsubscribe","handleRequest","addressString","lowercaseAddresses","_isKnownAddress","tx","fromAddress","selectedAddress","_ensureKnownAddress","toAddress","to","weiValue","ensureBN","ensureBuffer","alloc","nonce","gasPriceInWei","gasPrice","maxFeePerGas","maxPriorityFeePerGas","gasLimit","gas","unauthorized","unsupportedMethod","_signEthereumMessage2","addPrefix","typedDataJson","signEthereumMessage","userRejectedRequest","_x18","_x19","_x20","_x21","_ethereumAddressFromSignedMessage2","signature","ethereumAddressFromSignedMessage","_x22","_x23","_x24","parseInt","_eth_requestAccounts2","_callee11","_context11","requestEthereumAccounts","_requireAuthorization","_signEthereumMessage","_ethereumAddressFromSignedMessage","_eth_signTransaction2","_callee12","_context12","_prepareTransactionParams","signEthereumTransaction","_x25","_eth_sendRawTransaction2","_callee13","signedTransaction","_context13","submitEthereumTransaction","_x26","_eth_sendTransaction2","_callee14","_context14","signAndSubmitEthereumTransaction","_x27","_eth_signTypedData_v","_callee15","typedData","typedDataJSON","_context15","ensureParsedJSONObject","hashForSignTypedDataLegacy","_x28","_eth_signTypedData_v2","_callee16","_context16","hashForSignTypedData_v3","_x29","_eth_signTypedData_v5","_callee17","_context17","hashForSignTypedData_v4","_x30","_walletlink_arbitrary2","_callee18","_context18","_x31","_wallet_addEthereumChain2","_callee19","_c","_d","chainIdNumber","_context19","trim","_x32","_wallet_switchEthereumChain2","_callee20","_context20","_x33","_wallet_watchAsset2","_callee21","_request$options","_context21","invalidParams","_x34","uninstallFilter","_eth_newFilter2","_callee22","_context22","newFilter","_x35","_eth_newBlockFilter2","_callee23","_context23","newBlockFilter","_eth_newPendingTransactionFilter2","_callee24","_context24","newPendingTransactionFilter","getFilterChanges","getFilterLogs","_this5","setAccountsCallback","accounts","setChainCallback","LinkFlow_1","Snackbar_1","cssReset_1","_WalletLinkUI_1$Walle","attached","snackbar","linkFlow","secret","attach","snackbarProps","isUnlinkedErrorState","onResetConnection","presentItem","location","reload","WalletLinkUI","RelayMessageType","js_sha256_1","STORAGE_KEY_SESSION_ID","STORAGE_KEY_SESSION_SECRET","STORAGE_KEY_SESSION_LINKED","randomBytesHex","_secret","_key","_linked","val","persistLinked","fromEvent","oldValue","newValue","__setModuleDefault","__decorate","decorators","desc","getOwnPropertyDescriptor","decorate","__importStar","bind_decorator_1","WalletLinkConnection_1","aes256gcm","Web3Method_1","Web3RequestCanceledMessage_1","Web3RequestMessage_1","Web3Response_1","Web3ResponseMessage_1","_WalletLinkRelayAbstr","accountsCallback","chainCallback","_session","load","save","connection","incomingEvent$","handleIncomingEvent","isLinked","wasConnectedViaStandalone","getSessionIdHash","origin","sessionConfig$","__destroyed","alreadyDestroyed","isDestroyed","WalletUsername","mergeMap","decrypt","walletUsername","WALLET_USER_NAME_KEY","AppVersion","appVersion","APP_VERSION_KEY","ChainId","JsonRpcUrl","zip","EthereumAddress","accountRequestCallbackIds","values","Web3ResponseMessage","RequestEthereumAccountsResponse","invokeCallback","ui","setSessionMetadata","sessionMetadataChange","storedSession","storedSessionIdHash","reloadUI","sendRequest","Web3Method","hexStringFromBuffer","bigIntStringFromBN","shouldSubmit","regExp","generic","hideSnackbarItem","cancel","publishWeb3RequestCanceledEvent","handleWeb3ResponseMessage","ErrorResponse","isStandalone","showConnecting","callbacks","errorMessage","sendRequestStandalone","publishWeb3RequestEvent","disabled","Web3RequestMessage","isSessionMismatched","publishEvent","Web3RequestCanceledMessage","subscriber","encrypt","encrypted","_this6","isWeb3ResponseMessage","_this7","isRequestEthereumAccountsResponse","_this8","hideRequestEthereumAccounts","userAgent","navigator","test","inlineAccountsResponse","onAccounts","_this9","inlineWatchAsset","onApprove","WatchAssetReponse","_this10","inlineAddEthereumChain","AddEthereumChainResponse","_this11","inlineSwitchEthereumChain","SwitchEthereumChainResponse","_this12","_cancel","onSuccess","WalletLinkRelayAbstract","_makeEthereumJSONRPCRequest","body","mode","headers","serializeError","_nextRequestId","idStr","RelayMessage_1","WEB3_REQUEST_CANCELED","EthereumAddressFromSignedMessageResponse","SubmitEthereumTransactionResponse","SignEthereumTransactionResponse","SignEthereumMessageResponse","addResponse","success","signedData","txHash","_encrypt","plainText","ivBytes","secretKey","enc","encryptedResult","authTag","encryptedPlaintext","authTagBytes","encryptedPlaintextBytes","concatted","getRandomValues","subtle","importKey","hexStringToUint8Array","TextEncoder","iv","encode","slice","byteLength","uint8ArrayToHex","cipherText","concattedBytes","algo","decrypted","decoder","TextDecoder","decode","OpaqueType","RegExpString","BigIntString","AddressString","HexString","num","floor","isBigNumber","ensureEvenLengthHexString","strip0x","has0xPrefix","INT_STRING_REGEX","HEXADECIMAL_STRING_REGEX","padStart","str","s","toLowerCase","includePrefix","isInteger","toNumber","config","EUCLID","hexString","byte","buf","bn","isBuffer","RegExp","isBN","querySelector","_document$location","getAttribute","BN","elementaryName","parseTypeN","exec","parseTypeNxM","tmp","parseTypeArray","parseNumber","arg","stripHexPrefix","toArray","encodeSingle","ret","lastIndexOf","unshift","zeros","setLengthRight","bitLength","toArrayLike","toTwos","mul","pow","isDynamic","solidityPack","types","setLength","rawEncode","output","headLength","cur","soliditySHA3","keccak","abi","TYPED_MESSAGE_SCHEMA","properties","additionalProperties","required","primaryType","domain","TypedDataUtils","encodeData","useV4","encodedTypes","encodedValues","hashType","_step","encodeField","parsedType","typeValuePairs","item","_iterator","_createForOfIteratorHelper","done","field","_encodeField","_encodeField2","_step2","_iterator2","encodeType","deps","findTypeDependencies","dep","sort","_step3","_iterator3","results","_step4","_iterator4","_step5","_iterator5","hashStruct","sanitizeData","sanitizedData","EIP712Domain","parts","msgParams","toBuffer","schema","typedSignatureHashLegacy","createKeccakHash","allocUnsafe","right","intToBuffer","bufferToHex","bits","QR8bitByte","QRMode","MODE_8BIT_BYTE","parsedData","l","byteArray","QRCodeModel","typeNumber","errorCorrectLevel","modules","moduleCount","dataCache","dataList","getLength","write","put","addData","newData","isDark","row","col","getModuleCount","make","makeImpl","getBestMaskPattern","maskPattern","setupPositionProbePattern","setupPositionAdjustPattern","setupTimingPattern","setupTypeInfo","setupTypeNumber","createData","mapData","minLostPoint","pattern","lostPoint","QRUtil","getLostPoint","createMovieClip","target_mc","instance_name","depth","qr_mc","createEmptyMovieClip","y","x","beginFill","moveTo","lineTo","endFill","pos","getPatternPosition","getBCHTypeNumber","getBCHTypeInfo","inc","bitIndex","byteIndex","dark","getMask","PAD0","PAD1","rsBlocks","QRRSBlock","getRSBlocks","QRBitBuffer","getLengthInBits","totalDataCount","dataCount","putBit","createBytes","offset","maxDcCount","maxEcCount","dcdata","ecdata","dcCount","ecCount","totalCount","rsPoly","getErrorCorrectPolynomial","modPoly","QRPolynomial","modIndex","totalCodeCount","MODE_NUMBER","MODE_ALPHA_NUM","MODE_KANJI","QRErrorCorrectLevel","QRMaskPattern","PATTERN_POSITION_TABLE","G15","G18","G15_MASK","getBCHDigit","digit","errorCorrectLength","multiply","QRMath","gexp","qrCode","sameCount","count","darkCount","abs","glog","LOG_TABLE","EXP_TABLE","shift","ratio","RS_BLOCK_TABLE","rsBlock","getRsBlockTable","list","bufIndex","bit","QRCodeLimitLength","encodeURI","_getUTF8Length","limit","table","_getTypeNumber","_getErrorCorrectLevel","opt","pretty","indent","EOL","xsize","ysize","swap","xmlDeclaration","predefined","defs","bgrect","modrect","pathdata","px","py","t","w","toFixed","imgSvg","imgWidth","imgHeight","imgY","calculateSum","accumulator","currentValue","blockTrackerEvents","BaseBlockTracker","_SafeEventEmitter","_blockResetDuration","blockResetDuration","_blockResetTimeout","_currentBlock","_isRunning","_onNewListener","_onRemoveListener","_resetCurrentBlock","_setupInternalEvents","_getLatestBlock","latestBlock","once","eventName","_get","_getPrototypeOf","removeListener","_maybeStart","_getBlockTrackerEventCount","_maybeEnd","_cancelBlockResetTimeout","_start","_setupBlockResetTimeout","_end","listenerCount","reduce","newBlock","currentBlock","hexToInt","_setCurrentBlock","oldBlock","unref","hexInt","pify","_BaseBlockTracker","retryTimeout","keepEventLoopActive","_provider","_pollingInterval","_retryTimeout","_keepEventLoopActive","_setSkipCacheFlag","_checkForLatestBlock","_updateLatestBlock","getLatestBlock","_performSync","_performSync2","newErr","stack","emitErr","_updateLatestBlock2","_fetchLatestBlock","_newPotentialLatest","_fetchLatestBlock2","skipCache","duration","timoutRef","BaseFilterWithHistory","_BaseFilter","allResults","_update","newResults","BaseFilter","updates","_initialize","getBlocksForRange","incrementHexInt","BlockFilter","blockBodies","blockHashes","addResults","_getBlocksForRange","fromBlockNumber","toBlockNumber","missingBlockNumbers","intToHex","blockNum","query","int","sortBlockRefs","refs","refA","refB","unsafeRandomNibble","random","minBlockRef","_len","maxBlockRef","_len2","_key2","sortedRefs","bnToHex","blockRefIsNumber","blockRef","unsafeRandomBytes","byteCount","Mutex","createAsyncMiddleware","createJsonRpcMiddleware","LogFilter","TxFilter","_require2","toFilterCreationMiddleware","createFilterFn","toAsyncRpcMiddleware","_args12","asyncFn","objValues","fn","filterIndex","filters","mutex","waitForFree","_ref8","_ref9","acquire","releaseLock","mutexMiddlewareWrapper","newLogFilter","uninstallFilterHandler","filterUpdater","_uninstallAllFilters","uninstallAllFilters","_newLogFilter","installFilter","_getFilterChanges","filterIndexHex","getChangesAndClear","getAllResults","_uninstallFilterHandler","Boolean","_installFilter","prevFilterCount","newFilterCount","initialize","idHex","updateBlockTrackerSubs","_uninstallFilter","EthQuery","_require","_BaseFilterWithHistor","ethQuery","newLogs","_fetchLogs","addInitialResults","matchingLogs","matchLog","_fetchLogs2","getLogs","normalizedLogAddress","every","topicPattern","logTopic","subtopicsToMatch","topic","_objectSpread","processFn","proxy","unwrapped","arguments_","P","promiseModule","multiArgs","errorFirst","filterCache","WeakMap","input","exclude","objectType","TypeError","cache","Proxy","thisArg","cached","pified","excludeMain","property","writableOrConfigurableOwn","writable","configurable","shouldFilter","include","some","createScaffoldMiddleware","createFilterMiddleware","normalizeBlock","parentHash","sha3Uncles","miner","stateRoot","transactionsRoot","receiptsRoot","logsBloom","difficulty","number","gasUsed","mixHash","timestamp","extraData","filterManager","_subscribe","_unsubscribe","removeAllListeners","subscriptionType","subId","sub","filterParams","createSubNewHeads","createSubFromFilter","_emitSubscriptionResult","_destroy2","_destroy","rawBlocks","filterIdHex","blockTxHashes","transactions"],"sourceRoot":""}